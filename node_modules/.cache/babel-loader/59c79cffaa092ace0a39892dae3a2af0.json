{"ast":null,"code":"var _jsxFileName = \"/home/brianmuciri/Projects/farm-ledger-ld/src/Routes/Maintenances.js\";\nimport Layout from \"../components/PrivateLayout\";\nimport Grid from \"@material-ui/core/Grid\";\nimport React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport UndoIcon from \"@material-ui/icons/Undo\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport { Box, TextField, Button, MenuItem } from \"@material-ui/core\";\nimport { connect } from \"react-redux\";\nimport { handleDelete, itemsFetchData } from \"../actions/actions\";\nimport PageHeading from \"../components/PageHeading\";\nimport CommonTable from \"../components/table/commonTable\";\nimport { commonStyles } from \"../components/commonStyles\";\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport { withRouter } from \"react-router-dom\";\nimport ExportToExcelBtn from \"../components/ExportToExcelBtn\";\nimport { parse } from \"date-fns\";\nconst STATUS_LIST = [\"Open\", \"Closed\"];\nconst maintenanceRequestsTableHeadCells = [{\n  id: \"date_created\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Date Created\"\n}, {\n  id: \"tenant_name\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Tenant\"\n}, {\n  id: \"unit_ref\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Unit Number/Ref\"\n}, {\n  id: \"maintenance_details\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Request Details\"\n}, {\n  id: \"status\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Status\"\n}, {\n  id: \"edit\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Edit\"\n}, {\n  id: \"delete\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Delete\"\n}];\n\nlet MaintenanceRequestsPage = ({\n  fetchData,\n  maintenanceRequests,\n  contacts,\n  match,\n  handleItemDelete\n}) => {\n  let [filteredMaintenanceRequestItems, setFilteredMaintenanceRequestItems] = useState([]);\n  let [fromDateFilter, setFromDateFilter] = useState(\"\");\n  let [toDateFilter, setToDateFilter] = useState(\"\");\n  let [contactFilter, setContactFilter] = useState(null);\n  let [statusFilter, setStatusFilter] = useState(\"\");\n  const [selected, setSelected] = useState([]);\n  const classes = commonStyles();\n  useEffect(() => {\n    setFilteredMaintenanceRequestItems(maintenanceRequests);\n  }, [maintenanceRequests]);\n  useEffect(() => {\n    fetchData(['maintenance-requests']);\n  }, [fetchData]);\n\n  const handleSearchFormSubmit = event => {\n    event.preventDefault(); //filter the maintenanceRequests here according to search criteria\n\n    const filteredMaintenanceRequests = maintenanceRequests.filter(({\n      date_created,\n      tenant_id,\n      status\n    }) => (!fromDateFilter ? true : date_created >= fromDateFilter) && (!toDateFilter ? true : date_created === toDateFilter) && (!statusFilter ? true : status === statusFilter) && (!contactFilter ? true : tenant_id === contactFilter.id));\n    setFilteredMaintenanceRequestItems(filteredMaintenanceRequests);\n  };\n\n  const resetSearchForm = event => {\n    event.preventDefault();\n    setContactFilter(\"\");\n    setStatusFilter(\"\");\n    setFromDateFilter(\"\");\n    setToDateFilter(\"\");\n  };\n\n  return /*#__PURE__*/React.createElement(Layout, {\n    pageTitle: \"Maintenance Requests\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 3,\n    justify: \"space-evenly\",\n    alignItems: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(PageHeading, {\n    text: \"Maintenance Requests\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 6\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    item: true,\n    alignItems: \"center\",\n    direction: \"row\",\n    key: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    color: \"primary\",\n    variant: \"contained\",\n    size: \"medium\",\n    startIcon: /*#__PURE__*/React.createElement(AddIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 19\n      }\n    }),\n    component: Link,\n    to: `${match.url}/new`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }\n  }, \"NEW\")), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    color: \"primary\",\n    variant: \"contained\",\n    size: \"medium\",\n    startIcon: /*#__PURE__*/React.createElement(EditIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 19\n      }\n    }),\n    disabled: !selected.length,\n    component: Link,\n    to: `${match.url}/${selected[0]}/edit`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }, \"Edit\")), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(ExportToExcelBtn, {\n    disabled: !selected.length,\n    reportName: 'Maintenance Requests Records',\n    reportTitle: 'Maintenance Requests Data',\n    headCells: maintenanceRequestsTableHeadCells,\n    dataToPrint: maintenanceRequests.filter(({\n      id\n    }) => selected.includes(id)),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 6\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    border: 1,\n    borderRadius: \"borderRadius\",\n    borderColor: \"grey.400\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: classes.form,\n    id: \"maintenanceRequestSearchForm\",\n    onSubmit: handleSearchFormSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    justify: \"center\",\n    direction: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    md: 6,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    variant: \"outlined\",\n    type: \"date\",\n    id: \"from_date_filter\",\n    name: \"from_date_filter\",\n    label: \"From Date\",\n    value: fromDateFilter,\n    onChange: event => {\n      setFromDateFilter(event.target.value);\n    },\n    InputLabelProps: {\n      shrink: true\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 10\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    md: 6,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    variant: \"outlined\",\n    type: \"date\",\n    name: \"to_date_filter\",\n    label: \"To Date\",\n    id: \"to_date_filter\",\n    onChange: event => {\n      setToDateFilter(event.target.value);\n    },\n    value: toDateFilter,\n    InputLabelProps: {\n      shrink: true\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 10\n    }\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    justify: \"center\",\n    direction: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Autocomplete, {\n    id: \"contact_filter\",\n    options: contacts,\n    getOptionSelected: (option, value) => option.id === value.id,\n    name: \"contact_filter\",\n    onChange: (event, newValue) => {\n      setContactFilter(newValue);\n    },\n    value: contactFilter,\n    getOptionLabel: tenant => tenant ? `${tenant.first_name} ${tenant.last_name}` : '',\n    style: {\n      width: \"100%\"\n    },\n    renderInput: params => /*#__PURE__*/React.createElement(TextField, Object.assign({}, params, {\n      label: \"Tenant\",\n      variant: \"outlined\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 36\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 10\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    md: 6,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    select: true,\n    variant: \"outlined\",\n    name: \"status\",\n    label: \"Status\",\n    id: \"status\",\n    onChange: event => {\n      setStatusFilter(event.target.value);\n    },\n    value: statusFilter,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 10\n    }\n  }, STATUS_LIST.map((status, index) => /*#__PURE__*/React.createElement(MenuItem, {\n    key: index,\n    value: status,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 12\n    }\n  }, status))))), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    item: true,\n    justify: \"flex-end\",\n    alignItems: \"center\",\n    direction: \"row\",\n    key: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    form: \"maintenanceRequestSearchForm\",\n    color: \"primary\",\n    variant: \"contained\",\n    size: \"medium\",\n    startIcon: /*#__PURE__*/React.createElement(SearchIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 22\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 10\n    }\n  }, \"SEARCH\")), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: event => {\n      resetSearchForm(event);\n    },\n    type: \"reset\",\n    form: \"propertySearchForm\",\n    color: \"primary\",\n    variant: \"contained\",\n    size: \"medium\",\n    startIcon: /*#__PURE__*/React.createElement(UndoIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 22\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 10\n    }\n  }, \"RESET\")))))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CommonTable, {\n    selected: selected,\n    setSelected: setSelected,\n    rows: filteredMaintenanceRequestItems,\n    headCells: maintenanceRequestsTableHeadCells,\n    handleDelete: handleItemDelete,\n    deleteUrl: \"maintenance-requests\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 6\n    }\n  }))));\n};\n\nconst mapStateToProps = state => {\n  return {\n    currentUser: state.currentUser,\n    maintenanceRequests: state.maintenanceRequests.map(maintenanceRequest => {\n      const tenant = state.contacts.find(contact => contact.id === maintenanceRequest.tenant_id) || {};\n      const unit = state.propertyUnits.find(unit => unit.id === maintenanceRequest.property_unit) || {};\n      return Object.assign({}, maintenanceRequest, {\n        tenant_name: `${tenant.first_name} ${tenant.last_name}`,\n        tenant_id_number: tenant.id_number,\n        unit_ref: unit.ref\n      });\n    }).sort((maintenanceRequest1, maintenanceRequest2) => parse(maintenanceRequest2.date_created, 'yyyy-MM-dd', new Date()) - parse(maintenanceRequest1.date_created, 'yyyy-MM-dd', new Date())),\n    contacts: state.contacts\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    fetchData: collectionsUrls => dispatch(itemsFetchData(collectionsUrls)),\n    handleItemDelete: (itemId, url) => dispatch(handleDelete(itemId, url))\n  };\n};\n\nMaintenanceRequestsPage = connect(mapStateToProps, mapDispatchToProps)(MaintenanceRequestsPage);\nexport default withRouter(MaintenanceRequestsPage);","map":{"version":3,"sources":["/home/brianmuciri/Projects/farm-ledger-ld/src/Routes/Maintenances.js"],"names":["Layout","Grid","React","useEffect","useState","Link","EditIcon","SearchIcon","UndoIcon","AddIcon","Box","TextField","Button","MenuItem","connect","handleDelete","itemsFetchData","PageHeading","CommonTable","commonStyles","Autocomplete","withRouter","ExportToExcelBtn","parse","STATUS_LIST","maintenanceRequestsTableHeadCells","id","numeric","disablePadding","label","MaintenanceRequestsPage","fetchData","maintenanceRequests","contacts","match","handleItemDelete","filteredMaintenanceRequestItems","setFilteredMaintenanceRequestItems","fromDateFilter","setFromDateFilter","toDateFilter","setToDateFilter","contactFilter","setContactFilter","statusFilter","setStatusFilter","selected","setSelected","classes","handleSearchFormSubmit","event","preventDefault","filteredMaintenanceRequests","filter","date_created","tenant_id","status","resetSearchForm","url","length","includes","form","target","value","shrink","option","newValue","tenant","first_name","last_name","width","params","map","index","mapStateToProps","state","currentUser","maintenanceRequest","find","contact","unit","propertyUnits","property_unit","Object","assign","tenant_name","tenant_id_number","id_number","unit_ref","ref","sort","maintenanceRequest1","maintenanceRequest2","Date","mapDispatchToProps","dispatch","collectionsUrls","itemId"],"mappings":"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","sourcesContent":["import Layout from \"../components/PrivateLayout\";\nimport Grid from \"@material-ui/core/Grid\";\nimport React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport UndoIcon from \"@material-ui/icons/Undo\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport { Box, TextField, Button, MenuItem } from \"@material-ui/core\";\nimport { connect } from \"react-redux\";\nimport { handleDelete, itemsFetchData } from \"../actions/actions\";\nimport PageHeading from \"../components/PageHeading\";\nimport CommonTable from \"../components/table/commonTable\";\nimport { commonStyles } from \"../components/commonStyles\";\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport { withRouter } from \"react-router-dom\";\nimport ExportToExcelBtn from \"../components/ExportToExcelBtn\";\nimport { parse } from \"date-fns\";\n\nconst STATUS_LIST = [\"Open\", \"Closed\"];\n\nconst maintenanceRequestsTableHeadCells = [\n\t{ id: \"date_created\", numeric: false, disablePadding: true, label: \"Date Created\" },\n\t{ id: \"tenant_name\", numeric: false, disablePadding: true, label: \"Tenant\" },\n\t{ id: \"unit_ref\", numeric: false, disablePadding: true, label: \"Unit Number/Ref\" },\n\t{ id: \"maintenance_details\", numeric: false, disablePadding: true, label: \"Request Details\" },\n\t{ id: \"status\", numeric: false, disablePadding: true, label: \"Status\" },\n\t{ id: \"edit\", numeric: false, disablePadding: true, label: \"Edit\" },\n\t{ id: \"delete\", numeric: false, disablePadding: true, label: \"Delete\" },\n\n];\n\nlet MaintenanceRequestsPage = ({\n\tfetchData,\n\tmaintenanceRequests,\n\tcontacts,\n\tmatch,\n\thandleItemDelete\n}) => {\n\tlet [filteredMaintenanceRequestItems, setFilteredMaintenanceRequestItems] = useState([]);\n\tlet [fromDateFilter, setFromDateFilter] = useState(\"\");\n\tlet [toDateFilter, setToDateFilter] = useState(\"\");\n\tlet [contactFilter, setContactFilter] = useState(null);\n\tlet [statusFilter, setStatusFilter] = useState(\"\");\n\tconst [selected, setSelected] = useState([]);\n\n\tconst classes = commonStyles();\n\n\tuseEffect(() => {\n\t\tsetFilteredMaintenanceRequestItems(maintenanceRequests);\n\t}, [maintenanceRequests]);\n\n\tuseEffect(() => {\n\t\tfetchData(['maintenance-requests']);\n\t}, [fetchData]);\n\n\tconst handleSearchFormSubmit = (event) => {\n\t\tevent.preventDefault();\n\t\t//filter the maintenanceRequests here according to search criteria\n\t\tconst filteredMaintenanceRequests = maintenanceRequests\n\t\t\t.filter(({ date_created, tenant_id, status }) =>\n\t\t\t\t(!fromDateFilter ? true : date_created >= fromDateFilter)\n\t\t\t\t&& (!toDateFilter ? true : date_created === toDateFilter)\n\t\t\t\t&& (!statusFilter ? true : status === statusFilter)\n\t\t\t\t&& (!contactFilter ? true : tenant_id === contactFilter.id)\n\t\t\t)\n\t\tsetFilteredMaintenanceRequestItems(filteredMaintenanceRequests);\n\t};\n\n\tconst resetSearchForm = (event) => {\n\t\tevent.preventDefault();\n\t\tsetContactFilter(\"\");\n\t\tsetStatusFilter(\"\");\n\t\tsetFromDateFilter(\"\");\n\t\tsetToDateFilter(\"\");\n\t};\n\n\treturn (\n\t\t<Layout pageTitle=\"Maintenance Requests\">\n\t\t\t<Grid\n\t\t\t\tcontainer\n\t\t\t\tspacing={3}\n\t\t\t\tjustify=\"space-evenly\"\n\t\t\t\talignItems=\"center\"\n\t\t\t>\n\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t<PageHeading text=\"Maintenance Requests\" />\n\t\t\t\t</Grid>\n\t\t\t\t<Grid\n\t\t\t\t\tcontainer\n\t\t\t\t\tspacing={2}\n\t\t\t\t\titem\n\t\t\t\t\talignItems=\"center\"\n\t\t\t\t\tdirection=\"row\"\n\t\t\t\t\tkey={1}\n\t\t\t\t>\n\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\tsize=\"medium\"\n\t\t\t\t\t\t\tstartIcon={<AddIcon />}\n\t\t\t\t\t\t\tcomponent={Link}\n\t\t\t\t\t\t\tto={`${match.url}/new`}\n\t\t\t\t\t\t>\n\n\t\t\t\t\t\t\tNEW\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\tsize=\"medium\"\n\t\t\t\t\t\t\tstartIcon={<EditIcon />}\n\t\t\t\t\t\t\tdisabled={!selected.length}\n\t\t\t\t\t\t\tcomponent={Link}\n\t\t\t\t\t\t\tto={`${match.url}/${selected[0]}/edit`}\n\t\t\t\t\t\t>\n\n\t\t\t\t\t\t\tEdit\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t<ExportToExcelBtn\n\t\t\t\t\t\t\tdisabled={!selected.length}\n\t\t\t\t\t\t\treportName={'Maintenance Requests Records'}\n\t\t\t\t\t\t\treportTitle={'Maintenance Requests Data'}\n\t\t\t\t\t\t\theadCells={maintenanceRequestsTableHeadCells}\n\t\t\t\t\t\t\tdataToPrint={maintenanceRequests.filter(({ id }) => selected.includes(id))}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid item>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t<Box\n\t\t\t\t\t\tborder={1}\n\t\t\t\t\t\tborderRadius=\"borderRadius\"\n\t\t\t\t\t\tborderColor=\"grey.400\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<form\n\t\t\t\t\t\t\tclassName={classes.form}\n\t\t\t\t\t\t\tid=\"maintenanceRequestSearchForm\"\n\t\t\t\t\t\t\tonSubmit={handleSearchFormSubmit}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Grid\n\t\t\t\t\t\t\t\tcontainer\n\t\t\t\t\t\t\t\tspacing={2}\n\t\t\t\t\t\t\t\tjustify=\"center\"\n\t\t\t\t\t\t\t\tdirection=\"row\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Grid item md={6} xs={12}>\n\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\ttype=\"date\"\n\t\t\t\t\t\t\t\t\t\tid=\"from_date_filter\"\n\t\t\t\t\t\t\t\t\t\tname=\"from_date_filter\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"From Date\"\n\t\t\t\t\t\t\t\t\t\tvalue={fromDateFilter}\n\t\t\t\t\t\t\t\t\t\tonChange={(event) => {\n\t\t\t\t\t\t\t\t\t\t\tsetFromDateFilter(\n\t\t\t\t\t\t\t\t\t\t\t\tevent.target.value\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tInputLabelProps={{ shrink: true }}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t<Grid item md={6} xs={12}>\n\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\ttype=\"date\"\n\t\t\t\t\t\t\t\t\t\tname=\"to_date_filter\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"To Date\"\n\t\t\t\t\t\t\t\t\t\tid=\"to_date_filter\"\n\t\t\t\t\t\t\t\t\t\tonChange={(event) => {\n\t\t\t\t\t\t\t\t\t\t\tsetToDateFilter(event.target.value);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tvalue={toDateFilter}\n\t\t\t\t\t\t\t\t\t\tInputLabelProps={{ shrink: true }}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid\n\t\t\t\t\t\t\t\tcontainer\n\t\t\t\t\t\t\t\tspacing={2}\n\t\t\t\t\t\t\t\tjustify=\"center\"\n\t\t\t\t\t\t\t\tdirection=\"row\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Grid item xs={12} md={6}>\n\t\t\t\t\t\t\t\t\t<Autocomplete\n\t\t\t\t\t\t\t\t\t\tid=\"contact_filter\"\n\t\t\t\t\t\t\t\t\t\toptions={contacts}\n\t\t\t\t\t\t\t\t\t\tgetOptionSelected={(option, value) => option.id === value.id}\n\t\t\t\t\t\t\t\t\t\tname=\"contact_filter\"\n\t\t\t\t\t\t\t\t\t\tonChange={(event, newValue) => {\n\t\t\t\t\t\t\t\t\t\t\tsetContactFilter(newValue);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tvalue={contactFilter}\n\t\t\t\t\t\t\t\t\t\tgetOptionLabel={(tenant) => tenant ? `${tenant.first_name} ${tenant.last_name}` : ''}\n\t\t\t\t\t\t\t\t\t\tstyle={{ width: \"100%\" }}\n\t\t\t\t\t\t\t\t\t\trenderInput={(params) => <TextField {...params} label=\"Tenant\" variant=\"outlined\" />}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t<Grid item md={6} xs={12}>\n\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\tselect\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tname=\"status\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Status\"\n\t\t\t\t\t\t\t\t\t\tid=\"status\"\n\t\t\t\t\t\t\t\t\t\tonChange={(event) => {\n\t\t\t\t\t\t\t\t\t\t\tsetStatusFilter(event.target.value);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tvalue={statusFilter}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{STATUS_LIST.map((status, index) => (\n\t\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={status}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{status}\n\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</TextField>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid\n\t\t\t\t\t\t\t\tcontainer\n\t\t\t\t\t\t\t\tspacing={2}\n\t\t\t\t\t\t\t\titem\n\t\t\t\t\t\t\t\tjustify=\"flex-end\"\n\t\t\t\t\t\t\t\talignItems=\"center\"\n\t\t\t\t\t\t\t\tdirection=\"row\"\n\t\t\t\t\t\t\t\tkey={1}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\tform=\"maintenanceRequestSearchForm\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\tsize=\"medium\"\n\t\t\t\t\t\t\t\t\t\tstartIcon={<SearchIcon />}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tSEARCH\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tonClick={(event) => {\n\t\t\t\t\t\t\t\t\t\t\tresetSearchForm(event);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\ttype=\"reset\"\n\t\t\t\t\t\t\t\t\t\tform=\"propertySearchForm\"\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\tsize=\"medium\"\n\t\t\t\t\t\t\t\t\t\tstartIcon={<UndoIcon />}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tRESET\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</Box>\n\t\t\t\t</Grid>\n\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t<CommonTable\n\t\t\t\t\t\tselected={selected}\n\t\t\t\t\t\tsetSelected={setSelected}\n\t\t\t\t\t\trows={filteredMaintenanceRequestItems}\n\t\t\t\t\t\theadCells={maintenanceRequestsTableHeadCells}\n\t\t\t\t\t\thandleDelete={handleItemDelete}\n\t\t\t\t\t\tdeleteUrl={\"maintenance-requests\"}\n\t\t\t\t\t/>\n\t\t\t\t</Grid>\n\n\t\t\t</Grid>\n\t\t</Layout>\n\t);\n};\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\tcurrentUser: state.currentUser,\n\t\tmaintenanceRequests: state.maintenanceRequests\n\t\t\t.map(\n\t\t\t\t(maintenanceRequest) => {\n\t\t\t\t\tconst tenant = state.contacts\n\t\t\t\t\t\t.find((contact) => contact.id === maintenanceRequest.tenant_id) || {};\n\t\t\t\t\tconst unit = state.propertyUnits.find((unit) => unit.id === maintenanceRequest.property_unit) || {};\n\t\t\t\t\treturn Object.assign({}, maintenanceRequest, {\n\t\t\t\t\t\ttenant_name: `${tenant.first_name} ${tenant.last_name}`,\n\t\t\t\t\t\ttenant_id_number: tenant.id_number,\n\t\t\t\t\t\tunit_ref: unit.ref,\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t.sort((maintenanceRequest1, maintenanceRequest2) => parse(maintenanceRequest2.date_created, 'yyyy-MM-dd', new Date()) -\n\t\t\t\tparse(maintenanceRequest1.date_created, 'yyyy-MM-dd', new Date())),\n\t\tcontacts: state.contacts,\n\t};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\tfetchData: (collectionsUrls) => dispatch(itemsFetchData(collectionsUrls)),\n\t\thandleItemDelete: (itemId, url) => dispatch(handleDelete(itemId, url)),\n\t};\n};\n\nMaintenanceRequestsPage = connect(\n\tmapStateToProps, mapDispatchToProps\n)(MaintenanceRequestsPage);\n\nexport default withRouter(MaintenanceRequestsPage);\n"]},"metadata":{},"sourceType":"module"}