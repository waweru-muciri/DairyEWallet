{"ast":null,"code":"var _jsxFileName = \"/home/brianmuciri/Projects/farm-ledger-ld/src/Routes/ChargeOnDeposits.js\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { handleItemFormSubmit } from '../actions/actions';\nimport { withRouter } from \"react-router-dom\";\nimport Layout from \"../components/PrivateLayout\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Grid from \"@material-ui/core/Grid\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport SaveIcon from \"@material-ui/icons/Save\";\nimport CancelIcon from \"@material-ui/icons/Cancel\";\nimport CustomSnackbar from '../components/CustomSnackbar';\nimport { Formik } from \"formik\";\nimport { commonStyles } from \"../components/commonStyles\";\nimport * as Yup from \"yup\";\nimport { format, startOfToday } from \"date-fns\";\nimport CustomCircularProgress from \"../components/CustomCircularProgress\";\nimport PageHeading from \"../components/PageHeading\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport FormLabel from \"@material-ui/core/FormLabel\";\nimport Radio from \"@material-ui/core/Radio\";\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\nconst defaultDate = format(startOfToday(), 'yyyy-MM-dd');\nconst ChargeOnDepositSchema = Yup.object().shape({\n  tenant_id: Yup.string().trim().required('Tenant is required'),\n  deposit_to_charge: Yup.string().trim().required('Deposit to charge is required'),\n  memo: Yup.string().trim().max(50, \"Memo details should be less than 50 characters\").default(''),\n  charge_balance: Yup.number().typeError('Charge Balance must be a number').required(\"Charge balance is required\"),\n  payment_date: Yup.date().required('Payment Date is Required'),\n  payment_amount: Yup.number().typeError('Amount must be a number').positive(\"Amount must be a positive number\").test(\"payment_amount\", \"Payment amount cannot be greater than remaining balance\", function (value) {\n    return !(value > this.parent.charge_balance);\n  }).when('deposit_to_charge', {\n    is: 'rent_deposit',\n    then: Yup.number().max(Yup.ref('rent_deposit_amount'), 'Payment amount cannot be greater than rent deposit')\n  }).when('deposit_to_charge', {\n    is: 'water_deposit',\n    then: Yup.number().max(Yup.ref('water_deposit_amount'), 'Payment amount cannot be greater than water deposit')\n  }).when('deposit_to_charge', {\n    is: 'electricity_deposit',\n    then: Yup.number().max(Yup.ref('electricity_deposit_amount'), 'Payment amount cannot be greater than electricity deposit')\n  }).required(\"Payment amount is required\")\n});\n\nlet ChargeOnDeposits = ({\n  history,\n  chargeDetails,\n  tenantLease,\n  handleItemSubmit\n}) => {\n  const classes = commonStyles();\n  const paymentValues = {\n    charge_id: chargeDetails.id,\n    tenant_name: chargeDetails.tenant_name,\n    unit_id: chargeDetails.unit_id,\n    charge_amount: chargeDetails.charge_amount || 0,\n    charge_balance: chargeDetails.balance || 0,\n    charge_label: chargeDetails.charge_label || 0,\n    charge_type: chargeDetails.charge_type || 0,\n    payment_amount: \"\",\n    memo: \"\",\n    payment_date: defaultDate,\n    tenant_id: chargeDetails.tenant_id,\n    property_id: chargeDetails.property_id,\n    deposit_to_charge: '',\n    rent_deposit_amount: tenantLease.security_deposit,\n    water_deposit_amount: tenantLease.water_deposit,\n    electricity_deposit_amount: tenantLease.electricity_deposit\n  };\n  const pageTitle = `Charge on Deposit for - ${paymentValues.tenant_name}`;\n  return /*#__PURE__*/React.createElement(Layout, {\n    pageTitle: \"Payment Details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    justify: \"center\",\n    direction: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    key: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(PageHeading, {\n    text: pageTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 6\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    direction: \"column\",\n    justify: \"center\",\n    item: true,\n    key: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Formik, {\n    initialValues: paymentValues,\n    enableReinitialize: true,\n    validationSchema: ChargeOnDepositSchema,\n    onSubmit: async (values, {\n      resetForm,\n      setStatus\n    }) => {\n      try {\n        //reduce the selected deposit by the payment amount \n        const leaseToEdit = {\n          id: tenantLease.id\n        };\n        let depositAfterPayment;\n\n        switch (values.deposit_to_charge) {\n          case 'rent_deposit':\n            depositAfterPayment = parseFloat(tenantLease.security_deposit) - parseFloat(values.payment_amount);\n            leaseToEdit.security_deposit = depositAfterPayment;\n            break;\n\n          case 'water_deposit':\n            depositAfterPayment = parseFloat(tenantLease.water_deposit) - parseFloat(values.payment_amount);\n            leaseToEdit.water_deposit = depositAfterPayment;\n            break;\n\n          case 'electricity_deposit':\n            depositAfterPayment = parseFloat(tenantLease.electricity_deposit) - parseFloat(values.payment_amount);\n            leaseToEdit.electricity_deposit = depositAfterPayment;\n            break;\n\n          default:\n            break;\n        }\n\n        await handleItemSubmit(leaseToEdit, 'leases'); //save the payment after reducing the deposit amount in the lease\n\n        const chargePayment = {\n          charge_id: values.charge_id,\n          payment_amount: values.payment_amount,\n          memo: values.memo,\n          payment_date: values.payment_date,\n          tenant_id: values.tenant_id,\n          unit_id: values.unit_id,\n          property_id: values.property_id,\n          payment_label: values.charge_label,\n          payment_type: values.charge_type\n        };\n        await handleItemSubmit(chargePayment, 'charge-payments'); //show that payment has been made\n\n        await handleItemSubmit({\n          id: values.charge_id,\n          payed: true\n        }, 'transactions-charges');\n        setStatus({\n          sent: true,\n          msg: \"Details saved successfully.\"\n        });\n        history.goBack();\n      } catch (error) {\n        setStatus({\n          sent: false,\n          msg: `Error! ${error}.`\n        });\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 6\n    }\n  }, ({\n    values,\n    status,\n    handleSubmit,\n    touched,\n    errors,\n    handleChange,\n    handleBlur,\n    isSubmitting\n  }) => /*#__PURE__*/React.createElement(\"form\", {\n    className: classes.form,\n    method: \"post\",\n    id: \"chargeOnDepositForm\",\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    direction: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 9\n    }\n  }, status && status.msg && /*#__PURE__*/React.createElement(CustomSnackbar, {\n    variant: status.sent ? \"success\" : \"error\",\n    message: status.msg,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 12\n    }\n  }), isSubmitting && /*#__PURE__*/React.createElement(CustomCircularProgress, {\n    open: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 28\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 11\n    }\n  }, \" Charge Details : \", values.charge_label)), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 11\n    }\n  }, \"Total Charge Amount : \", values.charge_amount)), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 11\n    }\n  }, \"Charge Balance: \", values.charge_balance)), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(FormControl, {\n    component: \"fieldset\",\n    color: \"primary\",\n    error: errors.deposit_to_charge && touched.deposit_to_charge,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FormLabel, {\n    component: \"legend\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 12\n    }\n  }, \"Deposit To Charge\"), /*#__PURE__*/React.createElement(RadioGroup, {\n    \"aria-label\": \"deposit to charge\",\n    name: \"deposit_to_charge\",\n    value: values.deposit_to_charge,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 12\n    }\n  }, values.rent_deposit_amount ? /*#__PURE__*/React.createElement(FormControlLabel, {\n    value: \"rent_deposit\",\n    control: /*#__PURE__*/React.createElement(Radio, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 91\n      }\n    }),\n    label: `Rent Deposit - ${values.rent_deposit_amount}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 43\n    }\n  }) : null, values.water_deposit_amount ? /*#__PURE__*/React.createElement(FormControlLabel, {\n    value: \"water_deposit\",\n    control: /*#__PURE__*/React.createElement(Radio, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 93\n      }\n    }),\n    label: `Water Deposit - ${values.water_deposit_amount}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 44\n    }\n  }) : null, values.electricity_deposit_amount ? /*#__PURE__*/React.createElement(FormControlLabel, {\n    value: \"electricity_deposit\",\n    control: /*#__PURE__*/React.createElement(Radio, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 105\n      }\n    }),\n    label: `Electricity Deposit - ${values.electricity_deposit_amount}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 50\n    }\n  }) : null), /*#__PURE__*/React.createElement(FormHelperText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 12\n    }\n  }, \"Select a deposit to charge\"))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    variant: \"outlined\",\n    id: \"payment_date\",\n    type: \"date\",\n    name: \"payment_date\",\n    label: \"Payment Date\",\n    value: values.payment_date,\n    onChange: handleChange,\n    onBlur: handleBlur,\n    InputLabelProps: {\n      shrink: true\n    },\n    error: errors.payment_date && touched.payment_date,\n    helperText: touched.payment_date && errors.payment_date,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    type: \"text\",\n    variant: \"outlined\",\n    name: \"payment_amount\",\n    id: \"payment_amount\",\n    label: \"Payment Amount\",\n    value: values.payment_amount,\n    onChange: handleChange,\n    onBlur: handleBlur,\n    error: errors.payment_amount && touched.payment_amount,\n    helperText: touched.payment_amount && errors.payment_amount,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    type: \"text\",\n    multiline: true,\n    rows: 2,\n    variant: \"outlined\",\n    name: \"memo\",\n    id: \"memo\",\n    label: \"Payment Details/Memo\",\n    value: values.memo,\n    onChange: handleChange,\n    onBlur: handleBlur,\n    error: errors.memo && touched.memo,\n    helperText: \"Include details for the payments here (max 50)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    container: true,\n    justify: \"flex-start\",\n    direction: \"row\",\n    className: classes.buttonBox,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"contained\",\n    size: \"medium\",\n    startIcon: /*#__PURE__*/React.createElement(CancelIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 24\n      }\n    }),\n    onClick: () => history.goBack(),\n    disableElevation: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 12\n    }\n  }, \"Cancel\")), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    color: \"primary\",\n    variant: \"contained\",\n    size: \"medium\",\n    startIcon: /*#__PURE__*/React.createElement(SaveIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 24\n      }\n    }),\n    form: \"chargeOnDepositForm\",\n    disabled: isSubmitting,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 12\n    }\n  }, \"Charge On Deposit\")))))))));\n};\n\nconst mapStateToProps = (state, ownProps) => {\n  const chargeDetails = state.rentalCharges.find(({\n    id\n  }) => id === ownProps.match.params.chargeId) || {};\n  const chargePayments = state.rentalPayments.filter(payment => payment.charge_id === chargeDetails.id);\n  chargeDetails.payed_status = chargePayments.length ? true : false;\n  const payed_amount = chargePayments.reduce((total, currentValue) => {\n    return total + parseFloat(currentValue.payment_amount) || 0;\n  }, 0);\n  chargeDetails.payed_amount = payed_amount;\n  chargeDetails.balance = parseFloat(chargeDetails.charge_amount) - payed_amount;\n  const tenant = state.contacts.find(contact => contact.id === chargeDetails.tenant_id) || {};\n  chargeDetails.tenant_name = `${tenant.first_name} ${tenant.last_name}`;\n  const tenantLease = state.leases.filter(({\n    terminated\n  }) => terminated !== true).find(({\n    unit_id\n  }) => unit_id === chargeDetails.unit_id) || {};\n  return {\n    chargeDetails: chargeDetails,\n    tenantLease: tenantLease\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    handleItemSubmit: (item, url) => dispatch(handleItemFormSubmit(item, url))\n  };\n};\n\nChargeOnDeposits = connect(mapStateToProps, mapDispatchToProps)(ChargeOnDeposits);\nexport default withRouter(ChargeOnDeposits);","map":{"version":3,"sources":["/home/brianmuciri/Projects/farm-ledger-ld/src/Routes/ChargeOnDeposits.js"],"names":["React","connect","handleItemFormSubmit","withRouter","Layout","Typography","Grid","TextField","Button","SaveIcon","CancelIcon","CustomSnackbar","Formik","commonStyles","Yup","format","startOfToday","CustomCircularProgress","PageHeading","FormControl","FormHelperText","FormControlLabel","FormLabel","Radio","RadioGroup","defaultDate","ChargeOnDepositSchema","object","shape","tenant_id","string","trim","required","deposit_to_charge","memo","max","default","charge_balance","number","typeError","payment_date","date","payment_amount","positive","test","value","parent","when","is","then","ref","ChargeOnDeposits","history","chargeDetails","tenantLease","handleItemSubmit","classes","paymentValues","charge_id","id","tenant_name","unit_id","charge_amount","balance","charge_label","charge_type","property_id","rent_deposit_amount","security_deposit","water_deposit_amount","water_deposit","electricity_deposit_amount","electricity_deposit","pageTitle","values","resetForm","setStatus","leaseToEdit","depositAfterPayment","parseFloat","chargePayment","payment_label","payment_type","payed","sent","msg","goBack","error","status","handleSubmit","touched","errors","handleChange","handleBlur","isSubmitting","form","shrink","buttonBox","mapStateToProps","state","ownProps","rentalCharges","find","match","params","chargeId","chargePayments","rentalPayments","filter","payment","payed_status","length","payed_amount","reduce","total","currentValue","tenant","contacts","contact","first_name","last_name","leases","terminated","mapDispatchToProps","dispatch","item","url"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { handleItemFormSubmit } from '../actions/actions'\nimport { withRouter } from \"react-router-dom\";\nimport Layout from \"../components/PrivateLayout\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Grid from \"@material-ui/core/Grid\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport SaveIcon from \"@material-ui/icons/Save\";\nimport CancelIcon from \"@material-ui/icons/Cancel\";\nimport CustomSnackbar from '../components/CustomSnackbar'\nimport { Formik } from \"formik\";\nimport { commonStyles } from \"../components/commonStyles\";\nimport * as Yup from \"yup\";\nimport { format, startOfToday } from \"date-fns\";\nimport CustomCircularProgress from \"../components/CustomCircularProgress\";\nimport PageHeading from \"../components/PageHeading\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport FormLabel from \"@material-ui/core/FormLabel\";\nimport Radio from \"@material-ui/core/Radio\";\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\n\n\nconst defaultDate = format(startOfToday(), 'yyyy-MM-dd')\n\n\nconst ChargeOnDepositSchema = Yup.object().shape({\n\ttenant_id: Yup.string().trim().required('Tenant is required'),\n\tdeposit_to_charge: Yup.string().trim().required('Deposit to charge is required'),\n\tmemo: Yup.string().trim().max(50, \"Memo details should be less than 50 characters\").default(''),\n\tcharge_balance: Yup.number().typeError('Charge Balance must be a number').required(\"Charge balance is required\"),\n\tpayment_date: Yup.date().required('Payment Date is Required'),\n\tpayment_amount: Yup.number().typeError('Amount must be a number')\n\t\t.positive(\"Amount must be a positive number\")\n\t\t.test(\"payment_amount\", \"Payment amount cannot be greater than remaining balance\", function (value) {\n\t\t\treturn !(value > this.parent.charge_balance);\n\t\t})\n\t\t.when('deposit_to_charge',\n\t\t\t{\n\t\t\t\tis: 'rent_deposit', then: Yup.number()\n\t\t\t\t\t.max(Yup.ref('rent_deposit_amount'), 'Payment amount cannot be greater than rent deposit')\n\t\t\t})\n\t\t.when('deposit_to_charge',\n\t\t\t{\n\t\t\t\tis: 'water_deposit', then: Yup.number()\n\t\t\t\t\t.max(Yup.ref('water_deposit_amount'),\n\t\t\t\t\t\t'Payment amount cannot be greater than water deposit')\n\t\t\t})\n\t\t.when('deposit_to_charge',\n\t\t\t{\n\t\t\t\tis: 'electricity_deposit', then: Yup.number()\n\t\t\t\t\t.max(Yup.ref('electricity_deposit_amount'), 'Payment amount cannot be greater than electricity deposit')\n\t\t\t})\n\t\t.required(\"Payment amount is required\"),\n});\nlet ChargeOnDeposits = ({ history, chargeDetails, tenantLease, handleItemSubmit }) => {\n\tconst classes = commonStyles();\n\n\tconst paymentValues = {\n\t\tcharge_id: chargeDetails.id,\n\t\ttenant_name: chargeDetails.tenant_name,\n\t\tunit_id: chargeDetails.unit_id,\n\t\tcharge_amount: chargeDetails.charge_amount || 0,\n\t\tcharge_balance: chargeDetails.balance || 0,\n\t\tcharge_label: chargeDetails.charge_label || 0,\n\t\tcharge_type: chargeDetails.charge_type || 0,\n\t\tpayment_amount: \"\",\n\t\tmemo: \"\",\n\t\tpayment_date: defaultDate,\n\t\ttenant_id: chargeDetails.tenant_id,\n\t\tproperty_id: chargeDetails.property_id,\n\t\tdeposit_to_charge: '',\n\t\trent_deposit_amount: tenantLease.security_deposit,\n\t\twater_deposit_amount: tenantLease.water_deposit,\n\t\telectricity_deposit_amount: tenantLease.electricity_deposit,\n\t};\n\n\tconst pageTitle = `Charge on Deposit for - ${paymentValues.tenant_name}`\n\n\treturn (\n\t\t<Layout pageTitle=\"Payment Details\">\n\t\t\t<Grid container justify=\"center\" direction=\"column\">\n\t\t\t\t<Grid item key={2}>\n\t\t\t\t\t<PageHeading text={pageTitle} />\n\t\t\t\t</Grid>\n\t\t\t\t<Grid\n\t\t\t\t\tcontainer\n\t\t\t\t\tdirection=\"column\"\n\t\t\t\t\tjustify=\"center\"\n\t\t\t\t\titem\n\t\t\t\t\tkey={3}\n\t\t\t\t>\n\t\t\t\t\t<Formik\n\t\t\t\t\t\tinitialValues={paymentValues}\n\t\t\t\t\t\tenableReinitialize validationSchema={ChargeOnDepositSchema}\n\t\t\t\t\t\tonSubmit={async (values, { resetForm, setStatus }) => {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t//reduce the selected deposit by the payment amount \n\t\t\t\t\t\t\t\tconst leaseToEdit = {\n\t\t\t\t\t\t\t\t\tid: tenantLease.id,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlet depositAfterPayment;\n\t\t\t\t\t\t\t\tswitch (values.deposit_to_charge) {\n\t\t\t\t\t\t\t\t\tcase 'rent_deposit':\n\t\t\t\t\t\t\t\t\t\tdepositAfterPayment = parseFloat(tenantLease.security_deposit) - parseFloat(values.payment_amount)\n\t\t\t\t\t\t\t\t\t\tleaseToEdit.security_deposit = depositAfterPayment;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tcase 'water_deposit':\n\t\t\t\t\t\t\t\t\t\tdepositAfterPayment = parseFloat(tenantLease.water_deposit) - parseFloat(values.payment_amount)\n\t\t\t\t\t\t\t\t\t\tleaseToEdit.water_deposit = depositAfterPayment;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tcase 'electricity_deposit':\n\t\t\t\t\t\t\t\t\t\tdepositAfterPayment = parseFloat(tenantLease.electricity_deposit) - parseFloat(values.payment_amount)\n\t\t\t\t\t\t\t\t\t\tleaseToEdit.electricity_deposit = depositAfterPayment;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tawait handleItemSubmit(leaseToEdit, 'leases')\n\t\t\t\t\t\t\t\t//save the payment after reducing the deposit amount in the lease\n\t\t\t\t\t\t\t\tconst chargePayment = {\n\t\t\t\t\t\t\t\t\tcharge_id: values.charge_id,\n\t\t\t\t\t\t\t\t\tpayment_amount: values.payment_amount,\n\t\t\t\t\t\t\t\t\tmemo: values.memo,\n\t\t\t\t\t\t\t\t\tpayment_date: values.payment_date,\n\t\t\t\t\t\t\t\t\ttenant_id: values.tenant_id,\n\t\t\t\t\t\t\t\t\tunit_id: values.unit_id,\n\t\t\t\t\t\t\t\t\tproperty_id: values.property_id,\n\t\t\t\t\t\t\t\t\tpayment_label: values.charge_label,\n\t\t\t\t\t\t\t\t\tpayment_type: values.charge_type,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tawait handleItemSubmit(chargePayment, 'charge-payments')\n\t\t\t\t\t\t\t\t//show that payment has been made\n\t\t\t\t\t\t\t\tawait handleItemSubmit({ id: values.charge_id, payed: true }, 'transactions-charges')\n\t\t\t\t\t\t\t\tsetStatus({ sent: true, msg: \"Details saved successfully.\" })\n\t\t\t\t\t\t\t\thistory.goBack();\n\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\tsetStatus({ sent: false, msg: `Error! ${error}.` })\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{({\n\t\t\t\t\t\t\tvalues,\n\t\t\t\t\t\t\tstatus,\n\t\t\t\t\t\t\thandleSubmit,\n\t\t\t\t\t\t\ttouched,\n\t\t\t\t\t\t\terrors,\n\t\t\t\t\t\t\thandleChange,\n\t\t\t\t\t\t\thandleBlur,\n\t\t\t\t\t\t\tisSubmitting,\n\t\t\t\t\t\t}) => (\n\t\t\t\t\t\t\t<form\n\t\t\t\t\t\t\t\tclassName={classes.form}\n\t\t\t\t\t\t\t\tmethod=\"post\"\n\t\t\t\t\t\t\t\tid=\"chargeOnDepositForm\"\n\t\t\t\t\t\t\t\tonSubmit={handleSubmit}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Grid container spacing={2} direction=\"column\">\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tstatus && status.msg && (\n\t\t\t\t\t\t\t\t\t\t\t<CustomSnackbar\n\t\t\t\t\t\t\t\t\t\t\t\tvariant={status.sent ? \"success\" : \"error\"}\n\t\t\t\t\t\t\t\t\t\t\t\tmessage={status.msg}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tisSubmitting && (<CustomCircularProgress open={true} />)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t\t<Typography variant=\"subtitle1\"> Charge Details : {values.charge_label}</Typography>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t\t<Typography variant=\"subtitle1\">Total Charge Amount : {values.charge_amount}</Typography>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t\t<Typography variant=\"subtitle1\">Charge Balance: {values.charge_balance}</Typography>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t\t<FormControl component=\"fieldset\" color=\"primary\" error={errors.deposit_to_charge && touched.deposit_to_charge}>\n\t\t\t\t\t\t\t\t\t\t\t<FormLabel component=\"legend\">Deposit To Charge</FormLabel>\n\t\t\t\t\t\t\t\t\t\t\t<RadioGroup aria-label=\"deposit to charge\" name=\"deposit_to_charge\" value={values.deposit_to_charge} onChange={handleChange}>\n\t\t\t\t\t\t\t\t\t\t\t\t{values.rent_deposit_amount ? <FormControlLabel value=\"rent_deposit\" control={<Radio />} label={`Rent Deposit - ${values.rent_deposit_amount}`} /> : null}\n\t\t\t\t\t\t\t\t\t\t\t\t{values.water_deposit_amount ? <FormControlLabel value=\"water_deposit\" control={<Radio />} label={`Water Deposit - ${values.water_deposit_amount}`} /> : null}\n\t\t\t\t\t\t\t\t\t\t\t\t{values.electricity_deposit_amount ? <FormControlLabel value=\"electricity_deposit\" control={<Radio />} label={`Electricity Deposit - ${values.electricity_deposit_amount}`} /> : null}\n\t\t\t\t\t\t\t\t\t\t\t</RadioGroup>\n\t\t\t\t\t\t\t\t\t\t\t<FormHelperText>Select a deposit to charge</FormHelperText>\n\t\t\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t\tid=\"payment_date\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"date\"\n\t\t\t\t\t\t\t\t\t\t\tname=\"payment_date\"\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Payment Date\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={values.payment_date}\n\t\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\t\t\tonBlur={handleBlur}\n\t\t\t\t\t\t\t\t\t\t\tInputLabelProps={{ shrink: true }}\n\t\t\t\t\t\t\t\t\t\t\terror={errors.payment_date && touched.payment_date}\n\t\t\t\t\t\t\t\t\t\t\thelperText={touched.payment_date && errors.payment_date}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t\tname=\"payment_amount\"\n\t\t\t\t\t\t\t\t\t\t\tid=\"payment_amount\"\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Payment Amount\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={values.payment_amount}\n\t\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\t\t\tonBlur={handleBlur}\n\t\t\t\t\t\t\t\t\t\t\terror={errors.payment_amount && touched.payment_amount}\n\t\t\t\t\t\t\t\t\t\t\thelperText={touched.payment_amount && errors.payment_amount}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tmultiline\n\t\t\t\t\t\t\t\t\t\t\trows={2}\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t\tname=\"memo\"\n\t\t\t\t\t\t\t\t\t\t\tid=\"memo\"\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Payment Details/Memo\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={values.memo}\n\t\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\t\t\tonBlur={handleBlur}\n\t\t\t\t\t\t\t\t\t\t\terror={errors.memo && touched.memo}\n\t\t\t\t\t\t\t\t\t\t\thelperText={\"Include details for the payments here (max 50)\"}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t<Grid\n\t\t\t\t\t\t\t\t\t\titem\n\t\t\t\t\t\t\t\t\t\tcontainer\n\t\t\t\t\t\t\t\t\t\tjustify=\"flex-start\"\n\t\t\t\t\t\t\t\t\t\tdirection=\"row\"\n\t\t\t\t\t\t\t\t\t\tclassName={classes.buttonBox}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\t\t\tsize=\"medium\"\n\t\t\t\t\t\t\t\t\t\t\t\tstartIcon={<CancelIcon />}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => history.goBack()}\n\t\t\t\t\t\t\t\t\t\t\t\tdisableElevation\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\t\t\tsize=\"medium\"\n\t\t\t\t\t\t\t\t\t\t\t\tstartIcon={<SaveIcon />}\n\t\t\t\t\t\t\t\t\t\t\t\tform=\"chargeOnDepositForm\"\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tCharge On Deposit\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t</Formik >\n\t\t\t\t</Grid>\n\t\t\t</Grid>\n\t\t</Layout>\n\t);\n};\n\nconst mapStateToProps = (state, ownProps) => {\n\tconst chargeDetails = state.rentalCharges.find(({ id }) => id === ownProps.match.params.chargeId) || {};\n\tconst chargePayments = state.rentalPayments.filter((payment) => payment.charge_id === chargeDetails.id)\n\tchargeDetails.payed_status = chargePayments.length ? true : false;\n\tconst payed_amount = chargePayments.reduce((total, currentValue) => {\n\t\treturn total + parseFloat(currentValue.payment_amount) || 0\n\t}, 0)\n\tchargeDetails.payed_amount = payed_amount\n\tchargeDetails.balance = parseFloat(chargeDetails.charge_amount) - payed_amount\n\tconst tenant = state.contacts.find((contact) => contact.id === chargeDetails.tenant_id) || {};\n\tchargeDetails.tenant_name = `${tenant.first_name} ${tenant.last_name}`\n\tconst tenantLease = state.leases.filter(({ terminated }) => terminated !== true)\n\t\t.find(({ unit_id }) => unit_id === chargeDetails.unit_id) || {}\n\treturn {\n\t\tchargeDetails: chargeDetails,\n\t\ttenantLease: tenantLease,\n\t};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\thandleItemSubmit: (item, url) => dispatch(handleItemFormSubmit(item, url)),\n\t}\n};\n\nChargeOnDeposits = connect(mapStateToProps, mapDispatchToProps)(ChargeOnDeposits);\n\nexport default withRouter(ChargeOnDeposits);\n"]},"metadata":{},"sourceType":"module"}