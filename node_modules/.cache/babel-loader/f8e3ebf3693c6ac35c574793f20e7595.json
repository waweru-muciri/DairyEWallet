{"ast":null,"code":"var _jsxFileName = \"/home/brianmuciri/Projects/farm-ledger-ld/src/components/payments/PaymentInputForm.js\";\nimport React from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Grid from \"@material-ui/core/Grid\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport SaveIcon from \"@material-ui/icons/Save\";\nimport CancelIcon from \"@material-ui/icons/Cancel\";\nimport CustomSnackbar from '../CustomSnackbar';\nimport { Formik } from \"formik\";\nimport { commonStyles } from \"../commonStyles\";\nimport * as Yup from \"yup\";\nimport { format, startOfToday } from \"date-fns\";\nimport CustomCircularProgress from \"../CustomCircularProgress\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nconst defaultDate = format(startOfToday(), 'yyyy-MM-dd');\nconst PaymentSchema = Yup.object().shape({\n  tenant_id: Yup.string().trim().required('Tenant is required'),\n  memo: Yup.string().trim().max(50, \"Memo details should be less than 50 characters\").default(''),\n  reference_id: Yup.string().trim().max(20, \"Reference Id should be <= 20 characters\").default(''),\n  charge_balance: Yup.number().typeError('Charge Balance must be a number').required(\"Charge balance is required\"),\n  payment_amount: Yup.number().typeError('Amount must be a number').positive(\"Amount must be a positive number\").max(Yup.ref('charge_balance'), 'Payment amount cannot be greater than remaining balance').required(\"Payment amount is required\"),\n  payment_date: Yup.date().required('Payment Date is Required')\n});\nexport default function PaymentInputForm({\n  open,\n  handleClose,\n  chargeToAddPaymentTo,\n  handleItemSubmit\n}) {\n  const classes = commonStyles();\n  const paymentValues = {\n    charge_id: chargeToAddPaymentTo.id,\n    unit_ref: chargeToAddPaymentTo.unit_ref,\n    tenant_name: chargeToAddPaymentTo.tenant_name,\n    unit_id: chargeToAddPaymentTo.unit_id,\n    charge_amount: chargeToAddPaymentTo.charge_amount || 0,\n    charge_balance: chargeToAddPaymentTo.balance || 0,\n    charge_label: chargeToAddPaymentTo.charge_label || 0,\n    charge_type: chargeToAddPaymentTo.charge_type || 0,\n    payment_amount: \"\",\n    memo: \"\",\n    payment_date: defaultDate,\n    tenant_id: chargeToAddPaymentTo.tenant_id,\n    reference_id: chargeToAddPaymentTo.reference_id || '',\n    property_id: chargeToAddPaymentTo.property_id\n  };\n  return /*#__PURE__*/React.createElement(Dialog, {\n    fullWidth: true,\n    maxWidth: \"sm\",\n    open: open,\n    onClose: handleClose,\n    \"aria-labelledby\": \"form-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(DialogTitle, {\n    id: \"alert-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 4\n    }\n  }, \"Receive Payment for - \", paymentValues.unit_ref, \" \\u2022 \", paymentValues.tenant_name), /*#__PURE__*/React.createElement(DialogContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(Formik, {\n    initialValues: paymentValues,\n    enableReinitialize: true,\n    validationSchema: PaymentSchema,\n    onSubmit: async (values, {\n      resetForm,\n      setStatus\n    }) => {\n      try {\n        const chargePayment = {\n          charge_id: values.charge_id,\n          payment_amount: values.payment_amount,\n          memo: values.memo,\n          payment_date: values.payment_date,\n          tenant_id: values.tenant_id,\n          reference_id: values.reference_id,\n          unit_id: values.unit_id,\n          property_id: values.property_id,\n          payment_label: values.charge_label,\n          payment_type: values.charge_type\n        };\n        await handleItemSubmit(chargePayment, 'charge-payments');\n        await handleItemSubmit({\n          id: values.charge_id,\n          payed: true\n        }, 'transactions-charges');\n        setStatus({\n          sent: true,\n          msg: \"Payment saved successfully.\"\n        });\n        handleClose();\n      } catch (error) {\n        setStatus({\n          sent: false,\n          msg: `Error! ${error}.`\n        });\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  }, ({\n    values,\n    status,\n    handleSubmit,\n    touched,\n    errors,\n    handleChange,\n    handleBlur,\n    isSubmitting\n  }) => /*#__PURE__*/React.createElement(\"form\", {\n    className: classes.form,\n    method: \"post\",\n    id: \"paymentInputForm\",\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    direction: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 8\n    }\n  }, status && status.msg && /*#__PURE__*/React.createElement(CustomSnackbar, {\n    variant: status.sent ? \"success\" : \"error\",\n    message: status.msg,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 11\n    }\n  }), isSubmitting && /*#__PURE__*/React.createElement(CustomCircularProgress, {\n    open: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 27\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 10\n    }\n  }, \" Charge Details : \", values.charge_label)), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 10\n    }\n  }, \"Total Charge Amount : \", values.charge_amount)), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 10\n    }\n  }, \"Charge Balance: \", values.charge_balance)), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    variant: \"outlined\",\n    id: \"payment_date\",\n    type: \"date\",\n    name: \"payment_date\",\n    label: \"Payment Date\",\n    value: values.payment_date,\n    onChange: handleChange,\n    onBlur: handleBlur,\n    InputLabelProps: {\n      shrink: true\n    },\n    error: errors.payment_date && touched.payment_date,\n    helperText: touched.payment_date && errors.payment_date,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 10\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    type: \"text\",\n    variant: \"outlined\",\n    name: \"payment_amount\",\n    id: \"payment_amount\",\n    label: \"Payment Amount\",\n    value: values.payment_amount,\n    onChange: handleChange,\n    onBlur: handleBlur,\n    error: errors.payment_amount && touched.payment_amount,\n    helperText: touched.payment_amount && errors.payment_amount,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 10\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    type: \"text\",\n    variant: \"outlined\",\n    name: \"reference_id\",\n    id: \"reference_id\",\n    label: \"Reference Id\",\n    value: values.reference_id,\n    onChange: handleChange,\n    onBlur: handleBlur,\n    error: errors.reference_id && touched.reference_id,\n    helperText: touched.reference_id && errors.reference_id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 10\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    type: \"text\",\n    multiline: true,\n    rows: 2,\n    variant: \"outlined\",\n    name: \"memo\",\n    id: \"memo\",\n    label: \"Payment Details/Memo\",\n    value: values.memo,\n    onChange: handleChange,\n    onBlur: handleBlur,\n    error: errors.memo && touched.memo,\n    helperText: \"Include details for the payments here (max 50)\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 10\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    container: true,\n    justify: \"flex-start\",\n    direction: \"row\",\n    className: classes.buttonBox,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"contained\",\n    size: \"medium\",\n    startIcon: /*#__PURE__*/React.createElement(CancelIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 23\n      }\n    }),\n    onClick: () => {\n      handleClose();\n    },\n    disableElevation: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 11\n    }\n  }, \"Cancel\")), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    color: \"primary\",\n    variant: \"contained\",\n    size: \"medium\",\n    startIcon: /*#__PURE__*/React.createElement(SaveIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 23\n      }\n    }),\n    form: \"paymentInputForm\",\n    disabled: isSubmitting,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 11\n    }\n  }, \"Save Payment\"))))))));\n}\n;","map":{"version":3,"sources":["/home/brianmuciri/Projects/farm-ledger-ld/src/components/payments/PaymentInputForm.js"],"names":["React","Typography","Grid","TextField","Button","SaveIcon","CancelIcon","CustomSnackbar","Formik","commonStyles","Yup","format","startOfToday","CustomCircularProgress","Dialog","DialogTitle","DialogContent","defaultDate","PaymentSchema","object","shape","tenant_id","string","trim","required","memo","max","default","reference_id","charge_balance","number","typeError","payment_amount","positive","ref","payment_date","date","PaymentInputForm","open","handleClose","chargeToAddPaymentTo","handleItemSubmit","classes","paymentValues","charge_id","id","unit_ref","tenant_name","unit_id","charge_amount","balance","charge_label","charge_type","property_id","values","resetForm","setStatus","chargePayment","payment_label","payment_type","payed","sent","msg","error","status","handleSubmit","touched","errors","handleChange","handleBlur","isSubmitting","form","shrink","buttonBox"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Grid from \"@material-ui/core/Grid\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport SaveIcon from \"@material-ui/icons/Save\";\nimport CancelIcon from \"@material-ui/icons/Cancel\";\nimport CustomSnackbar from '../CustomSnackbar'\nimport { Formik } from \"formik\";\nimport { commonStyles } from \"../commonStyles\";\nimport * as Yup from \"yup\";\nimport { format, startOfToday } from \"date-fns\";\nimport CustomCircularProgress from \"../CustomCircularProgress\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\n\n\nconst defaultDate = format(startOfToday(), 'yyyy-MM-dd')\n\nconst PaymentSchema = Yup.object().shape({\n\ttenant_id: Yup.string().trim().required('Tenant is required'),\n\tmemo: Yup.string().trim().max(50, \"Memo details should be less than 50 characters\").default(''),\n\treference_id: Yup.string().trim().max(20, \"Reference Id should be <= 20 characters\").default(''),\n\tcharge_balance: Yup.number().typeError('Charge Balance must be a number').required(\"Charge balance is required\"),\n\tpayment_amount: Yup.number().typeError('Amount must be a number')\n\t\t.positive(\"Amount must be a positive number\")\n\t\t.max(Yup.ref('charge_balance'), 'Payment amount cannot be greater than remaining balance')\n\t\t.required(\"Payment amount is required\"),\n\tpayment_date: Yup.date().required('Payment Date is Required'),\n});\n\n\nexport default function PaymentInputForm({ open, handleClose, chargeToAddPaymentTo, handleItemSubmit }) {\n\tconst classes = commonStyles();\n\tconst paymentValues = {\n\t\tcharge_id: chargeToAddPaymentTo.id,\n\t\tunit_ref: chargeToAddPaymentTo.unit_ref,\n\t\ttenant_name: chargeToAddPaymentTo.tenant_name,\n\t\tunit_id: chargeToAddPaymentTo.unit_id,\n\t\tcharge_amount: chargeToAddPaymentTo.charge_amount || 0,\n\t\tcharge_balance: chargeToAddPaymentTo.balance || 0,\n\t\tcharge_label: chargeToAddPaymentTo.charge_label || 0,\n\t\tcharge_type: chargeToAddPaymentTo.charge_type || 0,\n\t\tpayment_amount: \"\",\n\t\tmemo: \"\",\n\t\tpayment_date: defaultDate,\n\t\ttenant_id: chargeToAddPaymentTo.tenant_id,\n\t\treference_id: chargeToAddPaymentTo.reference_id || '',\n\t\tproperty_id: chargeToAddPaymentTo.property_id,\n\t};\n\n\treturn (\n\t\t<Dialog\n\t\t\tfullWidth\n\t\t\tmaxWidth=\"sm\"\n\t\t\topen={open}\n\t\t\tonClose={handleClose}\n\t\t\taria-labelledby=\"form-dialog-title\"\n\t\t>\n\t\t\t<DialogTitle id=\"alert-dialog-title\">Receive Payment for - {paymentValues.unit_ref} • {paymentValues.tenant_name}</DialogTitle>\n\t\t\t<DialogContent>\n\t\t\t\t<Formik\n\t\t\t\t\tinitialValues={paymentValues}\n\t\t\t\t\tenableReinitialize validationSchema={PaymentSchema}\n\t\t\t\t\tonSubmit={async (values, { resetForm, setStatus }) => {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst chargePayment = {\n\t\t\t\t\t\t\t\tcharge_id: values.charge_id,\n\t\t\t\t\t\t\t\tpayment_amount: values.payment_amount,\n\t\t\t\t\t\t\t\tmemo: values.memo,\n\t\t\t\t\t\t\t\tpayment_date: values.payment_date,\n\t\t\t\t\t\t\t\ttenant_id: values.tenant_id,\n\t\t\t\t\t\t\t\treference_id: values.reference_id,\n\t\t\t\t\t\t\t\tunit_id: values.unit_id,\n\t\t\t\t\t\t\t\tproperty_id: values.property_id,\n\t\t\t\t\t\t\t\tpayment_label: values.charge_label,\n\t\t\t\t\t\t\t\tpayment_type: values.charge_type,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tawait handleItemSubmit(chargePayment, 'charge-payments')\n\t\t\t\t\t\t\tawait handleItemSubmit({ id: values.charge_id, payed: true }, 'transactions-charges')\n\t\t\t\t\t\t\tsetStatus({ sent: true, msg: \"Payment saved successfully.\" })\n\t\t\t\t\t\t\thandleClose();\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tsetStatus({ sent: false, msg: `Error! ${error}.` })\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{({\n\t\t\t\t\t\tvalues,\n\t\t\t\t\t\tstatus,\n\t\t\t\t\t\thandleSubmit,\n\t\t\t\t\t\ttouched,\n\t\t\t\t\t\terrors,\n\t\t\t\t\t\thandleChange,\n\t\t\t\t\t\thandleBlur,\n\t\t\t\t\t\tisSubmitting,\n\t\t\t\t\t}) => (\n\t\t\t\t\t\t<form\n\t\t\t\t\t\t\tclassName={classes.form}\n\t\t\t\t\t\t\tmethod=\"post\"\n\t\t\t\t\t\t\tid=\"paymentInputForm\"\n\t\t\t\t\t\t\tonSubmit={handleSubmit}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Grid container spacing={2} direction=\"column\">\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstatus && status.msg && (\n\t\t\t\t\t\t\t\t\t\t<CustomSnackbar\n\t\t\t\t\t\t\t\t\t\t\tvariant={status.sent ? \"success\" : \"error\"}\n\t\t\t\t\t\t\t\t\t\t\tmessage={status.msg}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tisSubmitting && (<CustomCircularProgress open={true} />)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t<Typography variant=\"subtitle1\"> Charge Details : {values.charge_label}</Typography>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t<Typography variant=\"subtitle1\">Total Charge Amount : {values.charge_amount}</Typography>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t<Typography variant=\"subtitle1\">Charge Balance: {values.charge_balance}</Typography>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tid=\"payment_date\"\n\t\t\t\t\t\t\t\t\t\ttype=\"date\"\n\t\t\t\t\t\t\t\t\t\tname=\"payment_date\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Payment Date\"\n\t\t\t\t\t\t\t\t\t\tvalue={values.payment_date}\n\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\t\tonBlur={handleBlur}\n\t\t\t\t\t\t\t\t\t\tInputLabelProps={{ shrink: true }}\n\t\t\t\t\t\t\t\t\t\terror={errors.payment_date && touched.payment_date}\n\t\t\t\t\t\t\t\t\t\thelperText={touched.payment_date && errors.payment_date}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tname=\"payment_amount\"\n\t\t\t\t\t\t\t\t\t\tid=\"payment_amount\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Payment Amount\"\n\t\t\t\t\t\t\t\t\t\tvalue={values.payment_amount}\n\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\t\tonBlur={handleBlur}\n\t\t\t\t\t\t\t\t\t\terror={errors.payment_amount && touched.payment_amount}\n\t\t\t\t\t\t\t\t\t\thelperText={touched.payment_amount && errors.payment_amount}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tname=\"reference_id\"\n\t\t\t\t\t\t\t\t\t\tid=\"reference_id\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Reference Id\"\n\t\t\t\t\t\t\t\t\t\tvalue={values.reference_id}\n\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\t\tonBlur={handleBlur}\n\t\t\t\t\t\t\t\t\t\terror={errors.reference_id && touched.reference_id}\n\t\t\t\t\t\t\t\t\t\thelperText={touched.reference_id && errors.reference_id}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tmultiline\n\t\t\t\t\t\t\t\t\t\trows={2}\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tname=\"memo\"\n\t\t\t\t\t\t\t\t\t\tid=\"memo\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Payment Details/Memo\"\n\t\t\t\t\t\t\t\t\t\tvalue={values.memo}\n\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\t\tonBlur={handleBlur}\n\t\t\t\t\t\t\t\t\t\terror={errors.memo && touched.memo}\n\t\t\t\t\t\t\t\t\t\thelperText={\"Include details for the payments here (max 50)\"}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t<Grid\n\t\t\t\t\t\t\t\t\titem\n\t\t\t\t\t\t\t\t\tcontainer\n\t\t\t\t\t\t\t\t\tjustify=\"flex-start\"\n\t\t\t\t\t\t\t\t\tdirection=\"row\"\n\t\t\t\t\t\t\t\t\tclassName={classes.buttonBox}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\t\tsize=\"medium\"\n\t\t\t\t\t\t\t\t\t\t\tstartIcon={<CancelIcon />}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => { handleClose() }}\n\t\t\t\t\t\t\t\t\t\t\tdisableElevation\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\t\tsize=\"medium\"\n\t\t\t\t\t\t\t\t\t\t\tstartIcon={<SaveIcon />}\n\t\t\t\t\t\t\t\t\t\t\tform=\"paymentInputForm\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tSave Payment\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t</Formik >\n\t\t\t</DialogContent>\n\t\t</Dialog >\n\t);\n};\n"]},"metadata":{},"sourceType":"module"}