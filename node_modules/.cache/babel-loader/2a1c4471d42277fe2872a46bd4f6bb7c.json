{"ast":null,"code":"var _jsxFileName = \"/home/brianmuciri/Projects/farm-ledger-ld/src/Routes/MainRoute.js\";\nimport React, { useEffect, Suspense, lazy } from \"react\";\nimport { connect } from \"react-redux\";\nimport { itemsFetchData, setCurrentUser, itemsHasErrored, getFirebaseUserDetails } from \"../actions/actions\";\nimport { BrowserRouter as Router, Route, Switch, useHistory, withRouter } from \"react-router-dom\";\nimport DashBoard from \"./DashBoard\";\nimport LoadingBackdrop from '../components/LoadingBackdrop';\nimport ErrorBoundary from '../components/ErrorBoundary';\nimport NotFound from \"./NotFound\";\nimport { auth } from '../firebase';\nconst PropertyUnitPage = lazy(() => import('./PropertyUnitPage'));\nconst TenantDetailsPage = lazy(() => import('./TenantDetailsPage'));\nconst PropertyPage = lazy(() => import('./PropertyPage'));\nconst PropertiesPage = lazy(() => import('./Properties'));\nconst ExpensesPage = lazy(() => import('./Expenses'));\nconst ExpensePage = lazy(() => import('./ExpensePage'));\nconst UsersPage = lazy(() => import('./Users'));\nconst LeasePage = lazy(() => import('./LeasePage'));\nconst LeasesPage = lazy(() => import('./Leases'));\nconst ContactsPage = lazy(() => import('./Contacts'));\nconst ContactPage = lazy(() => import('./ContactPage'));\nconst PaymentsPage = lazy(() => import('./Payments'));\nconst MaintenancesPage = lazy(() => import('./Maintenances'));\nconst PropertyDetailsPage = lazy(() => import('./PropertyDetails'));\nconst UserPage = lazy(() => import('./UserPage'));\nconst UserProfilePage = lazy(() => import('./UserProfilePage'));\nconst MaintenanceRequestPage = lazy(() => import('./MaintenanceRequestPage'));\nconst TenantsStatementsPage = lazy(() => import('./TenantsStatements'));\nconst AccountSettingsPage = lazy(() => import('./AccountSettings'));\nconst ProductPage = lazy(() => import('./ProductPage'));\nconst ProductsPage = lazy(() => import('./Products'));\n\nlet MainPage = ({\n  currentUser,\n  match,\n  fetchData,\n  setUser,\n  setError\n}) => {\n  const history = useHistory();\n  useEffect(() => {\n    if (!currentUser) {\n      auth.onAuthStateChanged(async function (user) {\n        if (user) {\n          //get details about user\n          try {\n            const userDetails = await getFirebaseUserDetails(user);\n            setUser(userDetails);\n          } catch (error) {\n            setUser(null);\n            history.push(\"/login\");\n          }\n        } else {\n          // User is signed out.\n          setUser(null);\n          history.push(\"/login\");\n        }\n      }, function (error) {\n        setUser(null);\n        setError(error.message);\n        history.push(\"/login\");\n        console.log('An error during onauthstatechanged =>', error);\n      });\n    } else {\n      fetchData([\"properties\", \"property_units\", \"transactions-charges\", \"contacts\", \"charge-payments\", \"leases\", \"credit-notes\", \"expenses\", \"unit-charges\", \"users\", \"management-fees\", \"account-billing\"]);\n    }\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 5\n    }\n  }, currentUser ? /*#__PURE__*/React.createElement(Router, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ErrorBoundary, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(LoadingBackdrop, {\n      open: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 33\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: `${match.path}`,\n    component: DashBoard,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: `${match.path}account-settings`,\n    component: AccountSettingsPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: `${match.path}maintenance-requests/new`,\n    component: MaintenanceRequestPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: `${match.path}maintenance-requests/:maintenanceRequestId/edit`,\n    component: MaintenanceRequestPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: `${match.path}maintenance-requests`,\n    component: MaintenancesPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: `${match.path}properties/new`,\n    component: PropertyPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: `${match.path}users/new`,\n    component: UserPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: `${match.path}users/:userId/edit`,\n    component: UserPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: `${match.path}users`,\n    component: UsersPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: `${match.path}leases/new`,\n    component: LeasePage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: `${match.path}properties/:propertyId/edit`,\n    component: PropertyPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: `${match.path}properties/:propertyId/details`,\n    component: PropertyDetailsPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: `${match.path}contacts/:contactId/details`,\n    component: TenantDetailsPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: `${match.path}users/:userId/details`,\n    component: UserProfilePage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: `${match.path}properties/:propertyId/details/:propertyUnitId/edit`,\n    component: PropertyUnitPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: `${match.path}properties/:propertyId/details/new`,\n    component: PropertyUnitPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: `${match.path}contacts`,\n    component: ContactsPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: `${match.path}leases/:leaseId/edit`,\n    component: LeasePage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: `${match.path}contacts/new`,\n    component: ContactPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: `${match.path}property_expenditure/new`,\n    component: ExpensePage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: `${match.path}property_expenditure`,\n    component: ExpensesPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: `${match.path}property_expenditure/:expenseId/edit`,\n    component: ExpensePage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: `${match.path}contacts/:contactId/edit`,\n    component: ContactPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: `${match.path}meter-reading/:meterReadingId/edit`,\n    component: ProductPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: `${match.path}properties`,\n    component: PropertiesPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: `${match.path}meter-reading`,\n    component: ProductsPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: `${match.path}meter-reading/new`,\n    component: ProductPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: `${match.path}reports/tenant-statements`,\n    component: TenantsStatementsPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: `${match.path}leases`,\n    component: LeasesPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: `${match.path}payments`,\n    component: PaymentsPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"*\",\n    component: NotFound,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 17\n    }\n  }))))) : null);\n};\n\nconst mapStateToProps = state => {\n  return {\n    currentUser: state.currentUser\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    fetchData: collectionsUrls => dispatch(itemsFetchData(collectionsUrls)),\n    setUser: user => dispatch(setCurrentUser(user)),\n    setError: error => dispatch(itemsHasErrored(error))\n  };\n};\n\nMainPage = connect(mapStateToProps, mapDispatchToProps)(MainPage);\nexport default withRouter(MainPage);","map":{"version":3,"sources":["/home/brianmuciri/Projects/farm-ledger-ld/src/Routes/MainRoute.js"],"names":["React","useEffect","Suspense","lazy","connect","itemsFetchData","setCurrentUser","itemsHasErrored","getFirebaseUserDetails","BrowserRouter","Router","Route","Switch","useHistory","withRouter","DashBoard","LoadingBackdrop","ErrorBoundary","NotFound","auth","PropertyUnitPage","TenantDetailsPage","PropertyPage","PropertiesPage","ExpensesPage","ExpensePage","UsersPage","LeasePage","LeasesPage","ContactsPage","ContactPage","PaymentsPage","MaintenancesPage","PropertyDetailsPage","UserPage","UserProfilePage","MaintenanceRequestPage","TenantsStatementsPage","AccountSettingsPage","ProductPage","ProductsPage","MainPage","currentUser","match","fetchData","setUser","setError","history","onAuthStateChanged","user","userDetails","error","push","message","console","log","path","mapStateToProps","state","mapDispatchToProps","dispatch","collectionsUrls"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,EAAqCC,IAArC,QAAiD,OAAjD;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SACEC,cADF,EAEEC,cAFF,EAGEC,eAHF,EAGmBC,sBAHnB,QAIO,oBAJP;AAKA,SACEC,aAAa,IAAIC,MADnB,EAEEC,KAFF,EAGEC,MAHF,EAIEC,UAJF,EAKEC,UALF,QAMO,kBANP;AAOA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,eAAP,MAA4B,+BAA5B;AACA,OAAOC,aAAP,MAA0B,6BAA1B;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,SAASC,IAAT,QAAqB,aAArB;AACA,MAAMC,gBAAgB,GAAGjB,IAAI,CAAC,MAAM,OAAO,oBAAP,CAAP,CAA7B;AACA,MAAMkB,iBAAiB,GAAGlB,IAAI,CAAC,MAAM,OAAO,qBAAP,CAAP,CAA9B;AACA,MAAMmB,YAAY,GAAGnB,IAAI,CAAC,MAAM,OAAO,gBAAP,CAAP,CAAzB;AACA,MAAMoB,cAAc,GAAGpB,IAAI,CAAC,MAAM,OAAO,cAAP,CAAP,CAA3B;AACA,MAAMqB,YAAY,GAAGrB,IAAI,CAAC,MAAM,OAAO,YAAP,CAAP,CAAzB;AACA,MAAMsB,WAAW,GAAGtB,IAAI,CAAC,MAAM,OAAO,eAAP,CAAP,CAAxB;AACA,MAAMuB,SAAS,GAAGvB,IAAI,CAAC,MAAM,OAAO,SAAP,CAAP,CAAtB;AACA,MAAMwB,SAAS,GAAGxB,IAAI,CAAC,MAAM,OAAO,aAAP,CAAP,CAAtB;AACA,MAAMyB,UAAU,GAAGzB,IAAI,CAAC,MAAM,OAAO,UAAP,CAAP,CAAvB;AACA,MAAM0B,YAAY,GAAG1B,IAAI,CAAC,MAAM,OAAO,YAAP,CAAP,CAAzB;AACA,MAAM2B,WAAW,GAAG3B,IAAI,CAAC,MAAM,OAAO,eAAP,CAAP,CAAxB;AACA,MAAM4B,YAAY,GAAG5B,IAAI,CAAC,MAAM,OAAO,YAAP,CAAP,CAAzB;AACA,MAAM6B,gBAAgB,GAAG7B,IAAI,CAAC,MAAM,OAAO,gBAAP,CAAP,CAA7B;AACA,MAAM8B,mBAAmB,GAAG9B,IAAI,CAAC,MAAM,OAAO,mBAAP,CAAP,CAAhC;AACA,MAAM+B,QAAQ,GAAG/B,IAAI,CAAC,MAAM,OAAO,YAAP,CAAP,CAArB;AACA,MAAMgC,eAAe,GAAGhC,IAAI,CAAC,MAAM,OAAO,mBAAP,CAAP,CAA5B;AACA,MAAMiC,sBAAsB,GAAGjC,IAAI,CAAC,MAAM,OAAO,0BAAP,CAAP,CAAnC;AACA,MAAMkC,qBAAqB,GAAGlC,IAAI,CAAC,MAAM,OAAO,qBAAP,CAAP,CAAlC;AACA,MAAMmC,mBAAmB,GAAGnC,IAAI,CAAC,MAAM,OAAO,mBAAP,CAAP,CAAhC;AACA,MAAMoC,WAAW,GAAGpC,IAAI,CAAC,MAAM,OAAO,eAAP,CAAP,CAAxB;AACA,MAAMqC,YAAY,GAAGrC,IAAI,CAAC,MAAM,OAAO,YAAP,CAAP,CAAzB;;AAGA,IAAIsC,QAAQ,GAAG,CAAC;AACdC,EAAAA,WADc;AAEdC,EAAAA,KAFc;AAGdC,EAAAA,SAHc;AAGHC,EAAAA,OAHG;AAGMC,EAAAA;AAHN,CAAD,KAIT;AACJ,QAAMC,OAAO,GAAGlC,UAAU,EAA1B;AAEAZ,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI,CAACyC,WAAL,EAAkB;AAChBvB,MAAAA,IAAI,CAAC6B,kBAAL,CACE,gBAAgBC,IAAhB,EAAsB;AACpB,YAAIA,IAAJ,EAAU;AACR;AACA,cAAI;AACF,kBAAMC,WAAW,GAAG,MAAM1C,sBAAsB,CAACyC,IAAD,CAAhD;AACAJ,YAAAA,OAAO,CAACK,WAAD,CAAP;AACD,WAHD,CAGE,OAAOC,KAAP,EAAc;AACdN,YAAAA,OAAO,CAAC,IAAD,CAAP;AACAE,YAAAA,OAAO,CAACK,IAAR,CAAa,QAAb;AACD;AACF,SATD,MASO;AACL;AACAP,UAAAA,OAAO,CAAC,IAAD,CAAP;AACAE,UAAAA,OAAO,CAACK,IAAR,CAAa,QAAb;AACD;AACF,OAhBH,EAiBE,UAAUD,KAAV,EAAiB;AACfN,QAAAA,OAAO,CAAC,IAAD,CAAP;AACAC,QAAAA,QAAQ,CAACK,KAAK,CAACE,OAAP,CAAR;AACAN,QAAAA,OAAO,CAACK,IAAR,CAAa,QAAb;AACAE,QAAAA,OAAO,CAACC,GAAR,CAAY,uCAAZ,EAAqDJ,KAArD;AACD,OAtBH;AAuBD,KAxBD,MAyBK;AACHP,MAAAA,SAAS,CAAC,CACR,YADQ,EAER,gBAFQ,EAGR,sBAHQ,EAIR,UAJQ,EAKR,iBALQ,EAMR,QANQ,EAOR,cAPQ,EAQR,UARQ,EASR,cATQ,EAUR,OAVQ,EAWR,iBAXQ,EAYR,iBAZQ,CAAD,CAAT;AAcD;AACF,GA1CQ,CAAT;AA4CA,sBACE,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGF,WAAW,gBACV,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AAAU,IAAA,QAAQ,eAAE,oBAAC,eAAD;AAAiB,MAAA,IAAI,EAAE,IAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAG,GAAEC,KAAK,CAACa,IAAK,EAAjC;AAAoC,IAAA,SAAS,EAAEzC,SAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAG,GAAE4B,KAAK,CAACa,IAAK,kBAAjC;AAAoD,IAAA,SAAS,EAAElB,mBAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,eAGE,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAG,GAAEK,KAAK,CAACa,IAAK,0BAAjC;AAA4D,IAAA,SAAS,EAAEpB,sBAAvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,eAIE,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAG,GAAEO,KAAK,CAACa,IAAK,iDAAjC;AAAmF,IAAA,SAAS,EAAEpB,sBAA9F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,eAKE,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAG,GAAEO,KAAK,CAACa,IAAK,sBAAjC;AAAwD,IAAA,SAAS,EAAExB,gBAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,eAME,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAG,GAAEW,KAAK,CAACa,IAAK,gBAAjC;AAAkD,IAAA,SAAS,EAAElC,YAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANF,eAOE,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAG,GAAEqB,KAAK,CAACa,IAAK,WAAjC;AAA6C,IAAA,SAAS,EAAEtB,QAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPF,eAQE,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAG,GAAES,KAAK,CAACa,IAAK,oBAAjC;AAAsD,IAAA,SAAS,EAAEtB,QAAjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARF,eASE,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAG,GAAES,KAAK,CAACa,IAAK,OAAjC;AAAyC,IAAA,SAAS,EAAE9B,SAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATF,eAUE,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAG,GAAEiB,KAAK,CAACa,IAAK,YAAjC;AAA8C,IAAA,SAAS,EAAE7B,SAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAVF,eAWE,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAG,GAAEgB,KAAK,CAACa,IAAK,6BAAjC;AAA+D,IAAA,SAAS,EAAElC,YAA1E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAXF,eAYE,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAG,GAAEqB,KAAK,CAACa,IAAK,gCAAjC;AAAkE,IAAA,SAAS,EAAEvB,mBAA7E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAZF,eAaE,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAG,GAAEU,KAAK,CAACa,IAAK,6BAAjC;AAA+D,IAAA,SAAS,EAAEnC,iBAA1E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAbF,eAcE,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAG,GAAEsB,KAAK,CAACa,IAAK,uBAAjC;AAAyD,IAAA,SAAS,EAAErB,eAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAdF,eAeE,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAG,GAAEQ,KAAK,CAACa,IAAK,qDAAjC;AAAuF,IAAA,SAAS,EAAEpC,gBAAlG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAfF,eAgBE,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAG,GAAEuB,KAAK,CAACa,IAAK,oCAAjC;AAAsE,IAAA,SAAS,EAAEpC,gBAAjF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAhBF,eAiBE,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAG,GAAEuB,KAAK,CAACa,IAAK,UAAjC;AAA4C,IAAA,SAAS,EAAE3B,YAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAjBF,eAkBE,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAG,GAAEc,KAAK,CAACa,IAAK,sBAAjC;AAAwD,IAAA,SAAS,EAAE7B,SAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAlBF,eAmBE,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAG,GAAEgB,KAAK,CAACa,IAAK,cAAjC;AAAgD,IAAA,SAAS,EAAE1B,WAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAnBF,eAoBE,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAG,GAAEa,KAAK,CAACa,IAAK,0BAAjC;AAA4D,IAAA,SAAS,EAAE/B,WAAvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IApBF,eAqBE,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAG,GAAEkB,KAAK,CAACa,IAAK,sBAAjC;AAAwD,IAAA,SAAS,EAAEhC,YAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IArBF,eAsBE,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAG,GAAEmB,KAAK,CAACa,IAAK,sCAAjC;AAAwE,IAAA,SAAS,EAAE/B,WAAnF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAtBF,eAuBE,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAG,GAAEkB,KAAK,CAACa,IAAK,0BAAjC;AAA4D,IAAA,SAAS,EAAE1B,WAAvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAvBF,eAwBE,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAG,GAAEa,KAAK,CAACa,IAAK,oCAAjC;AAAsE,IAAA,SAAS,EAAEjB,WAAjF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAxBF,eAyBE,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAG,GAAEI,KAAK,CAACa,IAAK,YAAjC;AAA8C,IAAA,SAAS,EAAEjC,cAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAzBF,eA0BE,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAG,GAAEoB,KAAK,CAACa,IAAK,eAAjC;AAAiD,IAAA,SAAS,EAAEhB,YAA5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA1BF,eA2BE,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAG,GAAEG,KAAK,CAACa,IAAK,mBAAjC;AAAqD,IAAA,SAAS,EAAEjB,WAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA3BF,eA4BE,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAG,GAAEI,KAAK,CAACa,IAAK,2BAAjC;AAA6D,IAAA,SAAS,EAAEnB,qBAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA5BF,eA6BE,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAG,GAAEM,KAAK,CAACa,IAAK,QAAjC;AAA0C,IAAA,SAAS,EAAE5B,UAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA7BF,eA8BE,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAG,GAAEe,KAAK,CAACa,IAAK,UAAjC;AAA4C,IAAA,SAAS,EAAEzB,YAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA9BF,eA+BE,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAC,GAAZ;AAAgB,IAAA,SAAS,EAAEb,QAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA/BF,CADF,CADF,CADF,CADU,GAwCR,IAzCN,CADF;AA6CD,CAhGD;;AAkGA,MAAMuC,eAAe,GAAIC,KAAD,IAAW;AACjC,SAAO;AACLhB,IAAAA,WAAW,EAAEgB,KAAK,CAAChB;AADd,GAAP;AAGD,CAJD;;AAMA,MAAMiB,kBAAkB,GAAIC,QAAD,IAAc;AACvC,SAAO;AACLhB,IAAAA,SAAS,EAAGiB,eAAD,IAAqBD,QAAQ,CAACvD,cAAc,CAACwD,eAAD,CAAf,CADnC;AAELhB,IAAAA,OAAO,EAAGI,IAAD,IAAUW,QAAQ,CAACtD,cAAc,CAAC2C,IAAD,CAAf,CAFtB;AAGLH,IAAAA,QAAQ,EAAGK,KAAD,IAAWS,QAAQ,CAACrD,eAAe,CAAC4C,KAAD,CAAhB;AAHxB,GAAP;AAKD,CAND;;AAQAV,QAAQ,GAAGrC,OAAO,CAACqD,eAAD,EAAkBE,kBAAlB,CAAP,CAA6ClB,QAA7C,CAAX;AAEA,eAAe3B,UAAU,CAAC2B,QAAD,CAAzB","sourcesContent":["import React, { useEffect, Suspense, lazy } from \"react\";\nimport { connect } from \"react-redux\";\nimport {\n  itemsFetchData,\n  setCurrentUser,\n  itemsHasErrored, getFirebaseUserDetails\n} from \"../actions/actions\";\nimport {\n  BrowserRouter as Router,\n  Route,\n  Switch,\n  useHistory,\n  withRouter,\n} from \"react-router-dom\";\nimport DashBoard from \"./DashBoard\";\nimport LoadingBackdrop from '../components/LoadingBackdrop'\nimport ErrorBoundary from '../components/ErrorBoundary'\nimport NotFound from \"./NotFound\"\nimport { auth } from '../firebase'\nconst PropertyUnitPage = lazy(() => import('./PropertyUnitPage'));\nconst TenantDetailsPage = lazy(() => import('./TenantDetailsPage'));\nconst PropertyPage = lazy(() => import('./PropertyPage'));\nconst PropertiesPage = lazy(() => import('./Properties'));\nconst ExpensesPage = lazy(() => import('./Expenses'));\nconst ExpensePage = lazy(() => import('./ExpensePage'));\nconst UsersPage = lazy(() => import('./Users'));\nconst LeasePage = lazy(() => import('./LeasePage'));\nconst LeasesPage = lazy(() => import('./Leases'));\nconst ContactsPage = lazy(() => import('./Contacts'));\nconst ContactPage = lazy(() => import('./ContactPage'));\nconst PaymentsPage = lazy(() => import('./Payments'));\nconst MaintenancesPage = lazy(() => import('./Maintenances'));\nconst PropertyDetailsPage = lazy(() => import('./PropertyDetails'));\nconst UserPage = lazy(() => import('./UserPage'));\nconst UserProfilePage = lazy(() => import('./UserProfilePage'));\nconst MaintenanceRequestPage = lazy(() => import('./MaintenanceRequestPage'));\nconst TenantsStatementsPage = lazy(() => import('./TenantsStatements'));\nconst AccountSettingsPage = lazy(() => import('./AccountSettings'));\nconst ProductPage = lazy(() => import('./ProductPage'));\nconst ProductsPage = lazy(() => import('./Products'));\n\n\nlet MainPage = ({\n  currentUser,\n  match,\n  fetchData, setUser, setError\n}) => {\n  const history = useHistory();\n\n  useEffect(() => {\n    if (!currentUser) {\n      auth.onAuthStateChanged(\n        async function (user) {\n          if (user) {\n            //get details about user\n            try {\n              const userDetails = await getFirebaseUserDetails(user)\n              setUser(userDetails)\n            } catch (error) {\n              setUser(null);\n              history.push(\"/login\");\n            }\n          } else {\n            // User is signed out.\n            setUser(null);\n            history.push(\"/login\");\n          }\n        },\n        function (error) {\n          setUser(null);\n          setError(error.message);\n          history.push(\"/login\");\n          console.log('An error during onauthstatechanged =>', error);\n        });\n    }\n    else {\n      fetchData([\n        \"properties\",\n        \"property_units\",\n        \"transactions-charges\",\n        \"contacts\",\n        \"charge-payments\",\n        \"leases\",\n        \"credit-notes\",\n        \"expenses\",\n        \"unit-charges\",\n        \"users\",\n        \"management-fees\",\n        \"account-billing\",\n      ]);\n    }\n  });\n\n  return (\n    <React.Fragment>\n      {currentUser ?\n        <Router>\n          <ErrorBoundary>\n            <Suspense fallback={<LoadingBackdrop open={true} />}>\n              <Switch>\n                <Route exact path={`${match.path}`} component={DashBoard} />\n                <Route exact path={`${match.path}account-settings`} component={AccountSettingsPage} />\n                <Route exact path={`${match.path}maintenance-requests/new`} component={MaintenanceRequestPage} />\n                <Route exact path={`${match.path}maintenance-requests/:maintenanceRequestId/edit`} component={MaintenanceRequestPage} />\n                <Route exact path={`${match.path}maintenance-requests`} component={MaintenancesPage} />\n                <Route exact path={`${match.path}properties/new`} component={PropertyPage} />\n                <Route exact path={`${match.path}users/new`} component={UserPage} />\n                <Route exact path={`${match.path}users/:userId/edit`} component={UserPage} />\n                <Route exact path={`${match.path}users`} component={UsersPage} />\n                <Route exact path={`${match.path}leases/new`} component={LeasePage} />\n                <Route exact path={`${match.path}properties/:propertyId/edit`} component={PropertyPage} />\n                <Route exact path={`${match.path}properties/:propertyId/details`} component={PropertyDetailsPage} />\n                <Route exact path={`${match.path}contacts/:contactId/details`} component={TenantDetailsPage} />\n                <Route exact path={`${match.path}users/:userId/details`} component={UserProfilePage} />\n                <Route exact path={`${match.path}properties/:propertyId/details/:propertyUnitId/edit`} component={PropertyUnitPage} />\n                <Route exact path={`${match.path}properties/:propertyId/details/new`} component={PropertyUnitPage} />\n                <Route exact path={`${match.path}contacts`} component={ContactsPage} />\n                <Route exact path={`${match.path}leases/:leaseId/edit`} component={LeasePage} />\n                <Route exact path={`${match.path}contacts/new`} component={ContactPage} />\n                <Route exact path={`${match.path}property_expenditure/new`} component={ExpensePage} />\n                <Route exact path={`${match.path}property_expenditure`} component={ExpensesPage} />\n                <Route exact path={`${match.path}property_expenditure/:expenseId/edit`} component={ExpensePage} />\n                <Route exact path={`${match.path}contacts/:contactId/edit`} component={ContactPage} />\n                <Route exact path={`${match.path}meter-reading/:meterReadingId/edit`} component={ProductPage} />\n                <Route exact path={`${match.path}properties`} component={PropertiesPage} />\n                <Route exact path={`${match.path}meter-reading`} component={ProductsPage} />\n                <Route exact path={`${match.path}meter-reading/new`} component={ProductPage} />\n                <Route exact path={`${match.path}reports/tenant-statements`} component={TenantsStatementsPage} />\n                <Route exact path={`${match.path}leases`} component={LeasesPage} />\n                <Route exact path={`${match.path}payments`} component={PaymentsPage} />\n                <Route path=\"*\" component={NotFound} />\n              </Switch>\n            </Suspense>\n          </ErrorBoundary>\n        </Router>\n        : null}\n    </React.Fragment>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    currentUser: state.currentUser,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    fetchData: (collectionsUrls) => dispatch(itemsFetchData(collectionsUrls)),\n    setUser: (user) => dispatch(setCurrentUser(user)),\n    setError: (error) => dispatch(itemsHasErrored(error)),\n  };\n};\n\nMainPage = connect(mapStateToProps, mapDispatchToProps)(MainPage);\n\nexport default withRouter(MainPage);\n"]},"metadata":{},"sourceType":"module"}