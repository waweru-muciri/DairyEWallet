{"ast":null,"code":"var _jsxFileName = \"/home/brianmuciri/Projects/farm-ledger-ld/src/Routes/Properties.js\";\nimport Layout from \"../components/PrivateLayout\";\nimport Grid from \"@material-ui/core/Grid\";\nimport React, { useEffect, useState } from \"react\";\nimport { Box, TextField, Button } from \"@material-ui/core\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport UndoIcon from \"@material-ui/icons/Undo\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport ExportToExcelBtn from \"../components/ExportToExcelBtn\";\nimport { connect } from \"react-redux\";\nimport { handleDelete } from \"../actions/actions\";\nimport PageHeading from \"../components/PageHeading\";\nimport CommonTable from \"../components/table/commonTable\";\nimport { withRouter } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\nimport { commonStyles } from \"../components/commonStyles\";\nimport PrintArrayToPdf from \"../components/PrintArrayToPdfBtn\";\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nconst headCells = [{\n  id: \"ref\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Property Name/Ref\"\n}, {\n  id: \"address\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Property Address\"\n}, {\n  id: \"city\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Location\"\n}, {\n  id: \"owner_details\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Rental Owner\"\n}, {\n  id: \"landlord_name\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Rental Manager\"\n}, {\n  id: \"details\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Details\"\n}, {\n  id: \"edit\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Edit\"\n}, {\n  id: \"delete\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Delete\"\n}];\n\nlet PropertyPage = ({\n  properties,\n  users,\n  match,\n  handleItemDelete\n}) => {\n  const classes = commonStyles();\n  let [propertyItems, setPropertyUnitItems] = useState([]);\n  let [filteredPropertyItems, setFilteredPropertiesItems] = useState([]);\n  let [propertyFilter, setPropertyFilter] = useState(null);\n  let [assignedToFilter, setAssignedToFilter] = useState(null);\n  const [selected, setSelected] = useState([]);\n  useEffect(() => {\n    setPropertyUnitItems(properties);\n    setFilteredPropertiesItems(properties);\n  }, [properties]);\n\n  const handleSearchFormSubmit = event => {\n    event.preventDefault(); //filter the properties according to the search criteria here\n\n    let filteredProperties = propertyItems.filter(({\n      id\n    }) => !propertyFilter ? true : id === propertyFilter.id).filter(({\n      assigned_to\n    }) => !assignedToFilter ? true : assigned_to === assignedToFilter.id);\n    setFilteredPropertiesItems(filteredProperties);\n  };\n\n  const resetSearchForm = event => {\n    event.preventDefault();\n    setPropertyFilter(null);\n    setAssignedToFilter(null);\n    setFilteredPropertiesItems(propertyItems);\n  };\n\n  return /*#__PURE__*/React.createElement(Layout, {\n    pageTitle: \"Properties\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 3,\n    justify: \"space-evenly\",\n    alignItems: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(PageHeading, {\n    text: \"Properties\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    item: true,\n    alignItems: \"center\",\n    direction: \"row\",\n    key: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    color: \"primary\",\n    variant: \"contained\",\n    size: \"medium\",\n    startIcon: /*#__PURE__*/React.createElement(AddIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 40\n      }\n    }),\n    component: Link,\n    to: `${match.url}/new`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 25\n    }\n  }, \"NEW\")), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    color: \"primary\",\n    variant: \"contained\",\n    size: \"medium\",\n    startIcon: /*#__PURE__*/React.createElement(EditIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 40\n      }\n    }),\n    disabled: !selected.length,\n    component: Link,\n    to: `${match.url}/${selected[0]}/edit`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 25\n    }\n  }, \"Edit\")), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(PrintArrayToPdf, {\n    disabled: !selected.length,\n    reportName: 'Rental Records',\n    reportTitle: 'Rentals Records',\n    headCells: headCells,\n    dataToPrint: propertyItems.filter(({\n      id\n    }) => selected.includes(id)),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(ExportToExcelBtn, {\n    disabled: !selected.length,\n    reportName: 'Rental Records',\n    reportTitle: 'Rentals Records',\n    headCells: headCells,\n    dataToPrint: propertyItems.filter(({\n      id\n    }) => selected.includes(id)),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    border: 1,\n    borderRadius: \"borderRadius\",\n    borderColor: \"grey.400\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: classes.form,\n    id: \"propertySearchForm\",\n    onSubmit: handleSearchFormSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    justify: \"space-around\",\n    direction: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Autocomplete, {\n    id: \"assigned_to\",\n    name: \"assigned_to\",\n    label: \"Rental Manager\",\n    options: users,\n    value: assignedToFilter,\n    getOptionLabel: option => option ? `${option.first_name} ${option.last_name}` : '',\n    style: {\n      width: \"100%\"\n    },\n    onChange: (event, newValue) => {\n      setAssignedToFilter(newValue);\n    },\n    renderInput: params => /*#__PURE__*/React.createElement(TextField, Object.assign({}, params, {\n      label: \"Rental Manager\",\n      variant: \"outlined\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 66\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 37\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Autocomplete, {\n    id: \"property_filter\",\n    name: \"property_filter\",\n    label: \"Property\",\n    options: properties,\n    value: propertyFilter,\n    getOptionLabel: option => option ? `${option.ref}` : '',\n    style: {\n      width: \"100%\"\n    },\n    onChange: (event, newValue) => {\n      setPropertyFilter(newValue);\n    },\n    renderInput: params => /*#__PURE__*/React.createElement(TextField, Object.assign({}, params, {\n      label: \"Property\",\n      variant: \"outlined\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 66\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 37\n    }\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    item: true,\n    justify: \"flex-end\",\n    alignItems: \"center\",\n    direction: \"row\",\n    key: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    form: \"propertySearchForm\",\n    color: \"primary\",\n    variant: \"contained\",\n    size: \"medium\",\n    startIcon: /*#__PURE__*/React.createElement(SearchIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 52\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 37\n    }\n  }, \"SEARCH\")), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: event => {\n      resetSearchForm(event);\n    },\n    type: \"reset\",\n    form: \"propertySearchForm\",\n    color: \"primary\",\n    variant: \"contained\",\n    size: \"medium\",\n    startIcon: /*#__PURE__*/React.createElement(UndoIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 52\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 37\n    }\n  }, \"RESET\")))))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(CommonTable, {\n    selected: selected,\n    setSelected: setSelected,\n    rows: filteredPropertyItems,\n    headCells: headCells,\n    noDetailsCol: true,\n    deleteUrl: 'properties',\n    handleDelete: handleItemDelete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 21\n    }\n  }))));\n};\n\nconst mapStateToProps = state => {\n  return {\n    properties: state.properties.map(property => {\n      const landlord = state.users.find(user => user.id === property.assigned_to) || {};\n      const owner = state.users.find(user => user.id === property.owner) || {};\n      const propertyDetails = {};\n      propertyDetails.landlord_name = `${landlord.first_name} ${landlord.last_name}`;\n      propertyDetails.owner_details = `${owner.first_name} ${owner.last_name}`;\n      return Object.assign(propertyDetails, property);\n    }),\n    users: state.users\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    handleItemDelete: (itemId, url) => dispatch(handleDelete(itemId, url))\n  };\n};\n\nPropertyPage = connect(mapStateToProps, mapDispatchToProps)(PropertyPage);\nexport default withRouter(PropertyPage);","map":{"version":3,"sources":["/home/brianmuciri/Projects/farm-ledger-ld/src/Routes/Properties.js"],"names":["Layout","Grid","React","useEffect","useState","Box","TextField","Button","EditIcon","SearchIcon","UndoIcon","AddIcon","ExportToExcelBtn","connect","handleDelete","PageHeading","CommonTable","withRouter","Link","commonStyles","PrintArrayToPdf","Autocomplete","headCells","id","numeric","disablePadding","label","PropertyPage","properties","users","match","handleItemDelete","classes","propertyItems","setPropertyUnitItems","filteredPropertyItems","setFilteredPropertiesItems","propertyFilter","setPropertyFilter","assignedToFilter","setAssignedToFilter","selected","setSelected","handleSearchFormSubmit","event","preventDefault","filteredProperties","filter","assigned_to","resetSearchForm","url","length","includes","form","option","first_name","last_name","width","newValue","params","ref","mapStateToProps","state","map","property","landlord","find","user","owner","propertyDetails","landlord_name","owner_details","Object","assign","mapDispatchToProps","dispatch","itemId"],"mappings":"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","sourcesContent":["import Layout from \"../components/PrivateLayout\";\nimport Grid from \"@material-ui/core/Grid\";\nimport React, { useEffect, useState } from \"react\";\nimport { Box, TextField, Button } from \"@material-ui/core\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport UndoIcon from \"@material-ui/icons/Undo\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport ExportToExcelBtn from \"../components/ExportToExcelBtn\";\nimport { connect } from \"react-redux\";\nimport { handleDelete } from \"../actions/actions\";\nimport PageHeading from \"../components/PageHeading\";\nimport CommonTable from \"../components/table/commonTable\";\nimport { withRouter } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\nimport { commonStyles } from \"../components/commonStyles\";\nimport PrintArrayToPdf from \"../components/PrintArrayToPdfBtn\";\nimport Autocomplete from '@material-ui/lab/Autocomplete';\n\n\nconst headCells = [\n    { id: \"ref\", numeric: false, disablePadding: true, label: \"Property Name/Ref\" },\n    { id: \"address\", numeric: false, disablePadding: true, label: \"Property Address\" },\n    { id: \"city\", numeric: false, disablePadding: true, label: \"Location\" },\n    { id: \"owner_details\", numeric: false, disablePadding: true, label: \"Rental Owner\" },\n    { id: \"landlord_name\", numeric: false, disablePadding: true, label: \"Rental Manager\" },\n    { id: \"details\", numeric: false, disablePadding: true, label: \"Details\" },\n    { id: \"edit\", numeric: false, disablePadding: true, label: \"Edit\" },\n    { id: \"delete\", numeric: false, disablePadding: true, label: \"Delete\" },\n];\n\nlet PropertyPage = ({\n    properties,\n    users,\n    match,\n    handleItemDelete\n}) => {\n    const classes = commonStyles();\n    let [propertyItems, setPropertyUnitItems] = useState([])\n    let [filteredPropertyItems, setFilteredPropertiesItems] = useState([])\n    let [propertyFilter, setPropertyFilter] = useState(null);\n    let [assignedToFilter, setAssignedToFilter] = useState(null);\n    const [selected, setSelected] = useState([]);\n\n    useEffect(() => {\n        setPropertyUnitItems(properties)\n        setFilteredPropertiesItems(properties)\n    }, [properties])\n\n    const handleSearchFormSubmit = (event) => {\n        event.preventDefault();\n        //filter the properties according to the search criteria here\n        let filteredProperties = propertyItems\n            .filter(({ id }) => !propertyFilter ? true : id === propertyFilter.id)\n            .filter(({ assigned_to }) => !assignedToFilter ? true : assigned_to === assignedToFilter.id)\n\n        setFilteredPropertiesItems(filteredProperties);\n    };\n\n    const resetSearchForm = (event) => {\n        event.preventDefault();\n        setPropertyFilter(null);\n        setAssignedToFilter(null);\n        setFilteredPropertiesItems(propertyItems);\n    };\n\n    return (\n        <Layout pageTitle=\"Properties\">\n            <Grid\n                container\n                spacing={3}\n                justify=\"space-evenly\"\n                alignItems=\"center\"\n            >\n                <Grid item xs={12} >\n                    <PageHeading text=\"Properties\" />\n                </Grid>\n                <Grid\n                    container\n                    spacing={2}\n                    item\n                    alignItems=\"center\"\n                    direction=\"row\"\n                    key={1}\n                >\n                    <Grid item>\n                        <Button\n                            type=\"button\"\n                            color=\"primary\"\n                            variant=\"contained\"\n                            size=\"medium\"\n                            startIcon={<AddIcon />}\n                            component={Link}\n                            to={`${match.url}/new`}\n                        >\n                            NEW\n                        </Button>\n                    </Grid>\n                    <Grid item>\n                        <Button\n                            type=\"button\"\n                            color=\"primary\"\n                            variant=\"contained\"\n                            size=\"medium\"\n                            startIcon={<EditIcon />}\n                            disabled={!selected.length}\n                            component={Link}\n                            to={`${match.url}/${selected[0]}/edit`}\n                        >\n                            Edit\n                        </Button>\n                    </Grid>\n                    <Grid item>\n                        <PrintArrayToPdf\n                            disabled={!selected.length}\n                            reportName={'Rental Records'}\n                            reportTitle={'Rentals Records'}\n                            headCells={headCells}\n                            dataToPrint={propertyItems.filter(({ id }) => selected.includes(id))}\n                        />\n                    </Grid>\n                    <Grid item>\n                        <ExportToExcelBtn\n                            disabled={!selected.length}\n                            reportName={'Rental Records'}\n                            reportTitle={'Rentals Records'}\n                            headCells={headCells}\n                            dataToPrint={propertyItems.filter(({ id }) => selected.includes(id))}\n                        />\n                    </Grid>\n                </Grid>\n                <Grid item xs={12}>\n                    <Box\n                        border={1}\n                        borderRadius=\"borderRadius\"\n                        borderColor=\"grey.400\"\n                    >\n                        <form\n                            className={classes.form}\n                            id=\"propertySearchForm\"\n                            onSubmit={handleSearchFormSubmit}\n                        >\n                            <Grid\n                                container\n                                spacing={2}\n                                justify=\"space-around\"\n                                direction=\"row\"\n                            >\n                                <Grid item xs={12} md={6}>\n                                    <Autocomplete\n                                        id=\"assigned_to\"\n                                        name=\"assigned_to\"\n                                        label=\"Rental Manager\"\n                                        options={users}\n                                        value={assignedToFilter}\n                                        getOptionLabel={(option) => option ? `${option.first_name} ${option.last_name}` : ''}\n                                        style={{ width: \"100%\" }}\n                                        onChange={(event, newValue) => {\n                                            setAssignedToFilter(\n                                                newValue\n                                            );\n                                        }}\n                                        renderInput={(params) => <TextField {...params} label=\"Rental Manager\" variant=\"outlined\" />}\n                                    />\n                                </Grid>\n                                <Grid item xs={12} md={6}>\n                                    <Autocomplete\n                                        id=\"property_filter\"\n                                        name=\"property_filter\"\n                                        label=\"Property\"\n                                        options={properties}\n                                        value={propertyFilter}\n                                        getOptionLabel={(option) => option ? `${option.ref}` : ''}\n                                        style={{ width: \"100%\" }}\n                                        onChange={(event, newValue) => {\n                                            setPropertyFilter(\n                                                newValue\n                                            );\n                                        }}\n                                        renderInput={(params) => <TextField {...params} label=\"Property\" variant=\"outlined\" />}\n                                    />\n                                </Grid>\n                            </Grid>\n                            <Grid\n                                container\n                                spacing={2}\n                                item\n                                justify=\"flex-end\"\n                                alignItems=\"center\"\n                                direction=\"row\"\n                                key={1}\n                            >\n                                <Grid item>\n                                    <Button\n                                        type=\"submit\"\n                                        form=\"propertySearchForm\"\n                                        color=\"primary\"\n                                        variant=\"contained\"\n                                        size=\"medium\"\n                                        startIcon={<SearchIcon />}\n                                    >\n                                        SEARCH\n                                    </Button>\n                                </Grid>\n                                <Grid item>\n                                    <Button\n                                        onClick={(event) => {\n                                            resetSearchForm(event);\n                                        }}\n                                        type=\"reset\"\n                                        form=\"propertySearchForm\"\n                                        color=\"primary\"\n                                        variant=\"contained\"\n                                        size=\"medium\"\n                                        startIcon={<UndoIcon />}\n                                    >\n                                        RESET\n                                    </Button>\n                                </Grid>\n                            </Grid>\n                        </form>\n                    </Box>\n                </Grid>\n                <Grid item xs={12}>\n                    <CommonTable\n                        selected={selected}\n                        setSelected={setSelected}\n                        rows={filteredPropertyItems}\n                        headCells={headCells}\n                        noDetailsCol={true}\n                        deleteUrl={'properties'}\n                        handleDelete={handleItemDelete}\n                    />\n                </Grid>\n            </Grid>\n        </Layout>\n    );\n};\n\nconst mapStateToProps = (state) => {\n    return {\n        properties: state.properties.map((property) => {\n            const landlord = state.users.find((user) => user.id === property.assigned_to) || {};\n            const owner = state.users.find((user) => user.id === property.owner) || {};\n            const propertyDetails = {}\n            propertyDetails.landlord_name = `${landlord.first_name} ${landlord.last_name}`\n            propertyDetails.owner_details = `${owner.first_name} ${owner.last_name}`\n            return Object.assign(propertyDetails, property);\n        }\n        ),\n        users: state.users,\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        handleItemDelete: (itemId, url) => dispatch(handleDelete(itemId, url)),\n    };\n};\n\nPropertyPage = connect(mapStateToProps, mapDispatchToProps)(PropertyPage);\n\nexport default withRouter(PropertyPage);\n"]},"metadata":{},"sourceType":"module"}