{"ast":null,"code":"var _jsxFileName = \"/home/brianmuciri/Projects/farm-ledger-ld/src/components/sales/SaleInputForm.js\";\nimport React from \"react\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport CustomSnackbar from '../CustomSnackbar';\nimport { Formik } from \"formik\";\nimport { commonStyles } from \"../commonStyles\";\nimport SaveIcon from \"@material-ui/icons/Save\";\nimport CancelIcon from \"@material-ui/icons/Cancel\";\nimport * as Yup from \"yup\";\nimport { format, startOfToday } from \"date-fns\";\nimport CustomCircularProgress from \"../CustomCircularProgress\";\nconst defaultDate = format(startOfToday(), 'yyyy-MM-dd');\nconst SaleSchema = Yup.object().shape({\n  sale_price: Yup.number().min(0, 'Price must be greater than 0').required(\"Sale Price is required\"),\n  sale_quantity: Yup.number().min(0, 'Quantity must be greater than 0').required(\"Sale Quantity is required\"),\n  sale_date: Yup.date().required(\"Sale Date Required\"),\n  product_id: Yup.string().trim().required(\"Product is Required\"),\n  contact_id: Yup.string().trim().required(\"Customer is Required\"),\n  deposit_id: Yup.string().trim()\n});\n\nconst SaleInputForm = ({\n  products,\n  contacts,\n  customerAccountDeposits,\n  history,\n  saleToEdit,\n  handleItemSubmit\n}) => {\n  const classes = commonStyles();\n  const saleValues = {\n    id: saleToEdit.id,\n    product_id: saleToEdit.product_id || '',\n    contact_id: saleToEdit.contact_id || '',\n    deposit_id: saleToEdit.deposit_id || '',\n    sale_date: saleToEdit.sale_date || defaultDate,\n    sale_price: saleToEdit.sale_price || '',\n    sale_quantity: saleToEdit.sale_quantity || ''\n  };\n  return /*#__PURE__*/React.createElement(Formik, {\n    initialValues: saleValues,\n    enableReinitialize: true,\n    validationSchema: SaleSchema,\n    onSubmit: async (values, {\n      resetForm,\n      setStatus\n    }) => {\n      try {\n        const productSalesValues = {\n          id: values.id,\n          sale_price: values.sale_price,\n          product_id: values.product_id,\n          deposit_id: values.deposit_id,\n          sale_date: values.sale_date,\n          contact_id: values.contact_id,\n          sale_quantity: values.sale_quantity\n        };\n        await handleItemSubmit(productSalesValues, \"sales\");\n        resetForm({});\n\n        if (values.id) {\n          history.goBack();\n        }\n\n        setStatus({\n          sent: true,\n          msg: \"Sale saved.\"\n        });\n      } catch (error) {\n        setStatus({\n          sent: false,\n          msg: `Error! ${error}.`\n        });\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 3\n    }\n  }, ({\n    values,\n    status,\n    handleSubmit,\n    setFieldValue,\n    errors,\n    touched,\n    handleChange,\n    handleBlur,\n    isSubmitting\n  }) => /*#__PURE__*/React.createElement(\"form\", {\n    className: classes.form,\n    method: \"post\",\n    id: \"meterInputForm\",\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    justify: \"center\",\n    alignItems: \"stretch\",\n    direction: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 6\n    }\n  }, status && status.msg && /*#__PURE__*/React.createElement(CustomSnackbar, {\n    variant: status.sent ? \"success\" : \"error\",\n    message: status.msg,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }), isSubmitting && /*#__PURE__*/React.createElement(CustomCircularProgress, {\n    open: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    select: true,\n    variant: \"outlined\",\n    name: \"contact_id\",\n    label: \"Customer\",\n    id: \"contact_id\",\n    onChange: event => {\n      setFieldValue('contact_id', event.target.value);\n    },\n    value: values.contact_id,\n    error: errors.contact_id && touched.contact_id,\n    helperText: touched.contact_id && errors.contact_id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 8\n    }\n  }, contacts.map((contact, index) => /*#__PURE__*/React.createElement(MenuItem, {\n    key: index,\n    value: contact.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 10\n    }\n  }, contact.first_name, \" \", contact.last_name)))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    select: true,\n    variant: \"outlined\",\n    name: \"product_id\",\n    label: \"Product Name\",\n    id: \"product_id\",\n    onChange: handleChange,\n    value: values.product_id,\n    error: errors.product_id && touched.product_id,\n    helperText: touched.product_id && errors.product_id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 8\n    }\n  }, products.map((product, index) => /*#__PURE__*/React.createElement(MenuItem, {\n    key: index,\n    value: product.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 10\n    }\n  }, product.product_name)))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    select: true,\n    multiple: true,\n    variant: \"outlined\",\n    name: \"deposit_id\",\n    label: \"Farmer Deposit\",\n    id: \"deposit_id\",\n    onChange: handleChange,\n    value: values.deposit_id,\n    error: errors.deposit_id && touched.deposit_id,\n    helperText: touched.deposit_id && errors.deposit_id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 8\n    }\n  }, customerAccountDeposits.filter(customerDeposit => customerDeposit.contact_id === values.contact_id).map((customerDeposit, index) => /*#__PURE__*/React.createElement(MenuItem, {\n    key: index,\n    value: customerDeposit.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 11\n    }\n  }, customerDeposit.deposit_amount)))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    type: \"date\",\n    InputLabelProps: {\n      shrink: true\n    },\n    variant: \"outlined\",\n    id: \"sale_date\",\n    name: \"sale_date\",\n    label: \"Sale Date\",\n    value: values.sale_date,\n    onChange: handleChange,\n    onBlur: handleBlur,\n    error: errors.sale_date && touched.sale_date,\n    helperText: touched.sale_date && errors.sale_date,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 8\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    variant: \"outlined\",\n    id: \"sale_quantity\",\n    name: \"sale_quantity\",\n    label: \"Sale Quantity\",\n    value: values.sale_quantity,\n    onChange: handleChange,\n    onBlur: handleBlur,\n    error: errors.sale_quantity && touched.sale_quantity,\n    helperText: touched.sale_quantity && errors.sale_quantity,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 8\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    variant: \"outlined\",\n    id: \"sale_price\",\n    name: \"sale_price\",\n    label: \"Sale Price\",\n    value: values.sale_price,\n    onChange: handleChange,\n    onBlur: handleBlur,\n    error: errors.sale_price && touched.sale_price,\n    helperText: touched.sale_price && errors.sale_price,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 8\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    container: true,\n    className: classes.buttonBox,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"contained\",\n    size: \"medium\",\n    startIcon: /*#__PURE__*/React.createElement(CancelIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 21\n      }\n    }),\n    onClick: () => history.goBack(),\n    disableElevation: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 9\n    }\n  }, \"Cancel\")), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    color: \"primary\",\n    variant: \"contained\",\n    size: \"medium\",\n    startIcon: /*#__PURE__*/React.createElement(SaveIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 21\n      }\n    }),\n    form: \"meterInputForm\",\n    disabled: isSubmitting,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 9\n    }\n  }, \"Save\"))))));\n};\n\nexport default SaleInputForm;","map":{"version":3,"sources":["/home/brianmuciri/Projects/farm-ledger-ld/src/components/sales/SaleInputForm.js"],"names":["React","Grid","Button","TextField","MenuItem","CustomSnackbar","Formik","commonStyles","SaveIcon","CancelIcon","Yup","format","startOfToday","CustomCircularProgress","defaultDate","SaleSchema","object","shape","sale_price","number","min","required","sale_quantity","sale_date","date","product_id","string","trim","contact_id","deposit_id","SaleInputForm","products","contacts","customerAccountDeposits","history","saleToEdit","handleItemSubmit","classes","saleValues","id","values","resetForm","setStatus","productSalesValues","goBack","sent","msg","error","status","handleSubmit","setFieldValue","errors","touched","handleChange","handleBlur","isSubmitting","form","event","target","value","map","contact","index","first_name","last_name","product","product_name","filter","customerDeposit","deposit_amount","shrink","buttonBox"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,cAAP,MAA2B,mBAA3B;AACA,SAASC,MAAT,QAAuB,QAAvB;AACA,SAASC,YAAT,QAA6B,iBAA7B;AACA,OAAOC,QAAP,MAAqB,yBAArB;AACA,OAAOC,UAAP,MAAuB,2BAAvB;AACA,OAAO,KAAKC,GAAZ,MAAqB,KAArB;AACA,SAASC,MAAT,EAAiBC,YAAjB,QAAqC,UAArC;AACA,OAAOC,sBAAP,MAAmC,2BAAnC;AAEA,MAAMC,WAAW,GAAGH,MAAM,CAACC,YAAY,EAAb,EAAiB,YAAjB,CAA1B;AAGA,MAAMG,UAAU,GAAGL,GAAG,CAACM,MAAJ,GAAaC,KAAb,CAAmB;AACrCC,EAAAA,UAAU,EAAER,GAAG,CAACS,MAAJ,GAAaC,GAAb,CAAiB,CAAjB,EAAoB,8BAApB,EAAoDC,QAApD,CAA6D,wBAA7D,CADyB;AAErCC,EAAAA,aAAa,EAAEZ,GAAG,CAACS,MAAJ,GAAaC,GAAb,CAAiB,CAAjB,EAAoB,iCAApB,EAAuDC,QAAvD,CAAgE,2BAAhE,CAFsB;AAGrCE,EAAAA,SAAS,EAAEb,GAAG,CAACc,IAAJ,GAAWH,QAAX,CAAoB,oBAApB,CAH0B;AAIrCI,EAAAA,UAAU,EAAEf,GAAG,CAACgB,MAAJ,GAAaC,IAAb,GAAoBN,QAApB,CAA6B,qBAA7B,CAJyB;AAKrCO,EAAAA,UAAU,EAAElB,GAAG,CAACgB,MAAJ,GAAaC,IAAb,GAAoBN,QAApB,CAA6B,sBAA7B,CALyB;AAMrCQ,EAAAA,UAAU,EAAEnB,GAAG,CAACgB,MAAJ,GAAaC,IAAb;AANyB,CAAnB,CAAnB;;AAUA,MAAMG,aAAa,GAAG,CAAC;AAAEC,EAAAA,QAAF;AAAYC,EAAAA,QAAZ;AAAsBC,EAAAA,uBAAtB;AAA+CC,EAAAA,OAA/C;AAAwDC,EAAAA,UAAxD;AAAoEC,EAAAA;AAApE,CAAD,KAA4F;AAEjH,QAAMC,OAAO,GAAG9B,YAAY,EAA5B;AACA,QAAM+B,UAAU,GAAG;AAClBC,IAAAA,EAAE,EAAEJ,UAAU,CAACI,EADG;AAElBd,IAAAA,UAAU,EAAEU,UAAU,CAACV,UAAX,IAAyB,EAFnB;AAGlBG,IAAAA,UAAU,EAAEO,UAAU,CAACP,UAAX,IAAyB,EAHnB;AAIlBC,IAAAA,UAAU,EAAEM,UAAU,CAACN,UAAX,IAAyB,EAJnB;AAKlBN,IAAAA,SAAS,EAAEY,UAAU,CAACZ,SAAX,IAAwBT,WALjB;AAMlBI,IAAAA,UAAU,EAAEiB,UAAU,CAACjB,UAAX,IAAyB,EANnB;AAOlBI,IAAAA,aAAa,EAAEa,UAAU,CAACb,aAAX,IAA4B;AAPzB,GAAnB;AAUA,sBACC,oBAAC,MAAD;AACC,IAAA,aAAa,EAAEgB,UADhB;AAEC,IAAA,kBAAkB,MAFnB;AAGC,IAAA,gBAAgB,EAAEvB,UAHnB;AAIC,IAAA,QAAQ,EAAE,OAAOyB,MAAP,EAAe;AAAEC,MAAAA,SAAF;AAAaC,MAAAA;AAAb,KAAf,KAA4C;AACrD,UAAI;AACH,cAAMC,kBAAkB,GAAG;AAC1BJ,UAAAA,EAAE,EAAEC,MAAM,CAACD,EADe;AAE1BrB,UAAAA,UAAU,EAAEsB,MAAM,CAACtB,UAFO;AAG1BO,UAAAA,UAAU,EAAEe,MAAM,CAACf,UAHO;AAI1BI,UAAAA,UAAU,EAAEW,MAAM,CAACX,UAJO;AAK1BN,UAAAA,SAAS,EAAEiB,MAAM,CAACjB,SALQ;AAM1BK,UAAAA,UAAU,EAAEY,MAAM,CAACZ,UANO;AAO1BN,UAAAA,aAAa,EAAEkB,MAAM,CAAClB;AAPI,SAA3B;AASA,cAAMc,gBAAgB,CAACO,kBAAD,EAAqB,OAArB,CAAtB;AACAF,QAAAA,SAAS,CAAC,EAAD,CAAT;;AACA,YAAID,MAAM,CAACD,EAAX,EAAe;AACdL,UAAAA,OAAO,CAACU,MAAR;AACA;;AACDF,QAAAA,SAAS,CAAC;AAAEG,UAAAA,IAAI,EAAE,IAAR;AAAcC,UAAAA,GAAG,EAAE;AAAnB,SAAD,CAAT;AACA,OAhBD,CAgBE,OAAOC,KAAP,EAAc;AACfL,QAAAA,SAAS,CAAC;AAAEG,UAAAA,IAAI,EAAE,KAAR;AAAeC,UAAAA,GAAG,EAAG,UAASC,KAAM;AAApC,SAAD,CAAT;AACA;AACD,KAxBF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KA0BE,CAAC;AACDP,IAAAA,MADC;AAEDQ,IAAAA,MAFC;AAGDC,IAAAA,YAHC;AAIDC,IAAAA,aAJC;AAKDC,IAAAA,MALC;AAMDC,IAAAA,OANC;AAODC,IAAAA,YAPC;AAQDC,IAAAA,UARC;AASDC,IAAAA;AATC,GAAD,kBAWA;AACC,IAAA,SAAS,EAAElB,OAAO,CAACmB,IADpB;AAEC,IAAA,MAAM,EAAC,MAFR;AAGC,IAAA,EAAE,EAAC,gBAHJ;AAIC,IAAA,QAAQ,EAAEP,YAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAMC,oBAAC,IAAD;AACC,IAAA,SAAS,MADV;AAEC,IAAA,OAAO,EAAE,CAFV;AAGC,IAAA,OAAO,EAAC,QAHT;AAIC,IAAA,UAAU,EAAC,SAJZ;AAKC,IAAA,SAAS,EAAC,QALX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAQED,MAAM,IAAIA,MAAM,CAACF,GAAjB,iBACC,oBAAC,cAAD;AACC,IAAA,OAAO,EAAEE,MAAM,CAACH,IAAP,GAAc,SAAd,GAA0B,OADpC;AAEC,IAAA,OAAO,EAAEG,MAAM,CAACF,GAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATH,EAgBES,YAAY,iBAAK,oBAAC,sBAAD;AAAwB,IAAA,IAAI,EAAE,IAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAhBnB,eAkBC,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,SAAD;AACC,IAAA,SAAS,MADV;AAEC,IAAA,MAAM,MAFP;AAGC,IAAA,OAAO,EAAC,UAHT;AAIC,IAAA,IAAI,EAAC,YAJN;AAKC,IAAA,KAAK,EAAC,UALP;AAMC,IAAA,EAAE,EAAC,YANJ;AAOC,IAAA,QAAQ,EAAGE,KAAD,IAAW;AACpBP,MAAAA,aAAa,CAAC,YAAD,EAAeO,KAAK,CAACC,MAAN,CAAaC,KAA5B,CAAb;AACA,KATF;AAWC,IAAA,KAAK,EAAEnB,MAAM,CAACZ,UAXf;AAYC,IAAA,KAAK,EAAEuB,MAAM,CAACvB,UAAP,IAAqBwB,OAAO,CAACxB,UAZrC;AAaC,IAAA,UAAU,EAAEwB,OAAO,CAACxB,UAAR,IAAsBuB,MAAM,CAACvB,UAb1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAeEI,QAAQ,CAAC4B,GAAT,CAAa,CAACC,OAAD,EAAUC,KAAV,kBACb,oBAAC,QAAD;AAAU,IAAA,GAAG,EAAEA,KAAf;AAAsB,IAAA,KAAK,EAAED,OAAO,CAACtB,EAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACEsB,OAAO,CAACE,UADV,OACuBF,OAAO,CAACG,SAD/B,CADA,CAfF,CADD,CAlBD,eAyCC,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,SAAD;AACC,IAAA,SAAS,MADV;AAEC,IAAA,MAAM,MAFP;AAGC,IAAA,OAAO,EAAC,UAHT;AAIC,IAAA,IAAI,EAAC,YAJN;AAKC,IAAA,KAAK,EAAC,cALP;AAMC,IAAA,EAAE,EAAC,YANJ;AAOC,IAAA,QAAQ,EAAEX,YAPX;AAQC,IAAA,KAAK,EAAEb,MAAM,CAACf,UARf;AASC,IAAA,KAAK,EAAE0B,MAAM,CAAC1B,UAAP,IAAqB2B,OAAO,CAAC3B,UATrC;AAUC,IAAA,UAAU,EAAE2B,OAAO,CAAC3B,UAAR,IAAsB0B,MAAM,CAAC1B,UAV1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAaEM,QAAQ,CAAC6B,GAAT,CAAa,CAACK,OAAD,EAAUH,KAAV,kBACb,oBAAC,QAAD;AAAU,IAAA,GAAG,EAAEA,KAAf;AAAsB,IAAA,KAAK,EAAEG,OAAO,CAAC1B,EAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE0B,OAAO,CAACC,YADV,CADA,CAbF,CADD,CAzCD,eA8DC,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,SAAD;AACC,IAAA,SAAS,MADV;AAEC,IAAA,MAAM,MAFP;AAGC,IAAA,QAAQ,MAHT;AAIC,IAAA,OAAO,EAAC,UAJT;AAKC,IAAA,IAAI,EAAC,YALN;AAMC,IAAA,KAAK,EAAC,gBANP;AAOC,IAAA,EAAE,EAAC,YAPJ;AAQC,IAAA,QAAQ,EAAEb,YARX;AASC,IAAA,KAAK,EAAEb,MAAM,CAACX,UATf;AAUC,IAAA,KAAK,EAAEsB,MAAM,CAACtB,UAAP,IAAqBuB,OAAO,CAACvB,UAVrC;AAWC,IAAA,UAAU,EAAEuB,OAAO,CAACvB,UAAR,IAAsBsB,MAAM,CAACtB,UAX1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAcEI,uBAAuB,CAACkC,MAAxB,CAA+BC,eAAe,IAAIA,eAAe,CAACxC,UAAhB,KAA+BY,MAAM,CAACZ,UAAxF,EACCgC,GADD,CACK,CAACQ,eAAD,EAAkBN,KAAlB,kBACJ,oBAAC,QAAD;AAAU,IAAA,GAAG,EAAEA,KAAf;AAAsB,IAAA,KAAK,EAAEM,eAAe,CAAC7B,EAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE6B,eAAe,CAACC,cADlB,CAFD,CAdF,CADD,CA9DD,eAqFC,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,SAAD;AACC,IAAA,SAAS,MADV;AAEC,IAAA,IAAI,EAAC,MAFN;AAGC,IAAA,eAAe,EAAE;AAAEC,MAAAA,MAAM,EAAE;AAAV,KAHlB;AAIC,IAAA,OAAO,EAAC,UAJT;AAKC,IAAA,EAAE,EAAC,WALJ;AAMC,IAAA,IAAI,EAAC,WANN;AAOC,IAAA,KAAK,EAAC,WAPP;AAQC,IAAA,KAAK,EAAE9B,MAAM,CAACjB,SARf;AASC,IAAA,QAAQ,EAAE8B,YATX;AAUC,IAAA,MAAM,EAAEC,UAVT;AAWC,IAAA,KAAK,EAAEH,MAAM,CAAC5B,SAAP,IAAoB6B,OAAO,CAAC7B,SAXpC;AAYC,IAAA,UAAU,EAAE6B,OAAO,CAAC7B,SAAR,IAAqB4B,MAAM,CAAC5B,SAZzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,CArFD,eAsGC,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,SAAD;AACC,IAAA,SAAS,MADV;AAEC,IAAA,OAAO,EAAC,UAFT;AAGC,IAAA,EAAE,EAAC,eAHJ;AAIC,IAAA,IAAI,EAAC,eAJN;AAKC,IAAA,KAAK,EAAC,eALP;AAMC,IAAA,KAAK,EAAEiB,MAAM,CAAClB,aANf;AAOC,IAAA,QAAQ,EAAE+B,YAPX;AAQC,IAAA,MAAM,EAAEC,UART;AASC,IAAA,KAAK,EAAEH,MAAM,CAAC7B,aAAP,IAAwB8B,OAAO,CAAC9B,aATxC;AAUC,IAAA,UAAU,EAAE8B,OAAO,CAAC9B,aAAR,IAAyB6B,MAAM,CAAC7B,aAV7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,CAtGD,eAoHC,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,SAAD;AACC,IAAA,SAAS,MADV;AAEC,IAAA,OAAO,EAAC,UAFT;AAGC,IAAA,EAAE,EAAC,YAHJ;AAIC,IAAA,IAAI,EAAC,YAJN;AAKC,IAAA,KAAK,EAAC,YALP;AAMC,IAAA,KAAK,EAAEkB,MAAM,CAACtB,UANf;AAOC,IAAA,QAAQ,EAAEmC,YAPX;AAQC,IAAA,MAAM,EAAEC,UART;AASC,IAAA,KAAK,EAAEH,MAAM,CAACjC,UAAP,IAAqBkC,OAAO,CAAClC,UATrC;AAUC,IAAA,UAAU,EAAEkC,OAAO,CAAClC,UAAR,IAAsBiC,MAAM,CAACjC,UAV1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,CApHD,eAkIC,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,SAAS,MAApB;AAAqB,IAAA,SAAS,EAAEmB,OAAO,CAACkC,SAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,MAAD;AACC,IAAA,KAAK,EAAC,WADP;AAEC,IAAA,OAAO,EAAC,WAFT;AAGC,IAAA,IAAI,EAAC,QAHN;AAIC,IAAA,SAAS,eAAE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJZ;AAKC,IAAA,OAAO,EAAE,MAAMrC,OAAO,CAACU,MAAR,EALhB;AAMC,IAAA,gBAAgB,MANjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADD,CADD,eAaC,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,MAAD;AACC,IAAA,IAAI,EAAC,QADN;AAEC,IAAA,KAAK,EAAC,SAFP;AAGC,IAAA,OAAO,EAAC,WAHT;AAIC,IAAA,IAAI,EAAC,QAJN;AAKC,IAAA,SAAS,eAAE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALZ;AAMC,IAAA,IAAI,EAAC,gBANN;AAOC,IAAA,QAAQ,EAAEW,YAPX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADD,CAbD,CAlID,CAND,CArCF,CADD;AA8MA,CA3ND;;AA6NA,eAAezB,aAAf","sourcesContent":["import React from \"react\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport CustomSnackbar from '../CustomSnackbar'\nimport { Formik } from \"formik\";\nimport { commonStyles } from \"../commonStyles\";\nimport SaveIcon from \"@material-ui/icons/Save\";\nimport CancelIcon from \"@material-ui/icons/Cancel\";\nimport * as Yup from \"yup\";\nimport { format, startOfToday } from \"date-fns\";\nimport CustomCircularProgress from \"../CustomCircularProgress\";\n\nconst defaultDate = format(startOfToday(), 'yyyy-MM-dd')\n\n\nconst SaleSchema = Yup.object().shape({\n\tsale_price: Yup.number().min(0, 'Price must be greater than 0').required(\"Sale Price is required\"),\n\tsale_quantity: Yup.number().min(0, 'Quantity must be greater than 0').required(\"Sale Quantity is required\"),\n\tsale_date: Yup.date().required(\"Sale Date Required\"),\n\tproduct_id: Yup.string().trim().required(\"Product is Required\"),\n\tcontact_id: Yup.string().trim().required(\"Customer is Required\"),\n\tdeposit_id: Yup.string().trim(),\n});\n\n\nconst SaleInputForm = ({ products, contacts, customerAccountDeposits, history, saleToEdit, handleItemSubmit }) => {\n\n\tconst classes = commonStyles();\n\tconst saleValues = {\n\t\tid: saleToEdit.id,\n\t\tproduct_id: saleToEdit.product_id || '',\n\t\tcontact_id: saleToEdit.contact_id || '',\n\t\tdeposit_id: saleToEdit.deposit_id || '',\n\t\tsale_date: saleToEdit.sale_date || defaultDate,\n\t\tsale_price: saleToEdit.sale_price || '',\n\t\tsale_quantity: saleToEdit.sale_quantity || '',\n\t}\n\n\treturn (\n\t\t<Formik\n\t\t\tinitialValues={saleValues}\n\t\t\tenableReinitialize\n\t\t\tvalidationSchema={SaleSchema}\n\t\t\tonSubmit={async (values, { resetForm, setStatus }) => {\n\t\t\t\ttry {\n\t\t\t\t\tconst productSalesValues = {\n\t\t\t\t\t\tid: values.id,\n\t\t\t\t\t\tsale_price: values.sale_price,\n\t\t\t\t\t\tproduct_id: values.product_id,\n\t\t\t\t\t\tdeposit_id: values.deposit_id,\n\t\t\t\t\t\tsale_date: values.sale_date,\n\t\t\t\t\t\tcontact_id: values.contact_id,\n\t\t\t\t\t\tsale_quantity: values.sale_quantity,\n\t\t\t\t\t};\n\t\t\t\t\tawait handleItemSubmit(productSalesValues, \"sales\")\n\t\t\t\t\tresetForm({})\n\t\t\t\t\tif (values.id) {\n\t\t\t\t\t\thistory.goBack();\n\t\t\t\t\t}\n\t\t\t\t\tsetStatus({ sent: true, msg: \"Sale saved.\" })\n\t\t\t\t} catch (error) {\n\t\t\t\t\tsetStatus({ sent: false, msg: `Error! ${error}.` })\n\t\t\t\t}\n\t\t\t}}\n\t\t>\n\t\t\t{({\n\t\t\t\tvalues,\n\t\t\t\tstatus,\n\t\t\t\thandleSubmit,\n\t\t\t\tsetFieldValue,\n\t\t\t\terrors,\n\t\t\t\ttouched,\n\t\t\t\thandleChange,\n\t\t\t\thandleBlur,\n\t\t\t\tisSubmitting,\n\t\t\t}) => (\n\t\t\t\t<form\n\t\t\t\t\tclassName={classes.form}\n\t\t\t\t\tmethod=\"post\"\n\t\t\t\t\tid=\"meterInputForm\"\n\t\t\t\t\tonSubmit={handleSubmit}\n\t\t\t\t>\n\t\t\t\t\t<Grid\n\t\t\t\t\t\tcontainer\n\t\t\t\t\t\tspacing={2}\n\t\t\t\t\t\tjustify=\"center\"\n\t\t\t\t\t\talignItems=\"stretch\"\n\t\t\t\t\t\tdirection=\"column\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstatus && status.msg && (\n\t\t\t\t\t\t\t\t<CustomSnackbar\n\t\t\t\t\t\t\t\t\tvariant={status.sent ? \"success\" : \"error\"}\n\t\t\t\t\t\t\t\t\tmessage={status.msg}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tisSubmitting && (<CustomCircularProgress open={true} />)\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tselect\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tname=\"contact_id\"\n\t\t\t\t\t\t\t\tlabel=\"Customer\"\n\t\t\t\t\t\t\t\tid=\"contact_id\"\n\t\t\t\t\t\t\t\tonChange={(event) => {\n\t\t\t\t\t\t\t\t\tsetFieldValue('contact_id', event.target.value)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tvalue={values.contact_id}\n\t\t\t\t\t\t\t\terror={errors.contact_id && touched.contact_id}\n\t\t\t\t\t\t\t\thelperText={touched.contact_id && errors.contact_id}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{contacts.map((contact, index) => (\n\t\t\t\t\t\t\t\t\t<MenuItem key={index} value={contact.id}>\n\t\t\t\t\t\t\t\t\t\t{contact.first_name} {contact.last_name}\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</TextField>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tselect\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tname=\"product_id\"\n\t\t\t\t\t\t\t\tlabel=\"Product Name\"\n\t\t\t\t\t\t\t\tid=\"product_id\"\n\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\tvalue={values.product_id}\n\t\t\t\t\t\t\t\terror={errors.product_id && touched.product_id}\n\t\t\t\t\t\t\t\thelperText={touched.product_id && errors.product_id}\n\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{products.map((product, index) => (\n\t\t\t\t\t\t\t\t\t<MenuItem key={index} value={product.id}>\n\t\t\t\t\t\t\t\t\t\t{product.product_name}\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</TextField>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tselect\n\t\t\t\t\t\t\t\tmultiple\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tname=\"deposit_id\"\n\t\t\t\t\t\t\t\tlabel=\"Farmer Deposit\"\n\t\t\t\t\t\t\t\tid=\"deposit_id\"\n\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\tvalue={values.deposit_id}\n\t\t\t\t\t\t\t\terror={errors.deposit_id && touched.deposit_id}\n\t\t\t\t\t\t\t\thelperText={touched.deposit_id && errors.deposit_id}\n\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{customerAccountDeposits.filter(customerDeposit => customerDeposit.contact_id === values.contact_id)\n\t\t\t\t\t\t\t\t\t.map((customerDeposit, index) => (\n\t\t\t\t\t\t\t\t\t\t<MenuItem key={index} value={customerDeposit.id}>\n\t\t\t\t\t\t\t\t\t\t\t{customerDeposit.deposit_amount}\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</TextField>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\ttype=\"date\"\n\t\t\t\t\t\t\t\tInputLabelProps={{ shrink: true }}\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tid=\"sale_date\"\n\t\t\t\t\t\t\t\tname=\"sale_date\"\n\t\t\t\t\t\t\t\tlabel=\"Sale Date\"\n\t\t\t\t\t\t\t\tvalue={values.sale_date}\n\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\tonBlur={handleBlur}\n\t\t\t\t\t\t\t\terror={errors.sale_date && touched.sale_date}\n\t\t\t\t\t\t\t\thelperText={touched.sale_date && errors.sale_date}\n\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tid=\"sale_quantity\"\n\t\t\t\t\t\t\t\tname=\"sale_quantity\"\n\t\t\t\t\t\t\t\tlabel=\"Sale Quantity\"\n\t\t\t\t\t\t\t\tvalue={values.sale_quantity}\n\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\tonBlur={handleBlur}\n\t\t\t\t\t\t\t\terror={errors.sale_quantity && touched.sale_quantity}\n\t\t\t\t\t\t\t\thelperText={touched.sale_quantity && errors.sale_quantity}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\tid=\"sale_price\"\n\t\t\t\t\t\t\t\tname=\"sale_price\"\n\t\t\t\t\t\t\t\tlabel=\"Sale Price\"\n\t\t\t\t\t\t\t\tvalue={values.sale_price}\n\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\tonBlur={handleBlur}\n\t\t\t\t\t\t\t\terror={errors.sale_price && touched.sale_price}\n\t\t\t\t\t\t\t\thelperText={touched.sale_price && errors.sale_price}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t<Grid item container className={classes.buttonBox}>\n\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\tsize=\"medium\"\n\t\t\t\t\t\t\t\t\tstartIcon={<CancelIcon />}\n\t\t\t\t\t\t\t\t\tonClick={() => history.goBack()}\n\t\t\t\t\t\t\t\t\tdisableElevation\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\tsize=\"medium\"\n\t\t\t\t\t\t\t\t\tstartIcon={<SaveIcon />}\n\t\t\t\t\t\t\t\t\tform=\"meterInputForm\"\n\t\t\t\t\t\t\t\t\tdisabled={isSubmitting}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tSave\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t</form>\n\t\t\t)}\n\t\t</Formik>\n\t);\n};\n\nexport default SaleInputForm;\n"]},"metadata":{},"sourceType":"module"}