{"ast":null,"code":"var _jsxFileName = \"/home/brianmuciri/Projects/farm-ledger-ld/src/Routes/PropertyDetails.js\";\nimport React, { useEffect, useState } from \"react\";\nimport Layout from \"../components/PrivateLayout\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Grid from \"@material-ui/core/Grid\";\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Box from '@material-ui/core/Box';\nimport TextField from '@material-ui/core/TextField';\nimport Tab from '@material-ui/core/Tab';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Button from '@material-ui/core/Button';\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport UndoIcon from \"@material-ui/icons/Undo\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport ExportToExcelBtn from \"../components/ExportToExcelBtn\";\nimport { connect } from \"react-redux\";\nimport { handleDelete, handleItemFormSubmit } from \"../actions/actions\";\nimport IndividualPropertyIncomeStatement from \"./IndividualPropertyIncomeStament\";\nimport TabPanel from \"../components/TabPanel\";\nimport CommonTable from \"../components/table/commonTable\";\nimport { withRouter } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\nimport { commonStyles } from \"../components/commonStyles\";\nimport { getUnitTypes } from \"../assets/commonAssets.js\";\nimport PrintArrayToPdf from \"../components/PrintArrayToPdfBtn\";\nimport ImportItemsBtn from \"../components/ImportItemsBtn\";\nimport PropertySummaryPage from \"./PropertySummaryPage\";\nimport PropertySettingsForm from \"../components/property/PropertySettingsForm\";\nconst UNIT_TYPES = getUnitTypes();\nconst headCells = [{\n  id: \"ref\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Unit Ref/Number\"\n}, {\n  id: \"beds\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Beds\"\n}, {\n  id: \"baths\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Baths\"\n}, {\n  id: \"sqm\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Floor Area\"\n}, {\n  id: \"rent_amount\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Rent Amount\"\n}, {\n  id: \"tenant_name\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Tenant\"\n}, {\n  id: \"tenant_id_number\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Tenant ID Number\"\n}, {\n  id: \"edit\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Edit\"\n}, {\n  id: \"delete\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Delete\"\n}];\n\nlet PropertyDetailsPage = ({\n  propertyUnits,\n  propertyActiveLeasesNumber,\n  propertySettings,\n  rentalPayments,\n  expenses,\n  propertyToShowDetails,\n  users,\n  match,\n  handleItemSubmit,\n  handleItemDelete\n}) => {\n  const classes = commonStyles();\n  const [propertyUnitsItems, setPropertyUnitItems] = useState([]);\n  const [filteredPropertyItems, setFilteredPropertyUnitsItems] = useState([]);\n  const [propertyRefFilter, setPropertyRefFilter] = useState(\"\");\n  const [unitTypeFilter, setPropertyTypeFilter] = useState(\"\");\n  const [occupiedStatusFilter, setOccupiedStatusFilter] = useState(\"all\");\n  const [selected, setSelected] = useState([]);\n  const [tabValue, setTabValue] = React.useState(0);\n\n  const handleTabChange = (event, newValue) => {\n    setTabValue(newValue);\n  };\n\n  useEffect(() => {\n    setPropertyUnitItems(propertyUnits);\n    setFilteredPropertyUnitsItems(propertyUnits);\n  }, [propertyUnits]);\n\n  const handleSearchFormSubmit = event => {\n    event.preventDefault(); //filter the propertyUnits according to the search criteria here\n\n    let filteredPropertyUnits = propertyUnitsItems.filter(({\n      ref\n    }) => !propertyRefFilter ? true : ref === propertyRefFilter).filter(({\n      unit_type\n    }) => !unitTypeFilter ? true : unit_type === unitTypeFilter).filter(({\n      lease_id\n    }) => occupiedStatusFilter === \"all\" ? true : occupiedStatusFilter === \"occupied\" ? lease_id : !lease_id);\n    setFilteredPropertyUnitsItems(filteredPropertyUnits);\n  };\n\n  const resetSearchForm = event => {\n    event.preventDefault();\n    setFilteredPropertyUnitsItems(propertyUnitsItems);\n    setPropertyRefFilter(\"\");\n    setPropertyTypeFilter(\"\");\n    setOccupiedStatusFilter(\"all\");\n  };\n\n  return /*#__PURE__*/React.createElement(Layout, {\n    pageTitle: \"Property Details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(AppBar, {\n    position: \"static\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Tabs, {\n    value: tabValue,\n    onChange: handleTabChange,\n    \"aria-label\": \"simple tabs example\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Tab, {\n    label: \"Summary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Tab, {\n    label: \"Rental Units\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Tab, {\n    label: \"Financials\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Tab, {\n    label: \"Payment Settings\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(TabPanel, {\n    value: tabValue,\n    index: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(PropertySettingsForm, {\n    classes: classes,\n    propertySettings: propertySettings,\n    propertyToShowDetails: propertyToShowDetails,\n    handleItemSubmit: handleItemSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(TabPanel, {\n    value: tabValue,\n    index: 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(PropertySummaryPage, {\n    propertyToShowDetails: propertyToShowDetails,\n    rentalPayments: rentalPayments,\n    propertyUnits: propertyUnitsItems,\n    users: users,\n    propertyActiveLeasesNumber: propertyActiveLeasesNumber,\n    classes: classes,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(TabPanel, {\n    value: tabValue,\n    index: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IndividualPropertyIncomeStatement, {\n    propertyUnits: propertyUnits,\n    rentalPayments: rentalPayments,\n    expenses: expenses,\n    classes: classes,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(TabPanel, {\n    value: tabValue,\n    index: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 3,\n    justify: \"space-evenly\",\n    alignItems: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 25\n    }\n  }, \"Rental Units\")), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    item: true,\n    alignItems: \"center\",\n    direction: \"row\",\n    key: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    color: \"primary\",\n    variant: \"contained\",\n    size: \"medium\",\n    startIcon: /*#__PURE__*/React.createElement(AddIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 44\n      }\n    }),\n    component: Link,\n    to: `${match.url}/new`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 29\n    }\n  }, \"NEW\")), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    color: \"primary\",\n    variant: \"contained\",\n    size: \"medium\",\n    startIcon: /*#__PURE__*/React.createElement(EditIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 44\n      }\n    }),\n    disabled: !selected.length,\n    component: Link,\n    to: `${match.url}/${selected[0]}/edit`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 29\n    }\n  }, \"Edit\")), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(PrintArrayToPdf, {\n    disabled: !selected.length,\n    reportName: 'Rental Units Records',\n    reportTitle: 'Rental Units Data',\n    headCells: headCells,\n    dataToPrint: propertyUnitsItems.filter(({\n      id\n    }) => selected.includes(id)),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(ExportToExcelBtn, {\n    disabled: !selected.length,\n    reportName: 'Rental Units Records',\n    reportTitle: 'Rental Units Data',\n    headCells: headCells,\n    dataToPrint: propertyUnitsItems.filter(({\n      id\n    }) => selected.includes(id)),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(ImportItemsBtn, {\n    baseObjectToAddProperties: {\n      property_id: propertyToShowDetails.id\n    },\n    savingUrl: \"property_units\",\n    text: \"Upload Units\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    border: 1,\n    borderRadius: \"borderRadius\",\n    borderColor: \"grey.400\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: classes.form,\n    id: \"propertySearchForm\",\n    onSubmit: handleSearchFormSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    justify: \"center\",\n    direction: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    md: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    select: true,\n    variant: \"outlined\",\n    name: \"unit_type\",\n    label: \"Unit Type\",\n    id: \"unit_type\",\n    onChange: event => {\n      setPropertyTypeFilter(event.target.value);\n    },\n    value: unitTypeFilter,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 41\n    }\n  }, UNIT_TYPES.map((unit_type, index) => /*#__PURE__*/React.createElement(MenuItem, {\n    key: index,\n    value: unit_type.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 53\n    }\n  }, unit_type.displayValue)))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    md: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    variant: \"outlined\",\n    id: \"property_ref\",\n    name: \"property_ref\",\n    label: \"Unit Ref\",\n    value: propertyRefFilter,\n    onChange: event => {\n      setPropertyRefFilter(event.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 41\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    md: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    select: true,\n    variant: \"outlined\",\n    id: \"occupied_status\",\n    name: \"occupied_status\",\n    label: \"Occupied Status\",\n    value: occupiedStatusFilter,\n    onChange: event => {\n      setOccupiedStatusFilter(event.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    key: 1,\n    value: \"all\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 45\n    }\n  }, \"All\"), /*#__PURE__*/React.createElement(MenuItem, {\n    key: 2,\n    value: \"occupied\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 45\n    }\n  }, \"Occupied\"), /*#__PURE__*/React.createElement(MenuItem, {\n    key: 3,\n    value: \"vacant\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 45\n    }\n  }, \"Vacant\")))), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    item: true,\n    justify: \"flex-end\",\n    alignItems: \"center\",\n    direction: \"row\",\n    key: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    form: \"propertySearchForm\",\n    color: \"primary\",\n    variant: \"contained\",\n    size: \"medium\",\n    startIcon: /*#__PURE__*/React.createElement(SearchIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 56\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 41\n    }\n  }, \"SEARCH\")), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: event => {\n      resetSearchForm(event);\n    },\n    type: \"reset\",\n    form: \"propertySearchForm\",\n    color: \"primary\",\n    variant: \"contained\",\n    size: \"medium\",\n    startIcon: /*#__PURE__*/React.createElement(UndoIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 56\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 41\n    }\n  }, \"RESET\")))))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(CommonTable, {\n    selected: selected,\n    setSelected: setSelected,\n    rows: filteredPropertyItems,\n    headCells: headCells,\n    deleteUrl: 'property_units',\n    handleDelete: handleItemDelete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 25\n    }\n  })))));\n};\n\nconst mapStateToProps = (state, ownProps) => {\n  const unitsInProperty = state.propertyUnits.filter(({\n    property_id\n  }) => property_id === ownProps.match.params.propertyId).map(({\n    id\n  }) => id);\n  const propertyActiveLeases = state.leases.filter(({\n    property_id\n  }) => property_id === ownProps.match.params.propertyId).filter(({\n    terminated\n  }) => terminated !== true);\n  return {\n    rentalPayments: state.rentalPayments.filter(({\n      unit_id\n    }) => unitsInProperty.includes(unit_id)),\n    expenses: state.expenses.filter(({\n      property_id\n    }) => property_id === ownProps.match.params.propertyId),\n    propertyToShowDetails: state.properties.find(({\n      id\n    }) => id === ownProps.match.params.propertyId) || {},\n    propertyUnits: state.propertyUnits.filter(({\n      id\n    }) => unitsInProperty.includes(id)).map(property_unit => {\n      const latestUnitLease = propertyActiveLeases.find(({\n        unit_id\n      }) => unit_id === property_unit.id) || {};\n      const tenant = state.contacts.find(({\n        id\n      }) => Array.isArray(latestUnitLease.tenants) ? latestUnitLease.tenants.includes(id) : false);\n      return Object.assign({}, property_unit, {\n        tenant_name: tenant ? `${tenant.first_name} ${tenant.last_name}` : '-',\n        tenant_id_number: tenant ? tenant.id_number : '-',\n        lease_id: latestUnitLease.id,\n        rent_amount: latestUnitLease.rent_amount\n      });\n    }).sort((unit1, unit2) => unit1.ref < unit2.ref ? -1 : unit1.ref > unit2.ref ? 1 : 0),\n    propertyActiveLeasesNumber: propertyActiveLeases.length,\n    propertySettings: state.propertySettings.find(({\n      property_id\n    }) => property_id === ownProps.match.params.propertyId) || {},\n    users: state.users\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    handleItemSubmit: (item, url) => dispatch(handleItemFormSubmit(item, url)),\n    handleItemDelete: (itemId, url) => dispatch(handleDelete(itemId, url))\n  };\n};\n\nPropertyDetailsPage = connect(mapStateToProps, mapDispatchToProps)(PropertyDetailsPage);\nexport default withRouter(PropertyDetailsPage);","map":{"version":3,"sources":["/home/brianmuciri/Projects/farm-ledger-ld/src/Routes/PropertyDetails.js"],"names":["React","useEffect","useState","Layout","Typography","Grid","MenuItem","Box","TextField","Tab","AppBar","Tabs","Button","EditIcon","SearchIcon","UndoIcon","AddIcon","ExportToExcelBtn","connect","handleDelete","handleItemFormSubmit","IndividualPropertyIncomeStatement","TabPanel","CommonTable","withRouter","Link","commonStyles","getUnitTypes","PrintArrayToPdf","ImportItemsBtn","PropertySummaryPage","PropertySettingsForm","UNIT_TYPES","headCells","id","numeric","disablePadding","label","PropertyDetailsPage","propertyUnits","propertyActiveLeasesNumber","propertySettings","rentalPayments","expenses","propertyToShowDetails","users","match","handleItemSubmit","handleItemDelete","classes","propertyUnitsItems","setPropertyUnitItems","filteredPropertyItems","setFilteredPropertyUnitsItems","propertyRefFilter","setPropertyRefFilter","unitTypeFilter","setPropertyTypeFilter","occupiedStatusFilter","setOccupiedStatusFilter","selected","setSelected","tabValue","setTabValue","handleTabChange","event","newValue","handleSearchFormSubmit","preventDefault","filteredPropertyUnits","filter","ref","unit_type","lease_id","resetSearchForm","url","length","includes","property_id","form","target","value","map","index","displayValue","mapStateToProps","state","ownProps","unitsInProperty","params","propertyId","propertyActiveLeases","leases","terminated","unit_id","properties","find","property_unit","latestUnitLease","tenant","contacts","Array","isArray","tenants","Object","assign","tenant_name","first_name","last_name","tenant_id_number","id_number","rent_amount","sort","unit1","unit2","mapDispatchToProps","dispatch","item","itemId"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Layout from \"../components/PrivateLayout\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Grid from \"@material-ui/core/Grid\";\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Box from '@material-ui/core/Box';\nimport TextField from '@material-ui/core/TextField';\nimport Tab from '@material-ui/core/Tab';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Button from '@material-ui/core/Button';\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport UndoIcon from \"@material-ui/icons/Undo\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport ExportToExcelBtn from \"../components/ExportToExcelBtn\";\nimport { connect } from \"react-redux\";\nimport { handleDelete, handleItemFormSubmit } from \"../actions/actions\";\nimport IndividualPropertyIncomeStatement from \"./IndividualPropertyIncomeStament\";\nimport TabPanel from \"../components/TabPanel\";\nimport CommonTable from \"../components/table/commonTable\";\nimport { withRouter } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\nimport { commonStyles } from \"../components/commonStyles\";\nimport { getUnitTypes } from \"../assets/commonAssets.js\";\nimport PrintArrayToPdf from \"../components/PrintArrayToPdfBtn\";\nimport ImportItemsBtn from \"../components/ImportItemsBtn\";\nimport PropertySummaryPage from \"./PropertySummaryPage\";\nimport PropertySettingsForm from \"../components/property/PropertySettingsForm\";\n\nconst UNIT_TYPES = getUnitTypes();\n\nconst headCells = [\n    { id: \"ref\", numeric: false, disablePadding: true, label: \"Unit Ref/Number\" },\n    { id: \"beds\", numeric: false, disablePadding: true, label: \"Beds\" },\n    { id: \"baths\", numeric: false, disablePadding: true, label: \"Baths\" },\n    { id: \"sqm\", numeric: false, disablePadding: true, label: \"Floor Area\" },\n    { id: \"rent_amount\", numeric: false, disablePadding: true, label: \"Rent Amount\" },\n    { id: \"tenant_name\", numeric: false, disablePadding: true, label: \"Tenant\" },\n    { id: \"tenant_id_number\", numeric: false, disablePadding: true, label: \"Tenant ID Number\" },\n    { id: \"edit\", numeric: false, disablePadding: true, label: \"Edit\" },\n    { id: \"delete\", numeric: false, disablePadding: true, label: \"Delete\" },\n];\n\nlet PropertyDetailsPage = ({\n    propertyUnits,\n    propertyActiveLeasesNumber,\n    propertySettings,\n    rentalPayments,\n    expenses,\n    propertyToShowDetails,\n    users,\n    match,\n    handleItemSubmit,\n    handleItemDelete\n}) => {\n    const classes = commonStyles()\n    const [propertyUnitsItems, setPropertyUnitItems] = useState([])\n    const [filteredPropertyItems, setFilteredPropertyUnitsItems] = useState([])\n    const [propertyRefFilter, setPropertyRefFilter] = useState(\"\");\n    const [unitTypeFilter, setPropertyTypeFilter] = useState(\"\");\n    const [occupiedStatusFilter, setOccupiedStatusFilter] = useState(\"all\");\n    const [selected, setSelected] = useState([]);\n    const [tabValue, setTabValue] = React.useState(0);\n\n\n    const handleTabChange = (event, newValue) => {\n        setTabValue(newValue);\n    };\n\n\n    useEffect(() => {\n        setPropertyUnitItems(propertyUnits)\n        setFilteredPropertyUnitsItems(propertyUnits)\n    }, [propertyUnits])\n\n\n    const handleSearchFormSubmit = (event) => {\n        event.preventDefault();\n        //filter the propertyUnits according to the search criteria here\n        let filteredPropertyUnits = propertyUnitsItems\n            .filter(({ ref }) => !propertyRefFilter ? true : ref === propertyRefFilter)\n            .filter(({ unit_type }) => !unitTypeFilter ? true : unit_type === unitTypeFilter)\n            .filter(({ lease_id }) => occupiedStatusFilter === \"all\" ? true :\n                occupiedStatusFilter === \"occupied\" ? lease_id : !lease_id)\n\n        setFilteredPropertyUnitsItems(filteredPropertyUnits);\n    };\n\n    const resetSearchForm = (event) => {\n        event.preventDefault();\n        setFilteredPropertyUnitsItems(propertyUnitsItems);\n        setPropertyRefFilter(\"\");\n        setPropertyTypeFilter(\"\");\n        setOccupiedStatusFilter(\"all\");\n    };\n\n    return (\n        <Layout pageTitle=\"Property Details\">\n            <AppBar position=\"static\">\n                <Tabs value={tabValue} onChange={handleTabChange} aria-label=\"simple tabs example\">\n                    <Tab label=\"Summary\" />\n                    <Tab label=\"Rental Units\" />\n                    <Tab label=\"Financials\" />\n                    <Tab label=\"Payment Settings\" />\n                </Tabs>\n            </AppBar>\n            <TabPanel value={tabValue} index={3}>\n                <PropertySettingsForm classes={classes} propertySettings={propertySettings} propertyToShowDetails={propertyToShowDetails}\n                    handleItemSubmit={handleItemSubmit} />\n            </TabPanel>\n            <TabPanel value={tabValue} index={0}>\n                <PropertySummaryPage propertyToShowDetails={propertyToShowDetails} rentalPayments={rentalPayments}\n                    propertyUnits={propertyUnitsItems} users={users} propertyActiveLeasesNumber={propertyActiveLeasesNumber} classes={classes} />\n            </TabPanel>\n            <TabPanel value={tabValue} index={2}>\n                <IndividualPropertyIncomeStatement propertyUnits={propertyUnits}\n                    rentalPayments={rentalPayments} expenses={expenses} classes={classes} />\n            </TabPanel>\n            <TabPanel value={tabValue} index={1}>\n                <Grid\n                    container\n                    spacing={3}\n                    justify=\"space-evenly\"\n                    alignItems=\"center\"\n                >\n                    <Grid item xs={12}>\n                        <Typography variant=\"h6\">Rental Units</Typography>\n                    </Grid>\n                    <Grid\n                        container\n                        spacing={2}\n                        item\n                        alignItems=\"center\"\n                        direction=\"row\"\n                        key={1}\n                    >\n                        <Grid item>\n                            <Button\n                                type=\"button\"\n                                color=\"primary\"\n                                variant=\"contained\"\n                                size=\"medium\"\n                                startIcon={<AddIcon />}\n                                component={Link}\n                                to={`${match.url}/new`}\n                            >\n                                NEW\n                            </Button>\n                        </Grid>\n                        <Grid item>\n                            <Button\n                                type=\"button\"\n                                color=\"primary\"\n                                variant=\"contained\"\n                                size=\"medium\"\n                                startIcon={<EditIcon />}\n                                disabled={!selected.length}\n                                component={Link}\n                                to={`${match.url}/${selected[0]}/edit`}\n                            >\n                                Edit\n                            </Button>\n                        </Grid>\n                        <Grid item>\n                            <PrintArrayToPdf\n                                disabled={!selected.length}\n                                reportName={'Rental Units Records'}\n                                reportTitle={'Rental Units Data'}\n                                headCells={headCells}\n                                dataToPrint={propertyUnitsItems.filter(({ id }) => selected.includes(id))}\n                            />\n                        </Grid>\n                        <Grid item>\n                            <ExportToExcelBtn\n                                disabled={!selected.length}\n                                reportName={'Rental Units Records'}\n                                reportTitle={'Rental Units Data'}\n                                headCells={headCells}\n                                dataToPrint={propertyUnitsItems.filter(({ id }) => selected.includes(id))}\n                            />\n                        </Grid>\n                        <Grid item>\n                            <ImportItemsBtn\n                                baseObjectToAddProperties={{ property_id: propertyToShowDetails.id }}\n                                savingUrl=\"property_units\"\n                                text=\"Upload Units\"\n                            />\n                        </Grid>\n                    </Grid>\n                    <Grid item xs={12}>\n                        <Box\n                            border={1}\n                            borderRadius=\"borderRadius\"\n                            borderColor=\"grey.400\"\n                        >\n                            <form\n                                className={classes.form}\n                                id=\"propertySearchForm\"\n                                onSubmit={handleSearchFormSubmit}\n                            >\n                                <Grid\n                                    container\n                                    spacing={2}\n                                    justify=\"center\"\n                                    direction=\"row\"\n                                >\n                                    <Grid item xs={12} md>\n                                        <TextField\n                                            fullWidth\n                                            select\n                                            variant=\"outlined\"\n                                            name=\"unit_type\"\n                                            label=\"Unit Type\"\n                                            id=\"unit_type\"\n                                            onChange={(event) => {\n                                                setPropertyTypeFilter(\n                                                    event.target.value\n                                                );\n                                            }}\n                                            value={unitTypeFilter}\n                                        >\n                                            {UNIT_TYPES.map(\n                                                (unit_type, index) => (\n                                                    <MenuItem key={index} value={unit_type.id}>\n                                                        {unit_type.displayValue}\n                                                    </MenuItem>\n                                                )\n                                            )}\n                                        </TextField>\n                                    </Grid>\n                                    <Grid item xs={12} md>\n                                        <TextField\n                                            fullWidth\n                                            variant=\"outlined\"\n                                            id=\"property_ref\"\n                                            name=\"property_ref\"\n                                            label=\"Unit Ref\"\n                                            value={propertyRefFilter}\n                                            onChange={(event) => {\n                                                setPropertyRefFilter(\n                                                    event.target.value\n                                                );\n                                            }}\n                                        />\n                                    </Grid>\n                                    <Grid item xs={12} md>\n                                        <TextField\n                                            fullWidth\n                                            select\n                                            variant=\"outlined\"\n                                            id=\"occupied_status\"\n                                            name=\"occupied_status\"\n                                            label=\"Occupied Status\"\n                                            value={occupiedStatusFilter}\n                                            onChange={(event) => {\n                                                setOccupiedStatusFilter(\n                                                    event.target.value\n                                                );\n                                            }}>\n                                            <MenuItem key={1} value=\"all\">All</MenuItem>\n                                            <MenuItem key={2} value=\"occupied\">Occupied</MenuItem>\n                                            <MenuItem key={3} value=\"vacant\">Vacant</MenuItem>\n                                        </TextField>\n                                    </Grid>\n                                </Grid>\n                                <Grid\n                                    container\n                                    spacing={2}\n                                    item\n                                    justify=\"flex-end\"\n                                    alignItems=\"center\"\n                                    direction=\"row\"\n                                    key={1}\n                                >\n                                    <Grid item>\n                                        <Button\n                                            type=\"submit\"\n                                            form=\"propertySearchForm\"\n                                            color=\"primary\"\n                                            variant=\"contained\"\n                                            size=\"medium\"\n                                            startIcon={<SearchIcon />}\n                                        >\n                                            SEARCH\n                                        </Button>\n                                    </Grid>\n                                    <Grid item>\n                                        <Button\n                                            onClick={(event) => {\n                                                resetSearchForm(event);\n                                            }}\n                                            type=\"reset\"\n                                            form=\"propertySearchForm\"\n                                            color=\"primary\"\n                                            variant=\"contained\"\n                                            size=\"medium\"\n                                            startIcon={<UndoIcon />}\n                                        >\n                                            RESET\n                                        </Button>\n                                    </Grid>\n                                </Grid>\n                            </form>\n                        </Box>\n                    </Grid>\n                    <Grid item xs={12}>\n                        <CommonTable\n                            selected={selected}\n                            setSelected={setSelected}\n                            rows={filteredPropertyItems}\n                            headCells={headCells}\n                            deleteUrl={'property_units'}\n                            handleDelete={handleItemDelete}\n                        />\n                    </Grid>\n                </Grid>\n            </TabPanel>\n        </Layout>\n    );\n};\n\nconst mapStateToProps = (state, ownProps) => {\n    const unitsInProperty = state.propertyUnits\n        .filter(({ property_id }) => property_id === ownProps.match.params.propertyId)\n        .map(({ id }) => id)\n    const propertyActiveLeases = state.leases\n        .filter(({ property_id }) => property_id === ownProps.match.params.propertyId)\n        .filter(({ terminated }) => terminated !== true)\n    return {\n        rentalPayments: state.rentalPayments.filter(({ unit_id }) => unitsInProperty.includes(unit_id)),\n        expenses: state.expenses.filter(({ property_id }) => property_id === ownProps.match.params.propertyId),\n        propertyToShowDetails: state.properties.find(({ id }) => id === ownProps.match.params.propertyId) || {},\n        propertyUnits: state.propertyUnits.filter(({ id }) => unitsInProperty.includes(id))\n            .map((property_unit) => {\n                const latestUnitLease = propertyActiveLeases\n                    .find(({ unit_id }) => unit_id === property_unit.id) || {}\n                const tenant = state.contacts.find(\n                    ({ id }) => Array.isArray(latestUnitLease.tenants) ? latestUnitLease.tenants.includes(id) : false)\n                return Object.assign(\n                    {},\n                    property_unit,\n                    {\n                        tenant_name: tenant ? `${tenant.first_name} ${tenant.last_name}` : '-',\n                        tenant_id_number: tenant ? tenant.id_number : '-',\n                        lease_id: latestUnitLease.id,\n                        rent_amount: latestUnitLease.rent_amount,\n                    });\n            }\n            ).sort((unit1, unit2) => unit1.ref < unit2.ref ? -1 : unit1.ref > unit2.ref ? 1 : 0),\n        propertyActiveLeasesNumber: propertyActiveLeases.length,\n        propertySettings: state.propertySettings.find(({ property_id }) => property_id === ownProps.match.params.propertyId) || {},\n        users: state.users,\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        handleItemSubmit: (item, url) => dispatch(handleItemFormSubmit(item, url)),\n        handleItemDelete: (itemId, url) => dispatch(handleDelete(itemId, url)),\n    };\n};\n\nPropertyDetailsPage = connect(mapStateToProps, mapDispatchToProps)(PropertyDetailsPage);\n\nexport default withRouter(PropertyDetailsPage);\n"]},"metadata":{},"sourceType":"module"}