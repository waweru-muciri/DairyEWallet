{"ast":null,"code":"var _jsxFileName = \"/home/brianmuciri/Projects/farm-ledger-ld/src/Routes/RentAdjustModal.js\";\nimport React from \"react\";\nimport Grid from \"@material-ui/core/Grid\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport SaveIcon from \"@material-ui/icons/Save\";\nimport CancelIcon from \"@material-ui/icons/Cancel\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport FormLabel from \"@material-ui/core/FormLabel\";\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\nimport Radio from \"@material-ui/core/Radio\";\nimport CustomSnackbar from '../components/CustomSnackbar';\nimport * as Yup from \"yup\";\nimport { Formik } from \"formik\";\nimport { commonStyles } from \"../components/commonStyles.js\";\nconst RentAdjustSchema = Yup.object().shape({\n  increase_or_decrease: Yup.string().trim().required('Adjust choice is Required'),\n  adjust_method: Yup.string().trim().required(\"Method is required\"),\n  fixed_adjust_amount: Yup.number().typeError('Amount must be a number').when('adjust_method', {\n    is: 'fixed_amount',\n    then: Yup.number().min(0).required('Amount is required')\n  }),\n  adjust_percentage: Yup.number().typeError('Percentage must be a number').when('adjust_method', {\n    is: 'percentage',\n    then: Yup.number().min(0).max(100, \"Percentage must be less <= 100\").required('Percentage is required')\n  })\n});\nexport default function RentAdjustModal(props) {\n  const classes = commonStyles();\n  const {\n    leasesToAdjustRentAmounts,\n    open,\n    handleClose,\n    handleItemSubmit\n  } = props;\n  const rentAdjustValues = {\n    increase_or_decrease: \"increase\",\n    adjust_method: \"fixed_amount\",\n    adjust_percentage: \"\",\n    fixed_adjust_amount: \"\"\n  };\n  return /*#__PURE__*/React.createElement(Dialog, {\n    fullWidth: true,\n    maxWidth: \"sm\",\n    open: open,\n    onClose: handleClose,\n    \"aria-labelledby\": \"form-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DialogTitle, {\n    id: \"alert-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }, \" Adjust Rent Amounts\"), /*#__PURE__*/React.createElement(DialogContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Formik, {\n    initialValues: rentAdjustValues,\n    validationSchema: RentAdjustSchema,\n    onSubmit: async (values, {\n      resetForm,\n      setStatus\n    }) => {\n      try {\n        leasesToAdjustRentAmounts.forEach(async leaseToAdjust => {\n          const currentRentAmount = parseFloat(leaseToAdjust.rent_amount) || 0;\n          let rentAmountToAdjustBy = 0;\n\n          if (values.adjust_method === \"percentage\") {\n            rentAmountToAdjustBy = currentRentAmount * values.adjust_percentage / 100;\n          } else {\n            rentAmountToAdjustBy = parseFloat(values.fixed_adjust_amount);\n          }\n\n          const newRentAmount = values.increase_or_decrease === \"increase\" ? currentRentAmount + rentAmountToAdjustBy : currentRentAmount - rentAmountToAdjustBy;\n          const leaseWithAdjustedRentAmount = Object.assign({}, leaseToAdjust, {\n            rent_amount: newRentAmount\n          });\n          await handleItemSubmit(leaseWithAdjustedRentAmount, 'leases');\n        });\n        resetForm({});\n        setStatus({\n          sent: true,\n          msg: \"Rent Amounts Adjusted successfully.\"\n        });\n        handleClose();\n      } catch (error) {\n        setStatus({\n          sent: false,\n          msg: `Error! ${error}.`\n        });\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 17\n    }\n  }, ({\n    values,\n    status,\n    handleSubmit,\n    touched,\n    errors,\n    handleChange,\n    handleBlur,\n    isSubmitting\n  }) => /*#__PURE__*/React.createElement(\"form\", {\n    className: classes.form,\n    method: \"post\",\n    id: \"rentAdjustForm\",\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    direction: \"column\",\n    spacing: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 29\n    }\n  }, status && status.msg && /*#__PURE__*/React.createElement(CustomSnackbar, {\n    variant: status.sent ? \"success\" : \"error\",\n    message: status.msg,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 41\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    item: true,\n    direction: \"column\",\n    spacing: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(FormControl, {\n    component: \"fieldset\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(FormLabel, {\n    component: \"legend\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 45\n    }\n  }, \"Increase/Decrease Rent Amount\"), /*#__PURE__*/React.createElement(RadioGroup, {\n    \"aria-label\": \"Increase or Decrease\",\n    name: \"increase_or_decrease\",\n    value: values.increase_or_decrease,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(FormControlLabel, {\n    value: \"increase\",\n    control: /*#__PURE__*/React.createElement(Radio, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 93\n      }\n    }),\n    label: \"Increase\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 49\n    }\n  }), /*#__PURE__*/React.createElement(FormControlLabel, {\n    value: \"decrease\",\n    control: /*#__PURE__*/React.createElement(Radio, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 93\n      }\n    }),\n    label: \"Decrease\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 49\n    }\n  })))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(FormControl, {\n    component: \"fieldset\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(FormLabel, {\n    component: \"legend\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 45\n    }\n  }, \"Adjust Rent Amount By\"), /*#__PURE__*/React.createElement(RadioGroup, {\n    \"aria-label\": \"Adjust Method\",\n    name: \"adjust_method\",\n    value: values.adjust_method,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(FormControlLabel, {\n    value: \"fixed_amount\",\n    control: /*#__PURE__*/React.createElement(Radio, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 97\n      }\n    }),\n    label: \"Fixed Amount\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 49\n    }\n  }), /*#__PURE__*/React.createElement(FormControlLabel, {\n    value: \"percentage\",\n    control: /*#__PURE__*/React.createElement(Radio, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 95\n      }\n    }),\n    label: \"Percentage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 49\n    }\n  })))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    md: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 37\n    }\n  }, values.adjust_method === \"fixed_amount\" ? /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    label: \"Amount to Adjust Rent\",\n    variant: \"outlined\",\n    type: \"text\",\n    value: values.fixed_adjust_amount,\n    id: \"fixed_adjust_amount\",\n    name: \"fixed_adjust_amount\",\n    onChange: handleChange,\n    onBlur: handleBlur,\n    error: errors.fixed_adjust_amount && touched.fixed_adjust_amount,\n    helperText: touched.fixed_adjust_amount && errors.fixed_adjust_amount,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 49\n    }\n  }) : /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    label: \"Percentage to Adjust Rent\",\n    variant: \"outlined\",\n    type: \"text\",\n    value: values.adjust_percentage,\n    name: \"adjust_percentage\",\n    onChange: handleChange,\n    onBlur: handleBlur,\n    error: errors.adjust_percentage && touched.adjust_percentage,\n    helperText: touched.adjust_percentage && errors.adjust_percentage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 49\n    }\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    container: true,\n    direction: \"row\",\n    className: classes.buttonBox,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"contained\",\n    size: \"medium\",\n    startIcon: /*#__PURE__*/React.createElement(CancelIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 56\n      }\n    }),\n    onClick: () => {\n      handleClose();\n    },\n    disableElevation: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 41\n    }\n  }, \"Cancel\")), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    color: \"primary\",\n    variant: \"contained\",\n    size: \"medium\",\n    startIcon: /*#__PURE__*/React.createElement(SaveIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 56\n      }\n    }),\n    form: \"rentAdjustForm\",\n    disabled: isSubmitting,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 41\n    }\n  }, \"Adjust Rent\"))))))));\n}","map":{"version":3,"sources":["/home/brianmuciri/Projects/farm-ledger-ld/src/Routes/RentAdjustModal.js"],"names":["React","Grid","TextField","Button","SaveIcon","CancelIcon","Dialog","DialogTitle","DialogContent","FormControl","FormControlLabel","FormLabel","RadioGroup","Radio","CustomSnackbar","Yup","Formik","commonStyles","RentAdjustSchema","object","shape","increase_or_decrease","string","trim","required","adjust_method","fixed_adjust_amount","number","typeError","when","is","then","min","adjust_percentage","max","RentAdjustModal","props","classes","leasesToAdjustRentAmounts","open","handleClose","handleItemSubmit","rentAdjustValues","values","resetForm","setStatus","forEach","leaseToAdjust","currentRentAmount","parseFloat","rent_amount","rentAmountToAdjustBy","newRentAmount","leaseWithAdjustedRentAmount","Object","assign","sent","msg","error","status","handleSubmit","touched","errors","handleChange","handleBlur","isSubmitting","form","buttonBox"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,QAAP,MAAqB,yBAArB;AACA,OAAOC,UAAP,MAAuB,2BAAvB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAOC,aAAP,MAA0B,iCAA1B;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAOC,gBAAP,MAA6B,oCAA7B;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,OAAOC,cAAP,MAA2B,8BAA3B;AACA,OAAO,KAAKC,GAAZ,MAAqB,KAArB;AACA,SAASC,MAAT,QAAuB,QAAvB;AACA,SAASC,YAAT,QAA6B,+BAA7B;AAGA,MAAMC,gBAAgB,GAAGH,GAAG,CAACI,MAAJ,GAAaC,KAAb,CAAmB;AACxCC,EAAAA,oBAAoB,EAAEN,GAAG,CAACO,MAAJ,GAAaC,IAAb,GAAoBC,QAApB,CAA6B,2BAA7B,CADkB;AAExCC,EAAAA,aAAa,EAAEV,GAAG,CAACO,MAAJ,GAAaC,IAAb,GAAoBC,QAApB,CAA6B,oBAA7B,CAFyB;AAGxCE,EAAAA,mBAAmB,EAAEX,GAAG,CAACY,MAAJ,GAAaC,SAAb,CAAuB,yBAAvB,EAChBC,IADgB,CACX,eADW,EACM;AAAEC,IAAAA,EAAE,EAAE,cAAN;AAAsBC,IAAAA,IAAI,EAAEhB,GAAG,CAACY,MAAJ,GAAaK,GAAb,CAAiB,CAAjB,EAAoBR,QAApB,CAA6B,oBAA7B;AAA5B,GADN,CAHmB;AAKxCS,EAAAA,iBAAiB,EAAElB,GAAG,CAACY,MAAJ,GAAaC,SAAb,CAAuB,6BAAvB,EACdC,IADc,CACT,eADS,EACQ;AACnBC,IAAAA,EAAE,EAAE,YADe;AAEnBC,IAAAA,IAAI,EAAEhB,GAAG,CAACY,MAAJ,GAAaK,GAAb,CAAiB,CAAjB,EAAoBE,GAApB,CAAwB,GAAxB,EAA6B,gCAA7B,EACDV,QADC,CACQ,wBADR;AAFa,GADR;AALqB,CAAnB,CAAzB;AAcA,eAAe,SAASW,eAAT,CAAyBC,KAAzB,EAAgC;AAC3C,QAAMC,OAAO,GAAGpB,YAAY,EAA5B;AACA,QAAM;AAAEqB,IAAAA,yBAAF;AAA6BC,IAAAA,IAA7B;AAAmCC,IAAAA,WAAnC;AAAgDC,IAAAA;AAAhD,MAAqEL,KAA3E;AAEA,QAAMM,gBAAgB,GAAG;AACrBrB,IAAAA,oBAAoB,EAAE,UADD;AAErBI,IAAAA,aAAa,EAAE,cAFM;AAGrBQ,IAAAA,iBAAiB,EAAE,EAHE;AAIrBP,IAAAA,mBAAmB,EAAE;AAJA,GAAzB;AAOA,sBACI,oBAAC,MAAD;AACI,IAAA,SAAS,MADb;AAEI,IAAA,QAAQ,EAAC,IAFb;AAGI,IAAA,IAAI,EAAEa,IAHV;AAII,IAAA,OAAO,EAAEC,WAJb;AAKI,uBAAgB,mBALpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAOI,oBAAC,WAAD;AAAa,IAAA,EAAE,EAAC,oBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAPJ,eAQI,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,MAAD;AACI,IAAA,aAAa,EAAEE,gBADnB;AAEI,IAAA,gBAAgB,EAAExB,gBAFtB;AAGI,IAAA,QAAQ,EAAE,OAAOyB,MAAP,EAAe;AAAEC,MAAAA,SAAF;AAAaC,MAAAA;AAAb,KAAf,KAA4C;AAClD,UAAI;AACAP,QAAAA,yBAAyB,CAACQ,OAA1B,CAAkC,MAAMC,aAAN,IAAuB;AACrD,gBAAMC,iBAAiB,GAAGC,UAAU,CAACF,aAAa,CAACG,WAAf,CAAV,IAAyC,CAAnE;AACA,cAAIC,oBAAoB,GAAG,CAA3B;;AACA,cAAIR,MAAM,CAAClB,aAAP,KAAyB,YAA7B,EAA2C;AACvC0B,YAAAA,oBAAoB,GAAIH,iBAAiB,GAAGL,MAAM,CAACV,iBAA5B,GAAiD,GAAxE;AACH,WAFD,MAEO;AACHkB,YAAAA,oBAAoB,GAAGF,UAAU,CAACN,MAAM,CAACjB,mBAAR,CAAjC;AACH;;AACD,gBAAM0B,aAAa,GAAGT,MAAM,CAACtB,oBAAP,KAAgC,UAAhC,GACjB2B,iBAAiB,GAAGG,oBADH,GAC4BH,iBAAiB,GAAGG,oBADtE;AAEA,gBAAME,2BAA2B,GAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBR,aAAlB,EAAiC;AAAEG,YAAAA,WAAW,EAAEE;AAAf,WAAjC,CAApC;AACA,gBAAMX,gBAAgB,CAACY,2BAAD,EAA8B,QAA9B,CAAtB;AACH,SAZD;AAaAT,QAAAA,SAAS,CAAC,EAAD,CAAT;AACAC,QAAAA,SAAS,CAAC;AAAEW,UAAAA,IAAI,EAAE,IAAR;AAAcC,UAAAA,GAAG,EAAE;AAAnB,SAAD,CAAT;AACAjB,QAAAA,WAAW;AACd,OAjBD,CAiBE,OAAOkB,KAAP,EAAc;AACZb,QAAAA,SAAS,CAAC;AAAEW,UAAAA,IAAI,EAAE,KAAR;AAAeC,UAAAA,GAAG,EAAG,UAASC,KAAM;AAApC,SAAD,CAAT;AACH;AACJ,KAxBL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAyBK,CAAC;AACEf,IAAAA,MADF;AAEEgB,IAAAA,MAFF;AAGEC,IAAAA,YAHF;AAIEC,IAAAA,OAJF;AAKEC,IAAAA,MALF;AAMEC,IAAAA,YANF;AAOEC,IAAAA,UAPF;AAQEC,IAAAA;AARF,GAAD,kBAUG;AACI,IAAA,SAAS,EAAE5B,OAAO,CAAC6B,IADvB;AAEI,IAAA,MAAM,EAAC,MAFX;AAGI,IAAA,EAAE,EAAC,gBAHP;AAII,IAAA,QAAQ,EAAEN,YAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAMI,oBAAC,IAAD;AACI,IAAA,SAAS,MADb;AAEI,IAAA,SAAS,EAAC,QAFd;AAGI,IAAA,OAAO,EAAE,CAHb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAMQD,MAAM,IAAIA,MAAM,CAACF,GAAjB,iBACI,oBAAC,cAAD;AACI,IAAA,OAAO,EAAEE,MAAM,CAACH,IAAP,GAAc,SAAd,GAA0B,OADvC;AAEI,IAAA,OAAO,EAAEG,MAAM,CAACF,GAFpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPZ,eAaI,oBAAC,IAAD;AAAM,IAAA,SAAS,MAAf;AAAgB,IAAA,IAAI,MAApB;AAAqB,IAAA,SAAS,EAAC,QAA/B;AAAwC,IAAA,OAAO,EAAE,CAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,WAAD;AAAa,IAAA,SAAS,EAAC,UAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,SAAD;AAAW,IAAA,SAAS,EAAC,QAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCADJ,eAEI,oBAAC,UAAD;AAAY,kBAAW,sBAAvB;AAA8C,IAAA,IAAI,EAAC,sBAAnD;AACI,IAAA,KAAK,EAAEd,MAAM,CAACtB,oBADlB;AACwC,IAAA,QAAQ,EAAE0C,YADlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEI,oBAAC,gBAAD;AAAkB,IAAA,KAAK,EAAC,UAAxB;AAAmC,IAAA,OAAO,eAAE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAA5C;AAAuD,IAAA,KAAK,EAAC,UAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,eAGI,oBAAC,gBAAD;AAAkB,IAAA,KAAK,EAAC,UAAxB;AAAmC,IAAA,OAAO,eAAE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAA5C;AAAuD,IAAA,KAAK,EAAC,UAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHJ,CAFJ,CADJ,CADJ,eAWI,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,WAAD;AAAa,IAAA,SAAS,EAAC,UAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,SAAD;AAAW,IAAA,SAAS,EAAC,QAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADJ,eAEI,oBAAC,UAAD;AAAY,kBAAW,eAAvB;AAAuC,IAAA,IAAI,EAAC,eAA5C;AACI,IAAA,KAAK,EAAEpB,MAAM,CAAClB,aADlB;AACiC,IAAA,QAAQ,EAAEsC,YAD3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEI,oBAAC,gBAAD;AAAkB,IAAA,KAAK,EAAC,cAAxB;AAAuC,IAAA,OAAO,eAAE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAhD;AAA2D,IAAA,KAAK,EAAC,cAAjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,eAGI,oBAAC,gBAAD;AAAkB,IAAA,KAAK,EAAC,YAAxB;AAAqC,IAAA,OAAO,eAAE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAA9C;AAAyD,IAAA,KAAK,EAAC,YAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHJ,CAFJ,CADJ,CAXJ,eAqBI,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAmB,IAAA,EAAE,MAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEQpB,MAAM,CAAClB,aAAP,KAAyB,cAAzB,gBACI,oBAAC,SAAD;AACI,IAAA,SAAS,MADb;AAEI,IAAA,KAAK,EAAC,uBAFV;AAGI,IAAA,OAAO,EAAC,UAHZ;AAII,IAAA,IAAI,EAAC,MAJT;AAKI,IAAA,KAAK,EAAEkB,MAAM,CAACjB,mBALlB;AAMI,IAAA,EAAE,EAAC,qBANP;AAOI,IAAA,IAAI,EAAC,qBAPT;AAQI,IAAA,QAAQ,EAAEqC,YARd;AASI,IAAA,MAAM,EAAEC,UATZ;AAUI,IAAA,KAAK,EAAEF,MAAM,CAACpC,mBAAP,IAA8BmC,OAAO,CAACnC,mBAVjD;AAWI,IAAA,UAAU,EAAEmC,OAAO,CAACnC,mBAAR,IAA+BoC,MAAM,CAACpC,mBAXtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,gBAeI,oBAAC,SAAD;AACI,IAAA,SAAS,MADb;AAEI,IAAA,KAAK,EAAC,2BAFV;AAGI,IAAA,OAAO,EAAC,UAHZ;AAII,IAAA,IAAI,EAAC,MAJT;AAKI,IAAA,KAAK,EAAEiB,MAAM,CAACV,iBALlB;AAMI,IAAA,IAAI,EAAC,mBANT;AAOI,IAAA,QAAQ,EAAE8B,YAPd;AAQI,IAAA,MAAM,EAAEC,UARZ;AASI,IAAA,KAAK,EAAEF,MAAM,CAAC7B,iBAAP,IAA4B4B,OAAO,CAAC5B,iBAT/C;AAUI,IAAA,UAAU,EAAE4B,OAAO,CAAC5B,iBAAR,IAA6B6B,MAAM,CAAC7B,iBAVpD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAjBZ,CArBJ,CAbJ,eAkEI,oBAAC,IAAD;AACI,IAAA,IAAI,MADR;AAEI,IAAA,SAAS,MAFb;AAGI,IAAA,SAAS,EAAC,KAHd;AAII,IAAA,SAAS,EAAEI,OAAO,CAAC8B,SAJvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAMI,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,MAAD;AACI,IAAA,KAAK,EAAC,WADV;AAEI,IAAA,OAAO,EAAC,WAFZ;AAGI,IAAA,IAAI,EAAC,QAHT;AAII,IAAA,SAAS,eAAE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJf;AAKI,IAAA,OAAO,EAAE,MAAM;AAAE3B,MAAAA,WAAW;AAAI,KALpC;AAMI,IAAA,gBAAgB,MANpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,CANJ,eAkBI,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,MAAD;AACI,IAAA,IAAI,EAAC,QADT;AAEI,IAAA,KAAK,EAAC,SAFV;AAGI,IAAA,OAAO,EAAC,WAHZ;AAII,IAAA,IAAI,EAAC,QAJT;AAKI,IAAA,SAAS,eAAE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALf;AAMI,IAAA,IAAI,EAAC,gBANT;AAOI,IAAA,QAAQ,EAAEyB,YAPd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADJ,CAlBJ,CAlEJ,CANJ,CAnCR,CADJ,CARJ,CADJ;AA4JH","sourcesContent":["import React from \"react\";\nimport Grid from \"@material-ui/core/Grid\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport SaveIcon from \"@material-ui/icons/Save\";\nimport CancelIcon from \"@material-ui/icons/Cancel\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport FormLabel from \"@material-ui/core/FormLabel\";\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\nimport Radio from \"@material-ui/core/Radio\";\nimport CustomSnackbar from '../components/CustomSnackbar'\nimport * as Yup from \"yup\";\nimport { Formik } from \"formik\";\nimport { commonStyles } from \"../components/commonStyles.js\";\n\n\nconst RentAdjustSchema = Yup.object().shape({\n    increase_or_decrease: Yup.string().trim().required('Adjust choice is Required'),\n    adjust_method: Yup.string().trim().required(\"Method is required\"),\n    fixed_adjust_amount: Yup.number().typeError('Amount must be a number')\n        .when('adjust_method', { is: 'fixed_amount', then: Yup.number().min(0).required('Amount is required') }),\n    adjust_percentage: Yup.number().typeError('Percentage must be a number')\n        .when('adjust_method', {\n            is: 'percentage',\n            then: Yup.number().min(0).max(100, \"Percentage must be less <= 100\")\n                .required('Percentage is required')\n        }),\n\n});\n\nexport default function RentAdjustModal(props) {\n    const classes = commonStyles();\n    const { leasesToAdjustRentAmounts, open, handleClose, handleItemSubmit } = props\n\n    const rentAdjustValues = {\n        increase_or_decrease: \"increase\",\n        adjust_method: \"fixed_amount\",\n        adjust_percentage: \"\",\n        fixed_adjust_amount: \"\",\n    }\n\n    return (\n        <Dialog\n            fullWidth\n            maxWidth=\"sm\"\n            open={open}\n            onClose={handleClose}\n            aria-labelledby=\"form-dialog-title\"\n        >\n            <DialogTitle id=\"alert-dialog-title\"> Adjust Rent Amounts</DialogTitle>\n            <DialogContent>\n                <Formik\n                    initialValues={rentAdjustValues}\n                    validationSchema={RentAdjustSchema}\n                    onSubmit={async (values, { resetForm, setStatus }) => {\n                        try {\n                            leasesToAdjustRentAmounts.forEach(async leaseToAdjust => {\n                                const currentRentAmount = parseFloat(leaseToAdjust.rent_amount) || 0\n                                let rentAmountToAdjustBy = 0;\n                                if (values.adjust_method === \"percentage\") {\n                                    rentAmountToAdjustBy = (currentRentAmount * values.adjust_percentage) / 100\n                                } else {\n                                    rentAmountToAdjustBy = parseFloat(values.fixed_adjust_amount)\n                                }\n                                const newRentAmount = values.increase_or_decrease === \"increase\" ?\n                                    (currentRentAmount + rentAmountToAdjustBy) : (currentRentAmount - rentAmountToAdjustBy)\n                                const leaseWithAdjustedRentAmount = Object.assign({}, leaseToAdjust, { rent_amount: newRentAmount })\n                                await handleItemSubmit(leaseWithAdjustedRentAmount, 'leases')\n                            });\n                            resetForm({});\n                            setStatus({ sent: true, msg: \"Rent Amounts Adjusted successfully.\" })\n                            handleClose()\n                        } catch (error) {\n                            setStatus({ sent: false, msg: `Error! ${error}.` })\n                        }\n                    }}>\n                    {({\n                        values,\n                        status,\n                        handleSubmit,\n                        touched,\n                        errors,\n                        handleChange,\n                        handleBlur,\n                        isSubmitting,\n                    }) => (\n                        <form\n                            className={classes.form}\n                            method=\"post\"\n                            id=\"rentAdjustForm\"\n                            onSubmit={handleSubmit}\n                        >\n                            <Grid\n                                container\n                                direction=\"column\"\n                                spacing={2}\n                            >\n                                {\n                                    status && status.msg && (\n                                        <CustomSnackbar\n                                            variant={status.sent ? \"success\" : \"error\"}\n                                            message={status.msg}\n                                        />\n                                    )\n                                }\n                                <Grid container item direction=\"column\" spacing={2}>\n                                    <Grid item>\n                                        <FormControl component=\"fieldset\">\n                                            <FormLabel component=\"legend\">Increase/Decrease Rent Amount</FormLabel>\n                                            <RadioGroup aria-label=\"Increase or Decrease\" name=\"increase_or_decrease\"\n                                                value={values.increase_or_decrease} onChange={handleChange}>\n                                                <FormControlLabel value=\"increase\" control={<Radio />} label=\"Increase\" />\n                                                <FormControlLabel value=\"decrease\" control={<Radio />} label=\"Decrease\" />\n                                            </RadioGroup>\n                                        </FormControl>\n                                    </Grid>\n                                    <Grid item>\n                                        <FormControl component=\"fieldset\">\n                                            <FormLabel component=\"legend\">Adjust Rent Amount By</FormLabel>\n                                            <RadioGroup aria-label=\"Adjust Method\" name=\"adjust_method\"\n                                                value={values.adjust_method} onChange={handleChange}>\n                                                <FormControlLabel value=\"fixed_amount\" control={<Radio />} label=\"Fixed Amount\" />\n                                                <FormControlLabel value=\"percentage\" control={<Radio />} label=\"Percentage\" />\n                                            </RadioGroup>\n                                        </FormControl>\n                                    </Grid>\n                                    <Grid item xs={12} md>\n                                        {\n                                            values.adjust_method === \"fixed_amount\" ?\n                                                <TextField\n                                                    fullWidth\n                                                    label=\"Amount to Adjust Rent\"\n                                                    variant=\"outlined\"\n                                                    type=\"text\"\n                                                    value={values.fixed_adjust_amount}\n                                                    id='fixed_adjust_amount'\n                                                    name='fixed_adjust_amount'\n                                                    onChange={handleChange}\n                                                    onBlur={handleBlur}\n                                                    error={errors.fixed_adjust_amount && touched.fixed_adjust_amount}\n                                                    helperText={touched.fixed_adjust_amount && errors.fixed_adjust_amount}\n                                                />\n                                                :\n                                                <TextField\n                                                    fullWidth\n                                                    label=\"Percentage to Adjust Rent\"\n                                                    variant=\"outlined\"\n                                                    type=\"text\"\n                                                    value={values.adjust_percentage}\n                                                    name='adjust_percentage'\n                                                    onChange={handleChange}\n                                                    onBlur={handleBlur}\n                                                    error={errors.adjust_percentage && touched.adjust_percentage}\n                                                    helperText={touched.adjust_percentage && errors.adjust_percentage}\n                                                />\n                                        }\n                                    </Grid>\n                                </Grid>\n                                <Grid\n                                    item\n                                    container\n                                    direction=\"row\"\n                                    className={classes.buttonBox}\n                                >\n                                    <Grid item>\n                                        <Button\n                                            color=\"secondary\"\n                                            variant=\"contained\"\n                                            size=\"medium\"\n                                            startIcon={<CancelIcon />}\n                                            onClick={() => { handleClose() }}\n                                            disableElevation\n                                        >\n                                            Cancel\n\t\t\t\t\t\t\t\t\t    </Button>\n                                    </Grid>\n                                    <Grid item>\n                                        <Button\n                                            type=\"submit\"\n                                            color=\"primary\"\n                                            variant=\"contained\"\n                                            size=\"medium\"\n                                            startIcon={<SaveIcon />}\n                                            form=\"rentAdjustForm\"\n                                            disabled={isSubmitting}\n                                        >\n                                            Adjust Rent\n\t\t\t\t\t\t\t\t        </Button>\n                                    </Grid>\n                                </Grid>\n                            </Grid>\n                        </form>\n                    )}\n                </Formik>\n            </DialogContent>\n        </Dialog >\n    );\n}"]},"metadata":{},"sourceType":"module"}