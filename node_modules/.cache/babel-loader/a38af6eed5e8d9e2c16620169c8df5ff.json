{"ast":null,"code":"var _jsxFileName = \"/home/brianmuciri/Projects/farm-ledger-ld/src/Routes/MeterReadings.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport UndoIcon from \"@material-ui/icons/Undo\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport { Grid, TextField, Button, MenuItem, Box } from \"@material-ui/core\";\nimport { handleDelete, itemsFetchData } from \"../actions/actions\";\nimport CommonTable from \"../components/table/commonTable\";\nimport { withRouter } from \"react-router-dom\";\nimport { commonStyles } from \"../components/commonStyles\";\nimport { connect } from \"react-redux\";\nimport ExportToExcelBtn from \"../components/ExportToExcelBtn\";\nimport Layout from \"../components/PrivateLayout\";\nimport PageHeading from \"../components/PageHeading\";\nimport PrintArrayToPdf from \"../components/PrintArrayToPdfBtn\";\nimport { getStartEndDatesForPeriod, getTransactionsFilterOptions } from \"../assets/commonAssets\";\nimport { parse, isWithinInterval } from \"date-fns\";\nconst TRANSACTIONS_FILTER_OPTIONS = getTransactionsFilterOptions();\nconst meterReadingsTableHeadCells = [{\n  id: \"reading_date\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Date Recorded\"\n}, {\n  id: \"unit_ref\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Unit Number/Ref\"\n}, {\n  id: \"tenant_name\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Tenant Name\"\n}, {\n  id: \"tenant_id_number\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Tenant Id Number\"\n}, {\n  id: \"meter_type\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Meter Type\"\n}, {\n  id: \"prior_value\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Prior Value\"\n}, {\n  id: \"current_value\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Curent Value\"\n}, {\n  id: \"usage\",\n  numeric: true,\n  disablePadding: true,\n  label: \"Usage\"\n}, {\n  id: \"base_charge\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Base Charge\"\n}, {\n  id: \"unit_charge\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Unit Charge\"\n}, {\n  id: \"amount\",\n  numeric: true,\n  disablePadding: true,\n  label: \"Amount(Ksh)\"\n}, {\n  id: \"edit\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Edit\"\n}, {\n  id: \"delete\",\n  numeric: false,\n  disablePadding: true,\n  label: \"Delete\"\n}];\n\nlet MeterReadingsPage = ({\n  fetchData,\n  meterReadings,\n  handleItemDelete,\n  properties,\n  match\n}) => {\n  const classes = commonStyles();\n  let [meterReadingItems, setMeterReadingItems] = useState([]);\n  let [filteredMeterReadingItems, setFilteredMeterReadingItems] = useState([]);\n  let [productNameFilter, setProductNameFilter] = useState(\"\");\n  const [selected, setSelected] = useState([]);\n  useEffect(() => {\n    fetchData(['meter_readings']);\n  }, [fetchData]);\n  useEffect(() => {\n    setMeterReadingItems(meterReadings);\n    setFilteredMeterReadingItems(filterMeterReadingsByCriteria(meterReadings));\n  }, [meterReadings]);\n\n  const filterMeterReadingsByCriteria = meterReadingsToFilter => {\n    let filteredMeterReadings = meterReadingsToFilter.filter(({\n      product_name\n    }) => !productNameFilter ? true : product_name.toLowerCase().includes(productNameFilter.toLowerCase()));\n    return filteredMeterReadings;\n  };\n\n  const handleSearchFormSubmit = event => {\n    event.preventDefault(); //filter the meterReadings here according to search criteria\n\n    setFilteredMeterReadingItems(filterMeterReadingsByCriteria(meterReadingItems));\n  };\n\n  const resetSearchForm = event => {\n    event.preventDefault();\n    setFromDateFilter(\"\");\n    setPeriodFilter(\"month-to-date\");\n    setToDateFilter(\"\");\n    setMeterTypeFilter(\"\");\n    setPropertyFilter(\"all\");\n  };\n\n  return /*#__PURE__*/React.createElement(Layout, {\n    pageTitle: \"Products\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 3,\n    alignItems: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    lg: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(PageHeading, {\n    text: \"Products\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    item: true,\n    alignItems: \"center\",\n    direction: \"row\",\n    key: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    color: \"primary\",\n    variant: \"contained\",\n    size: \"medium\",\n    startIcon: /*#__PURE__*/React.createElement(AddIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 40\n      }\n    }),\n    component: Link,\n    to: `${match.url}/new`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 25\n    }\n  }, \"NEW\")), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    color: \"primary\",\n    variant: \"contained\",\n    size: \"medium\",\n    startIcon: /*#__PURE__*/React.createElement(EditIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 40\n      }\n    }),\n    disabled: !selected.length,\n    component: Link,\n    to: `${match.url}/${selected[0]}/edit`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 25\n    }\n  }, \"Edit\")), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(PrintArrayToPdf, {\n    disabled: !selected.length,\n    reportName: 'Products Records',\n    reportTitle: 'Products Records',\n    headCells: meterReadingsTableHeadCells,\n    dataToPrint: meterReadingItems.filter(({\n      id\n    }) => selected.includes(id)),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    border: 1,\n    borderRadius: \"borderRadius\",\n    borderColor: \"grey.400\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: classes.form,\n    id: \"contactSearchForm\",\n    onSubmit: handleSearchFormSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    justify: \"center\",\n    direction: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    item: true,\n    spacing: 2,\n    justify: \"center\",\n    direction: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    container: true,\n    direction: \"row\",\n    xs: 12,\n    md: 6,\n    spacing: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    variant: \"outlined\",\n    id: \"contact_first_name\",\n    name: \"contact_first_name\",\n    label: \"Product Name\",\n    value: firstNameFilter,\n    onChange: event => {\n      setProductNameFilter(event.target.value.trim());\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 45\n    }\n  })))), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    item: true,\n    justify: \"flex-end\",\n    alignItems: \"center\",\n    direction: \"row\",\n    key: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: event => handleSearchFormSubmit(event),\n    type: \"submit\",\n    form: \"contactSearchForm\",\n    color: \"primary\",\n    variant: \"contained\",\n    size: \"medium\",\n    startIcon: /*#__PURE__*/React.createElement(SearchIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 56\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 41\n    }\n  }, \"SEARCH\")), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: event => resetSearchForm(event),\n    type: \"reset\",\n    form: \"propertySearchForm\",\n    color: \"primary\",\n    variant: \"contained\",\n    size: \"medium\",\n    startIcon: /*#__PURE__*/React.createElement(UndoIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 56\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 41\n    }\n  }, \"RESET\"))))))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(CommonTable, {\n    selected: selected,\n    setSelected: setSelected,\n    rows: filteredMeterReadingItems,\n    headCells: meterReadingsTableHeadCells,\n    handleDelete: handleItemDelete,\n    deleteUrl: \"products\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 21\n    }\n  }))));\n};\n\nconst mapStateToProps = state => {\n  return {\n    products: state.products\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    fetchData: collectionsUrls => dispatch(itemsFetchData(collectionsUrls)),\n    handleItemDelete: (itemId, url) => dispatch(handleDelete(itemId, url))\n  };\n};\n\nMeterReadingsPage = connect(mapStateToProps, mapDispatchToProps)(MeterReadingsPage);\nexport default withRouter(MeterReadingsPage);","map":{"version":3,"sources":["/home/brianmuciri/Projects/farm-ledger-ld/src/Routes/MeterReadings.js"],"names":["React","useEffect","useState","Link","EditIcon","SearchIcon","UndoIcon","AddIcon","Grid","TextField","Button","MenuItem","Box","handleDelete","itemsFetchData","CommonTable","withRouter","commonStyles","connect","ExportToExcelBtn","Layout","PageHeading","PrintArrayToPdf","getStartEndDatesForPeriod","getTransactionsFilterOptions","parse","isWithinInterval","TRANSACTIONS_FILTER_OPTIONS","meterReadingsTableHeadCells","id","numeric","disablePadding","label","MeterReadingsPage","fetchData","meterReadings","handleItemDelete","properties","match","classes","meterReadingItems","setMeterReadingItems","filteredMeterReadingItems","setFilteredMeterReadingItems","productNameFilter","setProductNameFilter","selected","setSelected","filterMeterReadingsByCriteria","meterReadingsToFilter","filteredMeterReadings","filter","product_name","toLowerCase","includes","handleSearchFormSubmit","event","preventDefault","resetSearchForm","setFromDateFilter","setPeriodFilter","setToDateFilter","setMeterTypeFilter","setPropertyFilter","url","length","form","firstNameFilter","target","value","trim","mapStateToProps","state","products","mapDispatchToProps","dispatch","collectionsUrls","itemId"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport UndoIcon from \"@material-ui/icons/Undo\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport { Grid, TextField, Button, MenuItem, Box } from \"@material-ui/core\";\nimport { handleDelete, itemsFetchData } from \"../actions/actions\";\nimport CommonTable from \"../components/table/commonTable\";\nimport { withRouter } from \"react-router-dom\";\nimport { commonStyles } from \"../components/commonStyles\";\nimport { connect } from \"react-redux\";\nimport ExportToExcelBtn from \"../components/ExportToExcelBtn\";\nimport Layout from \"../components/PrivateLayout\";\nimport PageHeading from \"../components/PageHeading\";\nimport PrintArrayToPdf from \"../components/PrintArrayToPdfBtn\";\nimport { getStartEndDatesForPeriod, getTransactionsFilterOptions } from \"../assets/commonAssets\";\nimport { parse, isWithinInterval } from \"date-fns\";\n\n\nconst TRANSACTIONS_FILTER_OPTIONS = getTransactionsFilterOptions()\n\n\nconst meterReadingsTableHeadCells = [\n    { id: \"reading_date\", numeric: false, disablePadding: true, label: \"Date Recorded\" },\n    { id: \"unit_ref\", numeric: false, disablePadding: true, label: \"Unit Number/Ref\" },\n    { id: \"tenant_name\", numeric: false, disablePadding: true, label: \"Tenant Name\" },\n    { id: \"tenant_id_number\", numeric: false, disablePadding: true, label: \"Tenant Id Number\" },\n    { id: \"meter_type\", numeric: false, disablePadding: true, label: \"Meter Type\" },\n    { id: \"prior_value\", numeric: false, disablePadding: true, label: \"Prior Value\" },\n    { id: \"current_value\", numeric: false, disablePadding: true, label: \"Curent Value\" },\n    { id: \"usage\", numeric: true, disablePadding: true, label: \"Usage\" },\n    { id: \"base_charge\", numeric: false, disablePadding: true, label: \"Base Charge\" },\n    { id: \"unit_charge\", numeric: false, disablePadding: true, label: \"Unit Charge\" },\n    { id: \"amount\", numeric: true, disablePadding: true, label: \"Amount(Ksh)\" },\n    { id: \"edit\", numeric: false, disablePadding: true, label: \"Edit\" },\n    { id: \"delete\", numeric: false, disablePadding: true, label: \"Delete\" },\n];\n\nlet MeterReadingsPage = ({\n    fetchData,\n    meterReadings,\n    handleItemDelete,\n    properties,\n    match,\n}) => {\n    const classes = commonStyles();\n    let [meterReadingItems, setMeterReadingItems] = useState([]);\n    let [filteredMeterReadingItems, setFilteredMeterReadingItems] = useState([]);\n    let [productNameFilter, setProductNameFilter] = useState(\"\");\n    const [selected, setSelected] = useState([]);\n\n\n    useEffect(() => {\n        fetchData(['meter_readings']);\n    }, [fetchData]);\n\n    useEffect(() => {\n        setMeterReadingItems(meterReadings);\n        setFilteredMeterReadingItems(filterMeterReadingsByCriteria(meterReadings));\n    }, [meterReadings]);\n\n    const filterMeterReadingsByCriteria = (meterReadingsToFilter) => {\n        let filteredMeterReadings = meterReadingsToFilter\n        .filter(({ product_name }) =>\n                !productNameFilter ? true : product_name.toLowerCase().includes(productNameFilter.toLowerCase())\n            )\n        return filteredMeterReadings;\n    }\n\n    const handleSearchFormSubmit = (event) => {\n        event.preventDefault();\n        //filter the meterReadings here according to search criteria\n        setFilteredMeterReadingItems(filterMeterReadingsByCriteria(meterReadingItems));\n    };\n\n    const resetSearchForm = (event) => {\n        event.preventDefault();\n        setFromDateFilter(\"\");\n        setPeriodFilter(\"month-to-date\");\n        setToDateFilter(\"\");\n        setMeterTypeFilter(\"\");\n        setPropertyFilter(\"all\");\n    };\n\n    return (\n        <Layout pageTitle=\"Products\">\n            <Grid\n                container\n                spacing={3}\n                alignItems=\"center\"\n            >\n                <Grid item lg={12}>\n                    <PageHeading text=\"Products\" />\n                </Grid>\n                <Grid\n                    container\n                    spacing={2}\n                    item\n                    alignItems=\"center\"\n                    direction=\"row\"\n                    key={1}\n                >\n                    <Grid item>\n                        <Button\n                            type=\"button\"\n                            color=\"primary\"\n                            variant=\"contained\"\n                            size=\"medium\"\n                            startIcon={<AddIcon />}\n                            component={Link}\n                            to={`${match.url}/new`}\n                        >\n                            NEW\n                        </Button>\n                    </Grid>\n                    <Grid item>\n                        <Button\n                            type=\"button\"\n                            color=\"primary\"\n                            variant=\"contained\"\n                            size=\"medium\"\n                            startIcon={<EditIcon />}\n                            disabled={!selected.length}\n                            component={Link}\n                            to={`${match.url}/${selected[0]}/edit`}\n                        >\n                            Edit\n                        </Button>\n                    </Grid>\n                    <Grid item>\n                        <PrintArrayToPdf\n                            disabled={!selected.length}\n                            reportName={'Products Records'}\n                            reportTitle={'Products Records'}\n                            headCells={meterReadingsTableHeadCells}\n                            dataToPrint={meterReadingItems.filter(({ id }) => selected.includes(id))}\n                        />\n                    </Grid>\n                </Grid>\n                <Grid item xs={12}>\n                    <Box\n                        border={1}\n                        borderRadius=\"borderRadius\"\n                        borderColor=\"grey.400\"\n                    >\n                        <form\n                            className={classes.form}\n                            id=\"contactSearchForm\"\n                            onSubmit={handleSearchFormSubmit}\n                        >\n                            <Grid\n                                container\n                                spacing={2}\n                                justify=\"center\"\n                                direction=\"column\"\n                            >\n                                <Grid\n                                    container\n                                    item\n                                    spacing={2}\n                                    justify=\"center\"\n                                    direction=\"row\"\n                                >\n                                    <Grid item container direction=\"row\" xs={12} md={6} spacing={2}>\n                                        <Grid item xs={12} md={6}>\n                                            <TextField\n                                                fullWidth\n                                                variant=\"outlined\"\n                                                id=\"contact_first_name\"\n                                                name=\"contact_first_name\"\n                                                label=\"Product Name\"\n                                                value={firstNameFilter}\n                                                onChange={(event) => {\n                                                    setProductNameFilter(\n                                                        event.target.value.trim()\n                                                    );\n                                                }}\n                                            />\n                                        </Grid>\n                                    </Grid>\n\n                                </Grid>\n                                <Grid\n                                    container\n                                    spacing={2}\n                                    item\n                                    justify=\"flex-end\"\n                                    alignItems=\"center\"\n                                    direction=\"row\"\n                                    key={1}\n                                >\n                                    <Grid item>\n                                        <Button\n                                            onClick={(event) => handleSearchFormSubmit(event)}\n                                            type=\"submit\"\n                                            form=\"contactSearchForm\"\n                                            color=\"primary\"\n                                            variant=\"contained\"\n                                            size=\"medium\"\n                                            startIcon={<SearchIcon />}\n                                        >\n                                            SEARCH\n                                        </Button>\n                                    </Grid>\n                                    <Grid item>\n                                        <Button\n                                            onClick={(event) =>\n                                                resetSearchForm(event)\n                                            }\n                                            type=\"reset\"\n                                            form=\"propertySearchForm\"\n                                            color=\"primary\"\n                                            variant=\"contained\"\n                                            size=\"medium\"\n                                            startIcon={<UndoIcon />}\n                                        >\n                                            RESET\n                                        </Button>\n                                    </Grid>\n                                </Grid>\n                            </Grid>\n                        </form>\n                    </Box>\n                </Grid>\n                <Grid item xs={12}>\n                    <CommonTable\n                        selected={selected}\n                        setSelected={setSelected}\n                        rows={filteredMeterReadingItems}\n                        headCells={meterReadingsTableHeadCells}\n                        handleDelete={handleItemDelete}\n                        deleteUrl={\"products\"}\n                    />\n                </Grid>\n            </Grid>\n        </Layout>\n    );\n};\n\nconst mapStateToProps = (state) => {\n    return {\n        products: state.products\n    };\n};\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        fetchData: (collectionsUrls) => dispatch(itemsFetchData(collectionsUrls)),\n        handleItemDelete: (itemId, url) => dispatch(handleDelete(itemId, url)),\n    };\n};\n\nMeterReadingsPage = connect(mapStateToProps, mapDispatchToProps)(MeterReadingsPage);\n\nexport default withRouter(MeterReadingsPage);\n"]},"metadata":{},"sourceType":"module"}